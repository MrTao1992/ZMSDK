!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=27)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),i=r(29),o=r(31),s=r(32),a=r(33),c=r(34),l=r(35),u=r(36),p=r(37),d=r(38);t.setMainInfo=function(e){t.mainInfo=e},t.gameConfig=new u.default,t.parameterVo=new n.default,t.userInfos=new i.default,t.serverUsers=new i.default,t.allUsers=new i.default,t.controllState=new o.default,t.historyInfo=new s.default,t.sceneState=new a.default,t.lessonInfo=new c.default,t.ReplayInfo=new l.default,t.repairInfo=new p.default,t.trackInfo=new d.default,t.mainInfo=null},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(0),o=r(4),s=r(9);!function(e){e[e.NONE=0]="NONE",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR"}(n=t.DEBUG_LEVEL||(t.DEBUG_LEVEL={}));var a={isDebug:!0,level:n.INFO};function c(e){a.level=e}function l(e,t){var r="";return r="hdGameInfo_",i.parameterVo.isSplitScreen()&&(r+="splite_"),i.parameterVo.userId&&(r+=i.parameterVo.userId),r+=":"+e}window.gameConfig=a,t.init=function(){i.parameterVo.enviroment===o.TYPE_ENVIRONMENT.PRODUCTION?c(n.WARN):i.parameterVo.isDebugInfo?c(n.INFO):c(n.WARN)},t.setDebugLevel=c,t.getDebugLevel=function(){return a.level},t.setIsDebug=function(e){a.isDebug=e},t.getIsDebug=function(){return a.isDebug},t.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];!a.isDebug||a.level>n.INFO||(e=l(e,t),console.log(e,t,(new Date).getTime()),h(e,t))},t.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];!a.isDebug||a.level>n.WARN||(e=l(e,t),console.warn(e,t,(new Date).getTime()),h(e,t))},t.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];!a.isDebug||a.level>n.ERROR||(e=l(e,t),console.error(e,t,(new Date).getTime()),h(e,t))},t.alert=function(e,t){a.isDebug&&!i.parameterVo.isProduction()&&function(e,t){if(!_){(_=document.createElement("div")).style.backgroundColor="#ffffff",_.style.width="8rem",_.style.height="4.5rem",_.style.position="absolute",_.style.left="50%",_.style.top="50%",_.style["margin-left"]="-4rem",_.style["margin-top"]="-2.25rem",_.style["z-index"]="2001",document.body.appendChild(_),_.style.display="none",(y=document.createElement("p")).style["text-align"]="center",y.style["font-size"]="0.6rem",y.style.margin="0.1rem",y.style.color="#000000",_.appendChild(y),(m=document.createElement("p")).style["text-align"]="left",m.style["font-size"]="0.4rem",m.style.margin="0.1rem",m.style.color="#000000",_.appendChild(m);var r=document.createElement("button");r.innerText="关 闭",r.style.position="absolute",r.style.bottom="0.2rem",r.style.left="50%",r.style["font-size"]="0.4rem",r.style["margin-left"]="-0.8rem",r.onclick=function(e){_.style.display="none"},_.appendChild(r)}y.innerText=e,m.innerText=t,_.style.display="block"}(e,t)};var u,p,d=[];function h(e,t){var r,n=0;if(!i.parameterVo.isProduction()&&(i.parameterVo.isIpad()||i.parameterVo.isApad()||i.parameterVo.isAphone()||i.parameterVo.isIphone())){for("[",r=t.length,n=0;n<r;n++)s.isEmpty(t[n])||(t[n]?e+=(0==n?"":",")+JSON.stringify(t[n]):e+=(0==n?"":",")+t[n].toString());"]",e+="[]  "+(new Date).getTime(),d.push(e),d.length>=50&&d.shift(),f()}}function f(){var e,t=0,r="";for(e=d.length,t=0;t<e;t++)r+=d[t]+"\n";u||((u=document.createElement("div")).style.backgroundColor="#2F2F37",u.style.width="80%",u.style.height="100%",u.style.position="absolute",u.style["overflow-x"]="auto",u.style["text-align"]="left",document.body.appendChild(u),u.style.display="none",u.innerText="",(p=document.createElement("button")).innerText="debugInfo",p.style.position="absolute",p.onclick=function(e){(E=!E)?(u.style.display="block",f()):(u.style.display="none",u.innerText="")},document.body.appendChild(p)),u.innerText=E?r:""}var _,y,m,E=!1},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=function(){function e(){}return Object.defineProperty(e.prototype,"packet",{set:function(e){this._packet=e},enumerable:!0,configurable:!0}),e.prototype.run=function(e){this.execute(e)},e.prototype.execute=function(e){},e.prototype.recylePacket=function(){n.default.Release(this._packet)},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(39),i=r(109),o=r(116),s=r(7),a=r(8),c=r(0),l=r(5),u=r(117),p=r(119),d=r(10),h=r(1),f=r(121),_=r(25),y=r(122),m=r(123),E=r(124),I=r(11),g=function(){function e(){if(this._isEnter=!1,this._jsbReady=!1,e._instance)throw console.error("SDKApp object is had already!");e._instance=this}return Object.defineProperty(e.prototype,"transceiver",{get:function(){return this._transceiver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"packetHandler",{get:function(){return this._packetHandler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordTransceiver",{get:function(){return this._recordTransceiver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"logTransceiver",{get:function(){return this._logTransceiver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newRecordTransceiver",{get:function(){return this._newRecordTransceiver},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"thirdInterface",{get:function(){return this._thirdInterface},enumerable:!0,configurable:!0}),e.instance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.init=function(){this._packetHandler=new o.default,this._transceiver=new n.default,this._transceiver.packetHandler=this._packetHandler,this._recordTransceiver=new p.default,this._watcherPackets=new _.default,this._logTransceiver=new y.default,this._newRecordTransceiver=new m.default,this._checkCrash=new E.default,this._thirdInterface={},window.ZMSDK_INTERFACE=this._thirdInterface},e.prototype.gameReady=function(){this._transceiver.gameReady(),this._checkCrash.start(),this._newRecordTransceiver.send(I.JS_INIT_COMPLETE),this._newRecordTransceiver.send(I.FIRST_SCENE_LOAD_START)},e.prototype.initEvents=function(){e.instance().transceiver.sendMsg(l.GAME_LOAD_COMPLETE,null,!1),c.parameterVo.isTeacher()&&!c.parameterVo.isRepair&&(this.transceiver.sendMsg(l.TEACH_MODLE_CHANGE,c.controllState.teachingMode,!1),this.transceiver.sendMsg(l.NOTIFY_WATCH_CONTROLLER,c.controllState.controllerId,!1)),c.parameterVo.isZMG()&&!c.parameterVo.isRepair&&this.packetHandler.notifyCMD(l.SYNC_TEACHER_REQUEST),c.parameterVo.isOberverTeacher()&&(this.transceiver.sendMsg(l.TEACH_MODLE_REQUEST,null,!1),this.transceiver.sendMsg(l.WATCH_CONTROLLER_REQUEST,null,!1),this.transceiver.sendMsg(l.TEACH_SPLIT_PAGE_REQUEST,null,!1)),c.parameterVo.isGameReplay()&&this.packetHandler.notifyCMD(l.GET_REPLAY_DATA_REQUEST),c.parameterVo.isRepairPlay&&this.transceiver.sendMsg(l.REPAIR_GET_SCENE_INFO,null,!1)},e.prototype.initController=function(){var e;e=new i.default,s.default.instance().addController(a.WEB_DASHBORAD,e),c.parameterVo.isGameReplay()&&(e=new u.default,s.default.instance().addController(a.REPLAY,e)),c.parameterVo.isRepairPlay&&(e=new f.default,s.default.instance().addController(a.REPAIR_PLAY,e))},Object.defineProperty(e.prototype,"jsbReady",{get:function(){return this._jsbReady},set:function(e){this._jsbReady=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEnter",{get:function(){return this._isEnter},enumerable:!0,configurable:!0}),e.prototype.initView=function(){this._isEnter||(this._isEnter=!0,this.initController(),this.initEvents(),h.info("SDK initView"),this._watcherPackets.start(),this._recordTransceiver.send(d.OPEN),this._newRecordTransceiver.send(I.FIRST_SCENE_LOAD_COMPLETE))},e.prototype.update=function(e){s.default.instance().update(e),this._watcherPackets.update(e)},e}();t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.NORMAL=0]="NORMAL",e[e.PREVIEW=1]="PREVIEW",e[e.CLASS=2]="CLASS",e[e.REPLAY=3]="REPLAY",e[e.SPLITSCREEN=4]="SPLITSCREEN"}(t.GAME_TYPE||(t.GAME_TYPE={})),function(e){e[e.NONE=0]="NONE",e[e.STUDENT=1]="STUDENT",e[e.TEACHER=2]="TEACHER",e[e.OBSERVER=3]="OBSERVER",e[e.SELLER=4]="SELLER",e[e.TRAINER=5]="TRAINER"}(t.USER_ROLE||(t.USER_ROLE={})),function(e){e[e.TYPE_TEACHING=0]="TYPE_TEACHING",e[e.TYPE_INSPECTION=1]="TYPE_INSPECTION"}(t.TEACHING_MODE||(t.TEACHING_MODE={})),function(e){e[e.ZML=0]="ZML",e[e.ZMG=1]="ZMG"}(t.COURSEWARE_TEYPE||(t.COURSEWARE_TEYPE={})),function(e){e[e.TYPE_LOADING=0]="TYPE_LOADING",e[e.TYPE_LOADED=1]="TYPE_LOADED",e[e.TYPE_PAUSE=2]="TYPE_PAUSE"}(t.TYPE_SCENE||(t.TYPE_SCENE={})),function(e){e[e.TYPE_POST_MESSAGE=0]="TYPE_POST_MESSAGE",e[e.YTPE_JSB_MESSAGE=1]="YTPE_JSB_MESSAGE"}(t.TYPE_MSG||(t.TYPE_MSG={})),function(e){e[e.TYPE_PC=0]="TYPE_PC",e[e.TYPE_IPAD=1]="TYPE_IPAD",e[e.TYPE_APAD=2]="TYPE_APAD",e[e.TYPE_IPHONE=3]="TYPE_IPHONE",e[e.TYPE_APHONE=4]="TYPE_APHONE"}(t.TYPE_DEVICE||(t.TYPE_DEVICE={})),function(e){e[e.NONE=0]="NONE",e[e.LOCALHOST=1]="LOCALHOST",e[e.TEST=2]="TEST",e[e.UAT=3]="UAT",e[e.PRODUCTION=4]="PRODUCTION"}(t.TYPE_ENVIRONMENT||(t.TYPE_ENVIRONMENT={})),function(e){e[e.CLASS=0]="CLASS",e[e.TRAIN=1]="TRAIN"}(t.TYPE_REPLAY||(t.TYPE_REPLAY={})),function(e){e.GAME="game",e.SPLIT="split"}(t.MENU_TYPE||(t.MENU_TYPE={})),function(e){e[e.NONE=0]="NONE",e[e.RECORD=1]="RECORD",e[e.PLAY=2]="PLAY"}(t.TYPE_REPAIR||(t.TYPE_REPAIR={})),function(e){e[e.GAME=0]="GAME",e[e.CORRECT=1]="CORRECT",e[e.ERROR=2]="ERROR",e[e.ANSWER=3]="ANSWER",e[e.GUILD=4]="GUILD"}(t.TYPE_RECORD||(t.TYPE_RECORD={})),function(e){e[e.PLAY=0]="PLAY",e[e.PAUSE=1]="PAUSE"}(t.TYPE_RECORD_STATE||(t.TYPE_RECORD_STATE={})),function(e){e[e.GAME=0]="GAME",e[e.ANSWER=1]="ANSWER"}(t.TYPE_REPAIR_PLAY||(t.TYPE_REPAIR_PLAY={})),function(e){e[e.UNLOAD=0]="UNLOAD",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(t.TYPE_REPAIR_DATA||(t.TYPE_REPAIR_DATA={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40),i=r(41),o=r(42),s=r(43),a=r(44),c=r(45),l=r(3),u=r(46),p=r(47),d=r(48),h=r(49),f=r(50),_=r(51),y=r(52),m=r(53),E=r(54),I=r(55),g=r(56),S=r(57),P=r(58),O=r(59),T=r(60),R=r(61),v=r(62),C=r(63),b=r(64),A=r(65),M=r(66),w=r(67),k=r(68),N=r(69),D=r(70),V=r(71),L=r(72),x=r(73),U=r(74),G=r(75),H=r(76),Y=r(77),j=r(78),B=r(79),F=r(80),K=r(81),W=r(82),q=r(83),z=r(85),J=r(86),Z=r(87),Q=r(88),X=r(89),$=r(90),ee=r(91),te=r(92),re=r(93),ne=r(94),ie=r(95),oe=r(96),se=r(97),ae=r(98),ce=r(99),le=r(100),ue=r(101),pe=r(102),de=r(103),he=r(104),fe=r(105);t.GAEM_READY="gameReady",t.SET_USER_INFO="setUserInfo",t.SET_USERS_INFO="setUsersInfo",t.SET_LESSON_INFO="setLessonInfo",t.SET_ALL_USERS_INFO="setAllUsersInfo",t.SAVE_USERS_INFO="saveUsersInfo",t.SET_TRACK_DATA="setTrackData",t.GAME_HISTORY="history",t.GAME_PARSE_HISTORY="parseHistory",t.GET_GAME_HISTORY="getHistory",t.RESPOND_GAME_HISTORY="respondHistory",t.CONTROLLER_CHANGE="controllerChange",t.TEACH_MODLE_CHANGE="teachModleChange",t.TEACH_SPLIT_PAGE_CHANGE="teachSplitPageChange",t.GAME_NAVIGATION_STATE="gameNavigationState",t.GAME_STOP="gameStop",t.GAME_RESUME="gameResume",t.SPLIT_GAME_READY="splitGameReady",t.DISPATCHER_TO_SUBIFRAME="dispatcherTOSubIfreame",t.TEACH_SPLIT_PAGE_REQUEST="teachSplitPageRequest",t.TEACH_MODLE_REQUEST="teachModleRequest",t.WATCH_HISTORY_REQUEST="watchHistoryRequest",t.WATCH_CONTROLLER_REQUEST="watchControllerRequest",t.NOTIFY_WATCH_CONTROLLER="notifyWatchController",t.SYNC_TEACHER_REQUEST="syncTeacherRequest",t.SYNC_TEACHER_RESPOND="syncTeacherRespond",t.GET_REPLAY_DATA_REQUEST="getReplayDataRequest",t.PARSE_REPLAY_DATA="parseReplayData",t.REPLAY_READY="replayReady",t.REPLAY_INFO="replayInfo",t.REPLAY_ONLINE_STATUS="onlineStatus",t.STOP_ZMG="stopZmg",t.SERVER_USERS="serverUsers",t.SHOW_PAGE_INDEX="showPageIndex",t.GAME_SYNC_MOUSE="m",t.SET_USERS_CHANGE_INFO="setUsersChangeInfo",t.SET_USER_CHANGE_INFO="setUserChangeInfo",t.TRAIN_CONTROLLER_CHANGE="trainControllerChange",t.TRAIN_USERS_CHANGE="trainUsersChange",t.SET_SUB_IFRAME_INFO="setSubIframeInfo",t.GET_GAME_CONFIG="getGameConfig",t.SET_SUB_IFRAME_SCENE_STATE="setSubIframeSceneState",t.LOCAL_VIDEO_CONTROLL="videoctl",t.LOCAL_STOP_ALL_MEDIA="stopAllVideoAudio",t.LOCAL_AUDIO_CONTROLL="audioctl",t.VIDEO_PROCESS="gameVideoProcess",t.VDIEO_PROCESS_REQUEST="gameVideoProcessRequest",t.COMMIT_ANSWER="commitAnswer",t.REPAIR_SCENE_INFO="repairSceneInfo",t.REPAIR_CONTROLLER_CHANGE="repairControllerChange",t.REPAIR_RECORD_STATE="repairRecordState",t.REPAIR_ANSWER_TIME="repairAnswerTime",t.REPAIR_ANSWER_RESPOND="repairAnswerRespond",t.REPAIR_NEXT_SCENE="repairNextScene",t.REPAIR_RERECODING_SCENE="repairRerecordingScene",t.REPAIR_SAVE_RECORD_SCENE="repairSaveRecordScene",t.REPAIR_GOTO_SCENE="repairGotoScene",t.REPAIR_SAVE="repairSave",t.REPAIR_SECEND_VERSION="repairSecendVersion",t.REPAIR_SET_BASE_INFO="setRepairBaseInfo",t.REPAIR_PLAY_READY="repairPlayReady",t.REPAIR_CHANGE_SCENE="repairChangeScene",t.REPAIR_COMMIT_ANSWER="repairCommitAnswer",t.REPAIR_SKIP="repairSkip",t.REPAIR_PLAY_STATE="repairPlayState",t.REPAIR_GET_SCENE_INFO="repairGetSceneInfo",t.REPAIR_RESPOND_SCENE_INFO="repairRespondSceneInfo",t.REPAIR_GET_DATA_REQUEST="repaireGetDataRequest",t.ON_STAGE_CHANGE="onStageChange",t.ON_STAGE_ACCEPT="onStageAccept",t.GAME_LOAD_COMPLETE="gameLoadComplete",t.GAME_LOAD_START="gameLoadStart",t.KEYBORD_UP="keyUp",t.KEYBORD_DONW="keyDown",t.DISPLAY_CONTROLL="displayControll",t.SCENE_INIT="initScene",t.SCENE_STATE_Change="changeSceneState",t.SCENE_ONLOAD="sceneOnLoad",t.SCENE_ONSTART="sceneOnStart",t.DISPLAY_BTNUI="displayBtnUI",t.DISPLAY_VIDEO_BTN="displayVedioBtn",t.SCREENSHOT="gameScreenShot",t.SCREENSHOT_DATA="gameScreenShotData",t.SCREEN_SHOT_ANSWER_DATA="screenShotAnswerData",t.GAME_LOG="hdGameLog",t.registCommands=function(){var e=l.default.instance().packetHandler;e.registerHandler(t.GAEM_READY,p.default),e.registerHandler(t.SET_USER_INFO,i.default),e.registerHandler(t.SET_USERS_INFO,u.default),e.registerHandler(t.SET_ALL_USERS_INFO,le.default),e.registerHandler(t.DISPATCHER_TO_SUBIFRAME,o.default),e.registerHandler(t.GAME_STOP,s.default),e.registerHandler(t.GAME_RESUME,a.default),e.registerHandler(t.CONTROLLER_CHANGE,c.default),e.registerHandler(t.GAME_HISTORY,d.default),e.registerHandler(t.SET_LESSON_INFO,h.default),e.registerHandler(t.GAME_PARSE_HISTORY,f.default),e.registerHandler(t.SPLIT_GAME_READY,_.default),e.registerHandler(t.RESPOND_GAME_HISTORY,m.default),e.registerHandler(t.GET_GAME_HISTORY,E.default),e.registerHandler(t.TEACH_MODLE_CHANGE,I.default),e.registerHandler(t.WATCH_HISTORY_REQUEST,g.default),e.registerHandler(t.TEACH_MODLE_REQUEST,S.default),e.registerHandler(t.WATCH_CONTROLLER_REQUEST,P.default),e.registerHandler(t.NOTIFY_WATCH_CONTROLLER,O.default),e.registerHandler(t.SYNC_TEACHER_REQUEST,T.default),e.registerHandler(t.SYNC_TEACHER_RESPOND,R.default),e.registerHandler(t.GET_REPLAY_DATA_REQUEST,b.default),e.registerHandler(t.PARSE_REPLAY_DATA,A.default),e.registerHandler(t.REPLAY_READY,M.default),e.registerHandler(t.REPLAY_INFO,w.default),e.registerHandler(t.STOP_ZMG,n.default),e.registerHandler(t.SERVER_USERS,k.default),e.registerHandler(t.SET_USER_CHANGE_INFO,D.default),e.registerHandler(t.SET_USERS_CHANGE_INFO,V.default),e.registerHandler(t.TRAIN_CONTROLLER_CHANGE,N.default),e.registerHandler(t.TRAIN_USERS_CHANGE,L.default),e.registerHandler(t.TEACH_SPLIT_PAGE_CHANGE,U.default),e.registerHandler(t.TEACH_SPLIT_PAGE_REQUEST,G.default),e.registerHandler(t.SET_SUB_IFRAME_INFO,H.default),e.registerHandler(t.GET_GAME_CONFIG,Y.default),e.registerHandler(t.SET_SUB_IFRAME_SCENE_STATE,j.default),e.registerHandler(t.COMMIT_ANSWER,ee.default),e.registerHandler(t.REPAIR_RECORD_STATE,B.default),e.registerHandler(t.REPAIR_ANSWER_TIME,F.default),e.registerHandler(t.REPAIR_ANSWER_RESPOND,K.default),e.registerHandler(t.REPAIR_NEXT_SCENE,W.default),e.registerHandler(t.REPAIR_RERECODING_SCENE,oe.default),e.registerHandler(t.REPAIR_SAVE_RECORD_SCENE,se.default),e.registerHandler(t.REPAIR_GOTO_SCENE,ae.default),e.registerHandler(t.REPAIR_SAVE,ce.default),e.registerHandler(t.REPAIR_SET_BASE_INFO,q.default),e.registerHandler(t.REPAIR_CHANGE_SCENE,z.default),e.registerHandler(t.REPAIR_COMMIT_ANSWER,J.default),e.registerHandler(t.REPAIR_SKIP,Z.default),e.registerHandler(t.REPAIR_PLAY_STATE,Q.default),e.registerHandler(t.REPAIR_GET_SCENE_INFO,X.default),e.registerHandler(t.REPAIR_RESPOND_SCENE_INFO,$.default),e.registerHandler(t.REPAIR_GET_DATA_REQUEST,te.default),e.registerHandler(t.REPAIR_PLAY_READY,re.default),e.registerHandler(t.REPAIR_CONTROLLER_CHANGE,ne.default),e.registerHandler(t.ON_STAGE_CHANGE,ie.default),e.registerHandler(t.SET_TRACK_DATA,ue.default),e.registerHandler(t.DISPLAY_CONTROLL,y.default),e.registerHandler(t.SCENE_INIT,v.default),e.registerHandler(t.SCENE_STATE_Change,C.default),e.registerHandler(t.SCREENSHOT,x.default),e.registerHandler(t.SCENE_ONLOAD,pe.default),e.registerHandler(t.SCENE_ONSTART,de.default),e.registerHandler(t.DISPLAY_BTNUI,he.default),e.registerHandler(t.DISPLAY_VIDEO_BTN,fe.default)},t.EVENTS_LIST=[t.GAEM_READY,t.SPLIT_GAME_READY,t.REPLAY_READY,t.SET_USER_INFO,t.SET_USERS_INFO,t.SET_ALL_USERS_INFO,t.GAME_HISTORY,t.RESPOND_GAME_HISTORY,t.GET_GAME_HISTORY,t.SET_LESSON_INFO,t.CONTROLLER_CHANGE,t.TEACH_MODLE_CHANGE,t.TEACH_SPLIT_PAGE_CHANGE,t.REPLAY_INFO,t.STOP_ZMG,t.LOCAL_VIDEO_CONTROLL,t.LOCAL_STOP_ALL_MEDIA,t.LOCAL_AUDIO_CONTROLL,t.SHOW_PAGE_INDEX,t.SET_USER_CHANGE_INFO,t.SET_USERS_CHANGE_INFO,t.TRAIN_USERS_CHANGE,t.SCREENSHOT,t.SCREENSHOT_DATA,t.SCENE_STATE_Change,t.GET_GAME_CONFIG,t.REPAIR_SCENE_INFO,t.REPAIR_CONTROLLER_CHANGE,t.REPAIR_RECORD_STATE,t.REPAIR_ANSWER_TIME,t.REPAIR_ANSWER_RESPOND,t.REPAIR_NEXT_SCENE,t.REPAIR_SET_BASE_INFO,t.REPAIR_CHANGE_SCENE,t.REPAIR_SKIP,t.REPAIR_PLAY_STATE,t.REPAIR_GET_SCENE_INFO,t.REPAIR_RESPOND_SCENE_INFO,t.REPAIR_PLAY_READY,t.REPAIR_SAVE_RECORD_SCENE,t.REPAIR_RERECODING_SCENE,t.REPAIR_GOTO_SCENE,t.REPAIR_SAVE,t.REPAIR_SECEND_VERSION,t.ON_STAGE_CHANGE,t.ON_STAGE_ACCEPT,t.GAME_LOAD_COMPLETE,t.GAME_LOAD_START,t.SAVE_USERS_INFO,t.SCREEN_SHOT_ANSWER_DATA,t.SET_TRACK_DATA,t.GAME_NAVIGATION_STATE],t.EVENTS_NO_SAVE=[t.GAEM_READY,t.SPLIT_GAME_READY,t.SET_USER_INFO,t.SET_USERS_INFO,t.SET_ALL_USERS_INFO,t.GAME_HISTORY,t.GET_GAME_HISTORY,t.RESPOND_GAME_HISTORY,t.SET_LESSON_INFO,t.TEACH_MODLE_CHANGE,t.TEACH_SPLIT_PAGE_CHANGE,t.REPLAY_READY,t.REPLAY_INFO,t.GAME_SYNC_MOUSE,t.SCREENSHOT,t.SCREENSHOT_DATA,t.REPAIR_SCENE_INFO,t.REPAIR_CONTROLLER_CHANGE,t.REPAIR_RECORD_STATE,t.REPAIR_ANSWER_TIME,t.REPAIR_ANSWER_RESPOND,t.REPAIR_NEXT_SCENE,t.ON_STAGE_CHANGE,t.ON_STAGE_ACCEPT,t.GAME_LOAD_COMPLETE,t.GAME_LOAD_START,t.SAVE_USERS_INFO,t.SCREEN_SHOT_ANSWER_DATA,t.SET_TRACK_DATA],t.EVENT_CHECK=[t.TEACH_MODLE_REQUEST,t.TEACH_SPLIT_PAGE_REQUEST,t.WATCH_CONTROLLER_REQUEST,t.NOTIFY_WATCH_CONTROLLER,t.SYNC_TEACHER_REQUEST,t.SYNC_TEACHER_RESPOND,t.VIDEO_PROCESS,t.VDIEO_PROCESS_REQUEST],t.EVENT_NO_EXCUTE=[t.LOCAL_VIDEO_CONTROLL,t.LOCAL_STOP_ALL_MEDIA,t.LOCAL_AUDIO_CONTROLL,t.SHOW_PAGE_INDEX,t.SCREENSHOT_DATA,t.REPAIR_SCENE_INFO,t.KEYBORD_UP,t.KEYBORD_DONW,t.ON_STAGE_ACCEPT,t.GAME_LOAD_COMPLETE,t.GAME_LOAD_START,t.GAME_LOG,t.REPAIR_SECEND_VERSION,t.SAVE_USERS_INFO,t.SCREEN_SHOT_ANSWER_DATA,t.REPLAY_ONLINE_STATUS],t.EVENT_TO_CLIENT=[t.SCREEN_SHOT_ANSWER_DATA],t.EVENTS_TO_LOCAL_CLIENT=[t.LOCAL_VIDEO_CONTROLL,t.LOCAL_STOP_ALL_MEDIA,t.LOCAL_AUDIO_CONTROLL]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),i=r(20),o=r(22),s=r(30),a=[],c=[],l=[],u=[],p=function(){function e(){}return e.Acquire=function(e){var t;return a.length>0?(t=a.pop()).name=e:t=new n.default(e),t},e.Release=function(e){e&&""!==e.name&&(e.reset(),a.push(e))},e.AcquireRecord=function(e){var t;return c.length>0?(t=c.pop()).event_id=e:t=new i.default(e),t},e.ReleaseRecord=function(e){e&&""!==e.event_id&&(e.reset(),c.push(e))},e.AcquirePageRecord=function(e){var t;return l.length>0?(t=l.pop()).page_name=e:t=new o.default(e),t},e.AcquireMousePacket=function(e){var t;return u.length>0?(t=u.pop()).name=e:t=new s.default(e),t},e.ReleaseMousePacket=function(e){e&&""!=e.name&&(e.reset(),u.push(e))},e.ReleasePageRecord=function(e){e&&""!==e.page_name&&(e.reset(),l.push(e))},e.Destroy=function(){e.releasePool(a),a=null,e.releasePool(c),c=null,e.releasePool(l),l=null},e.releasePool=function(e){var t,r=0;for(t=e.length,r=0;r<t;r++)e[r]=null},e}();t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){if(e._instance)throw console.error("the object is had already!");this._controllers={},e._instance=this}return e.instance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.addController=function(e,t){this._controllers[e]=t},e.prototype.getController=function(e){return this._controllers[e]},e.prototype.removeController=function(e){var t;(t=this._controllers[e])&&(t.destroy(),this._controllers[e]=null,delete this._controllers[e])},e.prototype.update=function(e){for(var t in this._controllers)if(this._controllers.hasOwnProperty(t)){var r=this._controllers[t];r&&r.update(e)}},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REPLAY="SDKReplayController",t.REPAIR_PLAY="SDKRepairPlayController",t.WEB_DASHBORAD="SDKWebDashBoradController"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=function(e){return null==e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.TYPE_COUNT=0]="TYPE_COUNT",e[e.TYPE_TIME=1]="TYPE_TIME"}(t.EVENT_TYPE||(t.EVENT_TYPE={})),t.PREVIEW="preview_",t.STUDY="study_",t.WATCH="watch_",t.REPLAY="replay_",t.ZMG="zmg_",t.ZMG2="ezmg_",t.ZML="zml_",t.OPEN="open",t.CLOSE="close",t.LASTPAGE="lastpage",t.NEXTPAGE="nextpage",t.CLICK_REPRACTICE="click_repractice",t.CLICK_SPLIT="click_split",t.CLICK_MAIN="click_main",t.CLICK_TEACHER_CONTROL="click_teachercontrol",t.CLICK_FREE_CONTROL="click_freecontrol",t.CLICK_AUDIO="click_audio",t.CLICK_ENTER_GAME="click_entergame",t.CLICK_LEAVE_GAME="click_leavegame",t.CLICK_ENTER_LEVEL="click_enterlevel",t.CLICK_LEAVE_LEVEL="click_leavelevel",t.VIDEO_READY_START="video_readyStart",t.VIDEO_READY="video_ready",t.video_DELAY_START="video_delayStart",t.VIDEO_DELAY="video_delay",t.VIDEO_PLAY="video_Play",t.VIDEO_REPAIR_ERROR="video_repair_error",t.SPLIT_SCREEN_REFRESH="split_refresh",t.SPLIT_SCRREN_PRE_PAGE="split_prePage",t.SPLIT_SCRREN_NEXT_PAGE="split_nextPage",t.SPLIT_SCRREN_CLICK_TOMAX="split_toMax",t.SPLIT_SCRREN_CLICK_TOMIN="split_toMin",t.SPLIT_SCRREN_DOUBLE_TOMAX="split_doubleToMax",t.SPLIT_SCRREN_DOUBLE_TOMIN="split_doubleToMin",t.SPLIT_SCRREN_FULL_PRE_PAGE="split_full_prePage",t.SPLIT_SCRREN_FULL_NEXT_PAGE="split_full_nextPage",t.PAGE="page"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTR_DOM_READY="ctrDomReady",t.CTR_ENGINE_INIT_ERROR="ctrEngineInitError",t.CTR_ENGINE_INITED="ctrEngineInited",t.CTR_VIDEO_PLAY="ctrVideoPlay",t.CTR_WEBGL_INIT="ctrWebGLInit",t.CTR_WEBGL_INIT_ERROR="ctrWebGLInitError",t.JS_INIT_COMPLETE="jsInitComplete",t.FIRST_SCENE_LOAD_START="firstSceneLoadStart",t.FIRST_SCENE_LOAD_COMPLETE="firstSceneLoadCompelte",t.INIT_SET_USER_INFO="initSetUserInfo",t.INIT_SET_USERS_INFO="initSetUsersInfo",t.INIT_LESSON_INFO="initLessonInfo",t.INIT_SET_ALL_USERS_INFO="initSetAllUsersInfo",t.INIT_SET_TRACK_DATA="initSetTrackData"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(6),o=function(){function e(){this.MAX=200,this.reset()}return e.prototype.clear=function(){var e,t=0;for(e=this._packets.length>this.MAX?this.MAX:this._packets.length,t=0;t<e;t++)i.default.Release(this._packets[t]);e>0&&this._packets.splice(0,e)},Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(e){this._userId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this._avatar},set:function(e){this._avatar=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this._role},set:function(e){this._role=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSplitReady",{get:function(){return this._isSplitReady},set:function(e){this._isSplitReady=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watchMobile",{get:function(){return this._watchMobile},set:function(e){this._watchMobile=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"historyCount",{get:function(){return this._historyCount},set:function(e){this._historyCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHistoryReq",{get:function(){return this._isHistoryReq},set:function(e){this._isHistoryReq=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isHistoryRes",{get:function(){return this._isHistoryRes},set:function(e){this._isHistoryRes=e},enumerable:!0,configurable:!0}),e.prototype.addReplayMobile=function(e){-1===this._replayMobiles.indexOf(e)&&this._replayMobiles.push(e)},e.prototype.getReplayMobileByIndex=function(e){if(e<this._replayMobiles.length)return this._replayMobiles[e]},Object.defineProperty(e.prototype,"replayCount",{get:function(){return this._replayMobiles.length},enumerable:!0,configurable:!0}),e.prototype.addPacket=function(e){var t=this;e.isMainFrame&&this._packets.length>=this.MAX&&(this._isClear||(this._isClear=!0,setTimeout((function(){t.clear(),t._isClear=!1}),100))),this._packets.push(e)},e.prototype.getPacketByIndex=function(e){return e>=this._packets.length?null:this._packets[e]},e.prototype.getLastMainPacket=function(){var e=0;for(e=this._packets.length-1;e>=0;e--)if(this._packets[e].isMainFrame)return this._packets[e];return null},e.prototype.getLastMainIndex=function(){var e=0;for(e=this._packets.length-1;e>=0;e--)if(this._packets[e].isMainFrame)return e;return-1},e.prototype.count=function(){return this._packets.length},e.prototype.reset=function(){this._userId="",this._watchMobile="",this._name="",this._avatar="",this._packets=[],this._isActive=!1,this._isSplitReady=!1,this._historyCount=0,this._replayMobiles=[],this._role=n.USER_ROLE.NONE,this._isClear=!1,this._isHistoryReq=!1,this._isHistoryRes=!1},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.REPLAY_DATA_URL="https://zm-chat-lessons.oss-cn-hangzhou.aliyuncs.com/",t.RECORD_OUT_URL="https://user-behavior-log.zmlearn.com/log/hdGame",t.RECORD_OUT_URL_TEST="https://user-behavior-log-test.zmlearn.com/log/test_hdGame",t.RECORD_INNER_URL="https://user-behavior-log-inner.zmlearn.com/log/hdGame",t.RECORD_INNER_URL_TEST="https://user-behavior-log-inner.zmlearn.com/log/test_hdGame",t.GAEM_CONFIG_URL="https://rs.hdkj.zmlearn.com/atlas/controller/gameConfig.json",t.REPAIR_DATA_URL="https://zm-airecorder-lessons.oss-cn-hangzhou.aliyuncs.com",t.ENVIRONMENT_PRODUCTION="hdkj.zmlearn.com",t.ENVIRONMENT_TEST="test.hdkj.zmlearn.com",t.ENVIRONMENT_UAT="hdkj.uat.zmops.cc",t.ENVIRONMENT_LOCAL="localhost",t.ENVIRONMENT_LOCALIP="127.0.0.1",t.WIDTH=1920,t.HEIGHT=1080},function(e,t,r){"use strict";function n(e){return null==e||""===e?"":e.length<=4?e:e.replace(e.substring(0,e.length-4),"****")}function i(e){var t={},r=e.indexOf("?");if(-1!==r)for(var n=e.substr(r+1).split("&"),i=0;i<n.length;i++)t[n[i].split("=")[0]]=unescape(n[i].split("=")[1]);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.formateMobile=n,t.formateUrlOfMobile=function(e){var t,r="",o=0;if(-1==(r=e).indexOf("?"))return r;for(var s in t=i(r),r=e.substring(0,r.indexOf("?")+1),t)""!==s&&("userMobile"===s&&(t[s]=n(t[s])),r+=0!=o?"&"+s+"="+t[s]:s+"="+t[s],o++);return r},t.urlQuery=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),s=document.createElement("style");s.setAttribute("class","sdk-controller-public"),document.getElementsByTagName("head")[0].appendChild(s),s.addStyle=function(e){this.appendChild(document.createTextNode(e))},window.publicStyle=s;var a="https://rs.hdkj.zmlearn.com/atlas/controller/";window.SDKConfig&&window.SDKConfig.assetsRoot&&""!=window.SDKConfig.assetsRoot&&(a=window.SDKConfig.assetsRoot),t.SDKControllerUIComponents={backward:{name:"backward",classname:"button-backward",texture:{normal:a+"backward_normal.png",unabled:a+"backward_unabled.png"},defaultStatus:"normal",type:"button",desc:"快退"},forward:{name:"forward",classname:"button-forward",texture:{normal:a+"forward_normal.png",unabled:a+"forward_unabled.png"},defaultStatus:"normal",type:"button",desc:"快退"},play:{name:"play",classname:"button-play",texture:{play:a+"play_normal.png",pause:a+"pause_normal.png"},defaultStatus:"play",type:"button",desc:"播放"},prev:{name:"prev",classname:"button-prev",texture:{normal:a+"btn_pre.png",unabled:a+"btn_pre.png"},defaultStatus:"normal",type:"button",desc:"前一条"},next:{name:"next",classname:"button-next",texture:{normal:a+"btn_next.png",unabled:a+"btn_next.png"},defaultStatus:"normal",type:"button",desc:"后一条"},prevCheck:{name:"prevCheck",classname:"button-prev-check",texture:{normal:a+"prev_check_normal.png",unabled:a+"prev_check_unabled.png"},defaultStatus:"normal",type:"button",desc:"前一关"},nextCheck:{name:"nextCheck",classname:"button-next-check",texture:{normal:a+"next_check_normal.png",unabled:a+"next_check_unabled.png"},defaultStatus:"normal",type:"button",desc:"下一关"},controll:{name:"controll",classname:"checkbox-controll",texture:{teacher:a+"btn_teacher.png",student:a+"btn_student.png"},defaultStatus:"teacher",type:"checkbox",desc:"控制权切换"},split:{name:"split",classname:"checkbox-split",texture:{full:a+"btn_full.png",split:a+"btn_shrink.png"},defaultStatus:"full",type:"checkbox",desc:"分屏切换"},offline:{name:"offline",classname:"image-offline",texture:{normal:a+"img_tips.png",unabled:a+"img_tips@2x.png"},defaultStatus:"normal",type:"button",desc:"离线"},refresh:{name:"refresh",classname:"button-refresh",texture:{normal:a+"refresh.png",unabled:a+"refresh.png"},defaultStatus:"normal",type:"button",desc:"刷新"},scale:{name:"scale",classname:"checkbox-scale",texture:{normal:a+"scaleFull.png",full:a+"scaleNormal.png"},defaultStatus:"normal",type:"checkbox",desc:"分屏缩放"}};var c=function(){function e(e,t){this.enable=!0,this.top=t}return e.prototype.show=function(){this.domElem.style.display="block"},e.prototype.hide=function(){this.domElem.style.display="none"},e.prototype.setStatus=function(e){this.status&&this.domElem.classList.remove(this.status),this.domElem.classList.add(e),this.status=e},e.prototype.setEnable=function(e){this.enable=e},e}();t.DOMComponent=c;var l=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.lastClickTime=(new Date).getTime();var i=document.createElement("div");for(var o in i.classList.add("sdk-ui-button"),i.classList.add(t.classname),i.classList.add(t.defaultStatus),n.status=t.defaultStatus,n.name=t.name,t.texture)o&&s.addStyle(".sdk-ui-button."+t.classname+"."+o+"{background-image:url('"+t.texture[o]+"')}");return n.domElem=i,n.domElem.addEventListener("click",function(e){(new Date).getTime()-this.lastClickTime<300||(this.onClick(e),this.onMouseOver())}.bind(n),!1),n.domElem.addEventListener("mouseover",function(e){this.onMouseOver(e)}.bind(n),!1),n.domElem.addEventListener("mouseout",function(e){this.onMouseOut(e)}.bind(n),!1),n}return i(t,e),t.prototype.onClick=function(e){console.log("组件"+this.name)},t.prototype.onMouseOver=function(e){},t.prototype.onMouseOut=function(e){},t}(c);t.DOMButton=l;var u=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.statusList=[],n.lastClickTime=(new Date).getTime();var i=document.createElement("div");for(var o in i.classList.add("sdk-ui-checkbox"),i.classList.add(t.classname),i.classList.add(t.defaultStatus),n.status=t.defaultStatus,n.name=t.name,t.texture)o&&(n.statusList.push(o),s.addStyle(".sdk-ui-checkbox."+t.classname+"."+o+"{background-image:url('"+t.texture[o]+"')}"));return n.domElem=i,n.domElem.addEventListener("click",function(e){if(this.enable){var t=(new Date).getTime();if(!(t-this.lastClickTime<1e3)){this.lastClickTime=t;var r=this.statusList.indexOf(this.status);r<this.statusList.length-1?r++:r=0,r=this.statusList[r],this.setStatus(r),this.onClick(e),this.onMouseOver()}}}.bind(n),!1),n.domElem.addEventListener("mouseover",function(e){this.onMouseOver(e)}.bind(n),!1),n.domElem.addEventListener("mouseout",function(e){this.onMouseOut(e)}.bind(n),!1),n}return i(t,e),t.prototype.onClick=function(e){console.log("组件"+this.name)},t.prototype.onMouseOver=function(e){},t.prototype.onMouseOut=function(e){},t}(c);t.DOMCheckbox=u,t.setDefaultStyle=function(){if(o.default.instance().thirdInterface.isZMG2()){var e=o.default.instance().thirdInterface.defaultStyle();s.addStyle(e)}else s.addStyle("\n        /*这些是按钮ui的style*/\n        #controllCenter{position:fixed;width:100%;height:100%;left:0;top:0;z-index:1001;pointer-events:none;}\n        #extraContainer{position:fixed;width:100%;height:100%;left:0;top:0;z-index:1002;pointer-events:none;}\n        #pageContainer{position:absolute;background-position:0;width:2rem;height:0.5rem;left:50%;margin-left:-0.35rem;bottom:0rem;}\n        .pageCodeRed{background:#f00;border-radius:50%;width:10px;height:10px;float:left;margin-left:4px;margin-top:-1px}\n        .pageCodeGray{border-radius:50%;width:8px;height:8px;width:8px;background:rgba(255,255,255,0.9);opacity:0.4;float:left;margin-left:4px}\n        .sdk-ui-button{position:absolute;background-size:100% 100%;transition:transform 0.2s;pointer-events:auto;}\n        .sdk-ui-button:not(.unabled):hover{transform:scale(1.15);}\n        .sdk-ui-button:not(.unabled):active{transform:scale(0.9);}\n        .button-prev{background-position:0;width:1rem;height:1rem;top:50%;left:0rem;margin-top:-0.5rem}\n        .button-next{background-position:0;width:1rem;height:1rem;top:50%;right:0rem;margin-top:-0.5rem}\n        .button-prev-check{background-position:0;width:1rem;height:1rem;top:50%;left:0.15rem;margin-top:-0.5rem}\n        .button-next-check{background-position:0;width:1rem;height:1rem;top:50%;right:0.15rem;margin-top:-0.5rem}\n        .button-play{width:0.91rem;height:0.94rem;left:50%;top:50%;margin-top:-0.47rem;pointer-events:none;}\n        .button-pause{width:0.91rem;height:0.94rem;left:50%;bottom:-0.37rem;}\n        .button-backward{width:0.91rem;height:0.94rem;left:50%;margin-left:-1.78rem;bottom:-0.37rem;}\n        .button-forward{width:0.91rem;height:0.94rem;left:50%;margin-left:1.78rem;bottom:-0.37rem;}\n        .sdk-ui-checkbox{position:absolute;background-size:100% 100%;pointer-events:auto;}\n        .checkbox-split{width:2.272rem;height:1rem;right:0.15rem;top:0.17rem;}\n        .checkbox-controll{width:2.272rem;height:1rem;right:3rem;top:0.17rem;}\n        .image-offline{width:6rem;height:1.2rem;left:0rem;bottom:0.3rem;pointer-events:none;}\n        /*这些是分屏ui的style*/\n        body{overflow:hidden;background-color:transparent !important;}\n        #childIframes{width:19.2rem;height:10.8rem;position:absolute;left:50%;top:50%;margin-left:-9.6rem;margin-top:-5.4rem;}\n        .inspliting{background-color:#2F2F37;}\n        .inspliting canvas{display:none}\n        .inspliting video{display:none}\n        .sdk-child{position:absolute;display:none;}\n        .sdk-child-iframe{position:absolute;outline:none;border:none;z-index:0;background-color:#ccc;}\n        .sdk-child-name{left:0.55rem;color:#fff;position:absolute;bottom:0;z-index:2}\n        .sdk-child-bg{left:0;position:absolute;z-index:1;width:100%;background:black;opacity:0.6}\n        .sdk-child-event{position:absolute;width:100%;height:100%;left:0;right:0;z-index:1;}\n        .button-refresh,.checkbox-scale{z-index:2}\n        .checkbox-scale:not(.unabled):hover{transform:scale(1.15);}\n        .checkbox-scale:not(.unabled):active{transform:scale(0.9);}\n\n        .split1 .sdk-child:nth-child(1){display:block}\n        .split1 .sdk-child{width:16rem;height:9rem;left:50%;top:50%;margin-left:-8rem;margin-top:-4.5rem}\n        .split1 .sdk-child-iframe{width:16rem;height:9rem;}\n        .split1 .sdk-child-name{line-height:0.8rem;height:0.8rem;font-size:0.36rem;text-indent:0.1rem;}\n        .split1 .button-refresh{position:absolute;bottom:0.15rem;left:0.1rem;width:0.5rem;height:0.5rem;}\n        .split1 .checkbox-scale{position:absolute;bottom:0.15rem;right:0.1rem;width:0.5rem;height:0.5rem;}\n        .split1 .sdk-child-bg{height:0.8rem;bottom:0rem;}\n\n        .split2 .sdk-child:nth-child(1),.split2 .sdk-child:nth-child(2){display:block}\n        .split2 .sdk-child{width:8.88rem;height:5rem;left:50%;top:50%;margin-left:0.19rem;margin-top:-2.5rem}\n        .split2 .sdk-child:nth-child(1){margin-left:-9.07rem;}\n        .split2 .sdk-child-iframe{width:8.88rem;height:5rem;}\n        .split2 .sdk-child-name{line-height:0.5rem;height:0.5rem;font-size:0.26rem;text-indent:0.03rem;}\n        .split2 .button-refresh{position:absolute;bottom:0.05rem;left:0.1rem;width:0.4rem;height:0.4rem;}\n        .split2 .checkbox-scale{position:absolute;bottom:0.05rem;right:0.1rem;width:0.4rem;height:0.4rem;}\n        .split2 .sdk-child-bg{height:0.5rem;bottom:0rem;}\n\n        .split3 .sdk-child:nth-child(1),.split3 .sdk-child:nth-child(2),.split3 .sdk-child:nth-child(3){display:block}\n        .split3 .sdk-child{width:8rem;height:4.5rem;left:50%;top:50%;margin-top:0.2rem;}\n        .split3 .sdk-child:nth-child(1), .split3 .sdk-child:nth-child(2){margin-top:-4.7rem;}\n        .split3 .sdk-child:nth-child(3){margin-top:0.2rem;}\n        .split3 .sdk-child:nth-child(1), .split3 .sdk-child:nth-child(3){margin-left:-8.2rem;}\n        .split3 .sdk-child:nth-child(2){margin-left:0.2rem;}\n        .split3 .sdk-child-iframe{width:8rem;height:4.5rem;}\n        .split3 .sdk-child-name{line-height:0.5rem;height:0.5rem;font-size:0.26rem;text-indent:0.02rem;}\n        .split3 .button-refresh{position:absolute;bottom:0.05rem;left:0.1rem;width:0.4rem;height:0.4rem;}\n        .split3 .checkbox-scale{position:absolute;bottom:0.05rem;right:0.1rem;width:0.4rem;height:0.4rem;}\n        .split3 .sdk-child-bg{height:0.5rem;bottom:0rem;}\n\n        .split4 .sdk-child:nth-child(1), .split4 .sdk-child:nth-child(2), .split4 .sdk-child:nth-child(3), .split4 .sdk-child:nth-child(4){display:block}\n        .split4 .sdk-child{width:8rem;height:4.5rem;left:50%;top:50%;margin-top:0.2rem;}\n        .split4 .sdk-child:nth-child(1), .split4 .sdk-child:nth-child(2){margin-top:-4.7rem;}\n        .split4 .sdk-child:nth-child(3), .split4 .sdk-child:nth-child(4){margin-top:0.2rem;}\n        .split4 .sdk-child:nth-child(1), .split4 .sdk-child:nth-child(3){margin-left:-8.2rem;}\n        .split4 .sdk-child:nth-child(2), .split4 .sdk-child:nth-child(4){margin-left:0.2rem;}\n        .split4 .sdk-child-iframe{width:8rem;height:4.5rem;}\n        .split4 .sdk-child-name{line-height:0.5rem;height:0.5rem;font-size:0.26rem;text-indent:0.02rem;}\n        .split4 .button-refresh{position:absolute;bottom:0.05rem;left:0.1rem;width:0.4rem;height:0.4rem;}\n        .split4 .checkbox-scale{position:absolute;bottom:0.05rem;right:0.1rem;width:0.4rem;height:0.4rem;}\n        .split4 .sdk-child-bg{height:0.5rem;bottom:0rem;}\n\n        .split5 .sdk-child:nth-child(1), .split5 .sdk-child:nth-child(2), .split5 .sdk-child:nth-child(3), .split5 .sdk-child:nth-child(4), .split5 .sdk-child:nth-child(5){display:block}\n        .split5 .sdk-child{width:5.2rem;height:3.28rem;left:50%;top:50%;}\n        .split5 .sdk-child:nth-child(1), .split5 .sdk-child:nth-child(2), .split5 .sdk-child:nth-child(3){margin-top:-3.48rem;}\n        .split5 .sdk-child:nth-child(4), .split5 .sdk-child:nth-child(5){margin-top:0.2rem;}\n        .split5 .sdk-child:nth-child(1){margin-left:-8.36rem;}\n        .split5 .sdk-child:nth-child(2){margin-left:-2.6rem;}\n        .split5 .sdk-child:nth-child(3){margin-left:3.16rem;}\n        .split5 .sdk-child:nth-child(4){margin-left:-5.48rem;}\n        .split5 .sdk-child:nth-child(5){margin-left:0.28rem;}\n        .split5 .sdk-child-iframe{width:5.2rem;height:2.88rem;}\n        .split5 .sdk-child-name{line-height:0.4rem;height:0.4rem;font-size:0.24rem;text-indent:0.02rem;}\n\n        .split6 .sdk-child:nth-child(1), .split6 .sdk-child:nth-child(2), .split6 .sdk-child:nth-child(3), .split6 .sdk-child:nth-child(4), .split6 .sdk-child:nth-child(5), .split6 .sdk-child:nth-child(6){display:block}\n        .split6 .sdk-child{width:5.2rem;height:3.28rem;left:50%;top:50%;}\n        .split6 .sdk-child:nth-child(1), .split6 .sdk-child:nth-child(2), .split6 .sdk-child:nth-child(3){margin-top:-3.48rem;}\n        .split6 .sdk-child:nth-child(4), .split6 .sdk-child:nth-child(5), .split6 .sdk-child:nth-child(6){margin-top:0.2rem;}\n        .split6 .sdk-child:nth-child(1), .split6 .sdk-child:nth-child(4){margin-left:-8.36rem;}\n        .split6 .sdk-child:nth-child(2), .split6 .sdk-child:nth-child(5){margin-left:-2.6rem;}\n        .split6 .sdk-child:nth-child(3), .split6 .sdk-child:nth-child(6){margin-left:3.16rem;}\n        .split6 .sdk-child-iframe{width:5.2rem;height:2.88rem;}\n        .split6 .sdk-child-name{line-height:0.4rem;height:0.4rem;font-size:0.24rem;text-indent:0.02rem;}\n    ")},t.setObserverStyle=function(){if(o.default.instance().thirdInterface.isZMG2()){var e=o.default.instance().thirdInterface.observerStyle();s.addStyle(e)}else s.addStyle("\n        /*setObserverStyle 这些是按钮ui的style*/\n        #controllCenter{position:fixed;width:100%;height:100%;left:0;top:0;z-index:1001;pointer-events:auto;}\n        #extraContainer{position:fixed;width:100%;height:100%;left:0;top:0;z-index:1002;pointer-events:auto;}\n        #pageContainer{position:absolute;background-position:0;width:2rem;height:0.5rem;left:50%;margin-left:-0.35rem;bottom:0rem;}\n        .pageCodeRed{background:#f00;border-radius:50%;width:10px;height:10px;float:left;margin-left:4px;margin-top:-1px}\n        .pageCodeGray{border-radius:50%;width:8px;height:8px;width:8px;background:rgba(255,255,255,0.9);opacity:0.4;float:left;margin-left:4px}\n        .sdk-ui-button{position:absolute;background-size:100% 100%;transition:transform 0.2s;pointer-events:none;}\n        .sdk-ui-button:not(.unabled):hover{transform:scale(1.15);}\n        .sdk-ui-button:not(.unabled):active{transform:scale(0.9);}\n        .button-prev{background-position:0;width:1rem;height:1rem;top:50%;left:0rem;margin-top:-0.5rem}\n        .button-next{background-position:0;width:1rem;height:1rem;top:50%;right:0rem;margin-top:-0.5rem}\n        .button-prev-check{background-position:0;width:1rem;height:1rem;top:50%;left:0.15rem;margin-top:-0.5rem}\n        .button-next-check{background-position:0;width:1rem;height:1rem;top:50%;right:0.15rem;margin-top:-0.5rem}\n        .button-play{width:0.91rem;height:0.94rem;left:50%;top:50%;margin-top:-0.47rem;pointer-events:none;}\n        .button-pause{width:0.91rem;height:0.94rem;left:50%;bottom:-0.37rem;}\n        .button-backward{width:0.91rem;height:0.94rem;left:50%;margin-left:-1.78rem;bottom:-0.37rem;}\n        .button-forward{width:0.91rem;height:0.94rem;left:50%;margin-left:1.78rem;bottom:-0.37rem;}\n        .sdk-ui-checkbox{position:absolute;background-size:100% 100%;pointer-events:none;}\n        .checkbox-split{width:2.272rem;height:1rem;right:0.15rem;top:0.17rem;}\n        .checkbox-controll{width:2.272rem;height:1rem;right:3rem;top:0.17rem;}\n        .image-offline{width:6rem;height:1.2rem;left:0rem;bottom:0.3rem;pointer-events:none;}\n\n        /*这些是分屏ui的style*/\n        body{overflow:hidden;background-color:transparent !important;}\n        #childIframes{width:19.2rem;height:10.8rem;position:absolute;left:50%;top:50%;margin-left:-9.6rem;margin-top:-5.4rem;}\n        .inspliting{background-color:#2F2F37;}\n        .inspliting canvas{display:none}\n        .inspliting video{display:none}\n        .sdk-child{position:absolute;display:none;}\n        .sdk-child-iframe{position:absolute;outline:none;border:none;z-index:0;background-color:#ccc;}\n        .sdk-child-name{color:#fff;position:absolute;bottom:0;z-index:2}\n        .sdk-child-bg{left:0;background:black;position:absolute;z-index:1;width:100%;opacity:0.6}\n        .checkbox-scale{z-index:2}\n        .checkbox-scale:not(.unabled):hover{transform:scale(1.15);}\n        .checkbox-scale:not(.unabled):active{transform:scale(0.9);}\n\n        .split1 .sdk-child:nth-child(1){display:block}\n        .split1 .sdk-child{width:16rem;height:9rem;left:50%;top:50%;margin-left:-8rem;margin-top:-4.5rem}\n        .split1 .sdk-child-iframe{width:16rem;height:9rem;}\n        .split1 .sdk-child-name{line-height:0.8rem;height:0.8rem;font-size:0.36rem;text-indent:0.1rem;}\n        .split1 .checkbox-scale{position:absolute;bottom:0.15rem;right:0.1rem;width:0.5rem;height:0.5rem;}\n        .split1 .sdk-child-bg{height:0.8rem;bottom:0rem;}\n\n        .split2 .sdk-child:nth-child(1),.split2 .sdk-child:nth-child(2){display:block}\n        .split2 .sdk-child{width:8.88rem;height:5rem;left:50%;top:50%;margin-left:0.19rem;margin-top:-2.5rem}\n        .split2 .sdk-child:nth-child(1){margin-left:-9.07rem;}\n        .split2 .sdk-child-iframe{width:8.88rem;height:5rem;}\n        .split2 .sdk-child-name{line-height:0.5rem;height:0.5rem;font-size:0.26rem;text-indent:0.03rem;}\n        .split2 .checkbox-scale{position:absolute;bottom:0.05rem;right:0.1rem;width:0.4rem;height:0.4rem;}\n        .split2 .sdk-child-bg{height:0.5rem;bottom:0rem;}\n\n        .split3 .sdk-child:nth-child(1),.split3 .sdk-child:nth-child(2),.split3 .sdk-child:nth-child(3){display:block}\n        .split3 .sdk-child{width:8rem;height:4.5rem;left:50%;top:50%;margin-top:0.2rem;}\n        .split3 .sdk-child:nth-child(1), .split3 .sdk-child:nth-child(2){margin-top:-4.7rem;}\n        .split3 .sdk-child:nth-child(3){margin-top:0.2rem;}\n        .split3 .sdk-child:nth-child(1), .split3 .sdk-child:nth-child(3){margin-left:-8.2rem;}\n        .split3 .sdk-child:nth-child(2){margin-left:0.2rem;}\n        .split3 .sdk-child-iframe{width:6rem;height:4.5rem;}\n        .split3 .sdk-child-name{line-height:0.5rem;height:0.5rem;font-size:0.26rem;text-indent:0.02rem;}\n        .split3 .checkbox-scale{position:absolute;bottom:0.05rem;right:0.1rem;width:0.4rem;height:0.4rem;}\n        .split3 .sdk-child-bg{height:0.5rem;bottom:0rem;}\n\n        .split4 .sdk-child:nth-child(1), .split4 .sdk-child:nth-child(2), .split4 .sdk-child:nth-child(3), .split4 .sdk-child:nth-child(4){display:block}\n        .split4 .sdk-child{width:8rem;height:4.5rem;left:50%;top:50%;margin-top:0.2rem;}\n        .split4 .sdk-child:nth-child(1), .split4 .sdk-child:nth-child(2){margin-top:-4.7rem;}\n        .split4 .sdk-child:nth-child(3), .split4 .sdk-child:nth-child(4){margin-top:0.2rem;}\n        .split4 .sdk-child:nth-child(1), .split4 .sdk-child:nth-child(3){margin-left:-8.2rem;}\n        .split4 .sdk-child:nth-child(2), .split4 .sdk-child:nth-child(4){margin-left:0.2rem;}\n        .split4 .sdk-child-iframe{width:8rem;height:4.5rem;}\n        .split4 .sdk-child-name{line-height:0.5rem;height:0.5rem;font-size:0.26rem;text-indent:0.02rem;}\n        .split4 .checkbox-scale{position:absolute;bottom:0.05rem;right:0.1rem;width:0.4rem;height:0.4rem;}\n        .split4 .sdk-child-bg{height:0.5rem;bottom:0rem;}\n\n        .split5 .sdk-child:nth-child(1), .split5 .sdk-child:nth-child(2), .split5 .sdk-child:nth-child(3), .split5 .sdk-child:nth-child(4), .split5 .sdk-child:nth-child(5){display:block}\n        .split5 .sdk-child{width:5.2rem;height:3.28rem;left:50%;top:50%;}\n        .split5 .sdk-child:nth-child(1), .split5 .sdk-child:nth-child(2), .split5 .sdk-child:nth-child(3){margin-top:-3.48rem;}\n        .split5 .sdk-child:nth-child(4), .split5 .sdk-child:nth-child(5){margin-top:0.2rem;}\n        .split5 .sdk-child:nth-child(1){margin-left:-8.36rem;}\n        .split5 .sdk-child:nth-child(2){margin-left:-2.6rem;}\n        .split5 .sdk-child:nth-child(3){margin-left:3.16rem;}\n        .split5 .sdk-child:nth-child(4){margin-left:-5.48rem;}\n        .split5 .sdk-child:nth-child(5){margin-left:0.28rem;}\n        .split5 .sdk-child-iframe{width:5.2rem;height:2.88rem;}\n        .split5 .sdk-child-name{line-height:0.4rem;height:0.4rem;font-size:0.24rem;text-indent:0.02rem;}\n\n        .split6 .sdk-child:nth-child(1), .split6 .sdk-child:nth-child(2), .split6 .sdk-child:nth-child(3), .split6 .sdk-child:nth-child(4), .split6 .sdk-child:nth-child(5), .split6 .sdk-child:nth-child(6){display:block}\n        .split6 .sdk-child{width:5.2rem;height:3.28rem;left:50%;top:50%;}\n        .split6 .sdk-child:nth-child(1), .split6 .sdk-child:nth-child(2), .split6 .sdk-child:nth-child(3){margin-top:-3.48rem;}\n        .split6 .sdk-child:nth-child(4), .split6 .sdk-child:nth-child(5), .split6 .sdk-child:nth-child(6){margin-top:0.2rem;}\n        .split6 .sdk-child:nth-child(1), .split6 .sdk-child:nth-child(4){margin-left:-8.36rem;}\n        .split6 .sdk-child:nth-child(2), .split6 .sdk-child:nth-child(5){margin-left:-2.6rem;}\n        .split6 .sdk-child:nth-child(3), .split6 .sdk-child:nth-child(6){margin-left:3.16rem;}\n        .split6 .sdk-child-iframe{width:5.2rem;height:2.88rem;}\n        .split6 .sdk-child-name{line-height:0.4rem;height:0.4rem;font-size:0.24rem;text-indent:0.02rem;}\n    ")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=function(){function e(){this.reset()}return e.prototype.addPacket=function(e){this._packets.push(e)},e.prototype.getPacketByIndex=function(e){return e>=this._packets.length||e<0?null:this._packets[e]},e.prototype.getPacketsCount=function(){return this._packets.length},e.prototype.clear=function(){var e,t=0;for(e=this._packets.length,t=0;t<e;t++)n.default.Release(this._packets[t]);this._packets=[]},e.prototype.reset=function(){this._packets=[]},e}();t.default=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(111),s=r(15),a=r(10),c=r(3),l=r(0),u=r(4),p=r(1),d=r(26),h=function(e){function t(t){var r=e.call(this,t)||this;return r.initUI(),r}return i(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._components={},this._menuShowItems={},this._menuHideItems={},this._displayKeys={}},t.prototype.showUI=function(e){void 0===e&&(e=d.CONTROLL),this._menuContainer&&(this._displayKeys[e]=!0,this._menuContainer.style.display="block")},t.prototype.hideUI=function(e){void 0===e&&(e=d.CONTROLL),this._menuContainer&&(this._displayKeys[e]=!1,this.checkDisplayHide()?this._menuContainer.style.display="none":this._menuContainer.style.display="block")},t.prototype.displayUI=function(e){void 0===e&&(e=[]);var t,r=0,n=Object.keys(this._components);for(t=n.length,r=0;r<t;r++){var i=this._components[n[r]];-1!=e.indexOf(name)?i.show():i.hide()}},t.prototype.setOpacity=function(e){this._menuContainer.style.opacity=e},t.prototype.updateChangePageState=function(){l.sceneState.isFirstScene()?this._components.prev&&this._components.prev.hide():this._components.prev&&this._components.prev.show(),l.sceneState.isLastScene()?this._components.next&&this._components.next.hide():this._components.next&&this._components.next.show()},t.prototype.setVideoState=function(e){e?this._components.play&&this._components.play.show():this._components.play&&this._components.play.hide()},t.prototype.initUI=function(){this.initRem(),this.initStyle(),this.initMenuContaner(),this.initMenuData(),this.initMenuContent(u.MENU_TYPE.GAME),this.initResizeEvent()},t.prototype.initRem=function(){var e=window.innerWidth/window.innerHeight>1.83?window.innerHeight/10.8:window.innerWidth/19.2;document.getElementsByTagName("html")[0].style.fontSize=e+"px"},t.prototype.initResizeEvent=function(){var e=this;window.onresize=function(t){e.initRem()}},t.prototype.initStyle=function(){s.setDefaultStyle()},t.prototype.initMenuContaner=function(){this._menuContainer=document.createElement("div"),this._menuContainer.setAttribute("id","controllCenter"),document.body.appendChild(this._menuContainer)},t.prototype.initMenuData=function(){this._menuShowItems[u.MENU_TYPE.GAME]=["prev","next"],this._menuHideItems[u.MENU_TYPE.GAME]=[]},t.prototype.initMenuContent=function(e){if(Array.prototype.forEach.call(this._menuContainer.childNodes,(function(e){e.style.display="none"})),this._menuShowItems[e]&&this._menuHideItems[e]){for(var t=this._menuShowItems[e],r=this._menuHideItems[e],n=0,i=t;n<i.length;n++){var o=i[n],a=s.SDKControllerUIComponents[o];this._components[o]?this._components[o].show():"button"===a.type?this.createButton(this._menuContainer,a):"checkbox"===a.type&&this.createCheckbox(this._menuContainer,a)}for(var c=0,l=r;c<l.length;c++){o=l[c],a=s.SDKControllerUIComponents[o];this._components[o]?this._components[o].hide():"button"===a.type?this.createButton(this._menuContainer,a,!0):"checkbox"===a.type&&this.createCheckbox(this._menuContainer,a,!0)}this.initClickEvent()}else p.error("menuItem undefined...",e)},t.prototype.initClickEvent=function(){for(var e in this._components.prev&&(this._components.prev.onClick=this.onPrePageClick.bind(this)),this._components.next&&(this._components.next.onClick=this.onNextPageClick.bind(this)),this._components)this._components[e]&&(this._components[e].onMouseOver=this.onMouseOver.bind(this),this._components[e].onMouseOut=this.onMouseOut.bind(this))},t.prototype.onPrePageClick=function(){this._controller.dispatcherHandle("gamePrevScene",null,!0);var e={preSceneIndex:l.sceneState.curIndex-1};c.default.instance().recordTransceiver.send(a.LASTPAGE,e)},t.prototype.onNextPageClick=function(){this._controller.dispatcherHandle("gameNextScene",null,!0);var e={nextSceneIndex:l.sceneState.curIndex+1};c.default.instance().recordTransceiver.send(a.NEXTPAGE,e)},t.prototype.onMouseOver=function(){},t.prototype.onMouseOut=function(){},t.prototype.createButton=function(e,t,r){var n=new s.DOMButton(t,this);r&&n.hide(),this._components[t.name]=n,e.appendChild(n.domElem)},t.prototype.createCheckbox=function(e,t,r){var n=new s.DOMCheckbox(t,this);r&&n.hide(),this._components[t.name]=n,e.appendChild(n.domElem)},t.prototype.updateMouseState=function(){l.controllState.isInspection()&&c.default.instance().thirdInterface.showSystemMouse()},t.prototype.updateUIState=function(e){this.showUI(),"-1"!=e&&l.parameterVo.isTeacher()?l.parameterVo.userId!=e&&this.hideUI():"-1"!=e&&l.parameterVo.isOberverTeacher()?l.parameterVo.observerId!=e&&this.hideUI():"-1"!=e&&l.parameterVo.isReplayTeacher()&&l.parameterVo.replayId!=e&&this.hideUI()},t.prototype.checkDisplayShow=function(){for(var e in this._displayKeys)if(this._displayKeys.hasOwnProperty(e)&&!0===this._displayKeys[e])return!0;return!1},t.prototype.checkDisplayHide=function(){for(var e in this._displayKeys)if(this._displayKeys.hasOwnProperty(e)&&!1!==this._displayKeys[e])return!1;return!0},t}(o.default);t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=function(){function e(e){void 0===e&&(e=""),this.reset(),this._name=e,this.action=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this.action=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secene",{get:function(){return this._secene},set:function(e){this._secene=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sendId",{get:function(){return this._sendId},set:function(e){this._sendId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeTime",{get:function(){return this._relativeTime},set:function(e){this._relativeTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMainFrame",{get:function(){return this._isMainFrame},set:function(e){this._isMainFrame=e},enumerable:!0,configurable:!0}),e.prototype.addToUserId=function(e){this.toMobiles||(this.toMobiles=[]),-1===this.toMobiles.indexOf(e)&&this.toMobiles.push(e)},e.prototype.addNotSaveMobiles=function(e){this.notSaveMobile||(this.notSaveMobile=[]),-1===this.notSaveMobile.indexOf(e)&&this.notSaveMobile.push(e)},e.prototype.clearMobiles=function(){this.toMobiles=null},e.prototype.clearNotSaveMobiles=function(){this.notSaveMobile=null},e.prototype.clone=function(e){e.id=this.id,e.source=this.source,e.action=this._name,e.name=this._name,e.secene=this._secene,e.sendId=this._sendId,e.isMainFrame=this._isMainFrame,e.kjType=this.kjType,e._relativeTime=this._relativeTime,e.isOnline=this.isOnline,n.isEmpty(this.toMobiles)||(e.toMobiles=JSON.parse(JSON.stringify(this.toMobiles))),n.isEmpty(this.data)||(e.data=JSON.parse(JSON.stringify(this.data)))},e.prototype.reset=function(){this.id=0,this.source="",this.action="",this._name="",this._secene="",this._sendId="",this._relativeTime=0,this._isMainFrame=!1,this.data=null,this.toMobiles=null,this.notSaveMobile=null,this.kjType="zmg",this.isOnline=!0},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(6),o=function(){function e(){this._views=[],this.reset(),this.constructorViews()}return e.prototype.dispatcherCMD=function(e,t,r){void 0===r&&(r=!0),n.default.instance().transceiver.sendMsg(e,t,r)},e.prototype.update=function(e){},e.prototype.dispatcherHandle=function(e,t,r){var o;void 0===r&&(r=!0),(o=i.default.Acquire(e)).data=t,o.isMainFrame=r,n.default.instance().packetHandler.dispatcherCMD(o)},e.prototype.reset=function(){var e,t=0;for(e=this._views.length,t=0;t<e;t++)this._views[t].reset()},e.prototype.destroy=function(){var e,t=0;for(e=this._views.length,t=0;t<e;t++)this._views[t].destroy();this._views.length=0,this._views=null},e.prototype.constructorViews=function(){},e}();t.default=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){void 0===t&&(t="");var r=e.call(this,t)||this;return r.event_id=t,r}return i(t,e),t.prototype.name=function(){return this.event_id},t.prototype.reset=function(){e.prototype.reset.call(this),this.user_id="",this.app_id="",this.session_id="",this.event_time_start=0,this.event_id="",this.event_type=0,this.event_value=1,this.event_para={}},t}(r(21).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){void 0===e&&(e=""),this.reset()}return e.prototype.name=function(){return""},e.prototype.reset=function(){},e}();t.default=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){void 0===t&&(t="");var r=e.call(this,t)||this;return r.page_name=t,r}return i(t,e),t.prototype.name=function(){return this.page_name},t.prototype.reset=function(){e.prototype.reset.call(this),this.page_id="",this.page_name="",this.refer_page_id="",this.refer_page_name="",this.expand={},this.app_id="",this.platform="",this.device_id="",this.user_id="",this.tracker_tpye=3,this.channel_id="",this.session_id="",this.time_start=0,this.duration=0,this.content="",this.linkurl=""},t}(r(21).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(13),o=function(){function e(){this._qulity=.1,this._width=i.WIDTH,this._height=i.HEIGHT}return e.prototype.setSize=function(e,t){this._width=e,this._height=t},e.prototype.printScreen=function(e,t){void 0===t&&(t=.1),this._qulity=t;var r=n.default.instance().thirdInterface.videoElement();r&&!this.isVideoHidden(r)?this.screenshotVideo(r,e):this.screenshotWebGL(e)},e.prototype.screenshotWebGL=function(e){var t=this;if(n.default.instance().thirdInterface.isZMG1())var r=n.default.instance().thirdInterface.onGameAfterDraw((function(){var i=n.default.instance().thirdInterface.gameCanvasName(),o=document.getElementById(i);n.default.instance().thirdInterface.offGameAfterDraw(r,t),t.drawImage(o,e)}),this);else n.default.instance().thirdInterface.screenShot((function(t){e&&e(t)}))},e.prototype.screenshotVideo=function(e,t){this.drawImage(e,t)},e.prototype.drawImage=function(e,t){var r=this;if(0!=e.width&&0!=e.height){var n=document.createElement("canvas");n.width=this._width,n.height=this._height,n.getContext("2d").drawImage(e,0,0,n.width,n.height);var i=setTimeout((function(){var e=n.toDataURL("image/jpeg",r._qulity);t&&t(e),clearTimeout(i)}),100)}},e.prototype.getComputedStyle=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)},e.prototype.isVideoHidden=function(e){var t=this.getComputedStyle(e);return"hidden"===t.getPropertyValue("visibility")||"hidden"===t.getPropertyValue("display")},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(6),s=r(3),a=r(1),c=function(){function e(){}return e.save=function(t){var r=n.repairInfo;if(n.parameterVo.isRepairRecord)if(r.recordState!=i.TYPE_RECORD_STATE.PLAY){if(t.isMainFrame&&-1==e.FILTER_ACTION.indexOf(t.name)){var s=t.secene,c=n.sceneState.getSceneIndexByName(s);if(-1!=c){var l=o.default.Acquire(t.name);t.clone(l),r.addStoragePackets(c,l),a.info("录播缓存数据包",l,c)}}}else e.dispatcher(t.secene)},e.dispatcher=function(e){var t,r,i,c=n.repairInfo,l=n.sceneState.getSceneIndexByName(e);if(-1!=l&&(i=c.getStoragePacketsByIndex(l))){a.info("录播要补发的数据包",i,l);var u=0;for(u=i.getPacketsCount()-1;u>=0;u--){t=i.getPacketByIndex(u),r=o.default.Acquire(t.name),t.clone(r);break}c.releaseAllStoragePackets(),r&&(a.info("录播切场景补发关键帧",r.name),s.default.instance().transceiver.sendPacket(r))}},e.FILTER_ACTION=["gameChangeScene","gamePrevScene","gameNextScene"],e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=function(){function e(){this._lastStamp=0,this._duration=0,this._lastSendCount=0,this._gameConfig=i.gameConfig}return e.addSend=function(){e.SEND_COUNT+=1},e.addReceive=function(){e.RECEIVE_COUNT+=1},e.checkPacket=function(e){if(!i.parameterVo.isProduction()&&e.isMainFrame&&e.data){var t=JSON.stringify(e.data),r=i.gameConfig.maxPacketSize;if(r<t.length){var o="信令名称:"+e.name;o+=" ,包大小:"+t.length+"B",o+=" ,包最大容量:"+r+"B",n.alert("信令熔断",o)}}},e.prototype.start=function(){this._duration=0,this._step=0,this._stepCount=e.SEND_COUNT,this._lastStamp=(new Date).getTime(),this._lastSendCount=e.SEND_COUNT},e.prototype.update=function(t){i.parameterVo.isProduction()||(this._duration+=t,1e3*this._duration>=1e3*this._step&&(this.checkStepkitckOut(),this._step++,this._stepCount=e.SEND_COUNT),1e3*this._duration>=1e3*this._gameConfig.delayTime&&(this.checkKickOut(),this._step=0,this._lastStamp=(new Date).getTime()-this._duration,this._duration=this._duration-this._gameConfig.delayTime,this._lastSendCount=e.SEND_COUNT))},e.prototype.checkKickOut=function(){var t=!1,r=e.SEND_COUNT-this._lastSendCount;if(r>=this._gameConfig.maxPacket){var i="5s内最大信令发送量:"+this._gameConfig.maxPacket;i+=" ,5s内信令发送量:"+r,i+=" ,熔断计时时间戳:"+this._lastStamp,n.alert("信令熔断",i),t=!0}return t},e.prototype.checkStepkitckOut=function(){var t=!1,r=e.SEND_COUNT-this._stepCount;if(r>=this._gameConfig.maxSecPacket){var i="1s内最大信令发送量:"+this._gameConfig.maxSecPacket;i+=" ,1s内信令发送量:"+r,i+=" ,熔断计时时间戳:"+this._lastStamp+1e3*this._step,n.alert("信令熔断",i),t=!0}return t},e.SEND_COUNT=0,e.RECEIVE_COUNT=0,e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTROLL="controll",t.REPAIR_RECORD="repairRecord"},function(e,t,r){"use strict";var n=r(0),i=r(18),o=r(3),s=r(6),a=r(126),c=r(4),l=r(1),u=r(2),p=r(5),d=window.location.search,h=new(function(){function e(){}return e.prototype.SDKInit=function(){this.parseUrl(d),l.init(),o.default.instance().init(),p.registCommands(),l.info("SDK init")},e.prototype.gameReady=function(){l.info("SDK ready"),o.default.instance().gameReady(),a.init(),this.isSplitScreen()?this.sendMsg(p.SPLIT_GAME_READY,this.userId(),!1):this.isPost()&&this.sendMsg(p.GAEM_READY,null,!1),o.default.instance().packetHandler.notifyCMD(p.GET_GAME_CONFIG)},e.prototype.parseUrl=function(e){return!n.parameterVo.isInit&&n.parameterVo.parseUrl(e)},e.prototype.lessonId=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.lessonId},e.prototype.gameId=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.gameId},e.prototype.controllerId=function(){return n.controllState.controllerId},e.prototype.userId=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.userId},e.prototype.oberverId=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.observerId},e.prototype.isSplitScreen=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isSplitScreen()},e.prototype.isGamePreview=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isGamePreview()},e.prototype.isGameClass=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isGameClass()},e.prototype.isObserverClass=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isGameObserver()},e.prototype.isGameReplay=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isGameReplay()},e.prototype.isTeacher=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isTeacher()},e.prototype.isStudent=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isStudent()},e.prototype.isOwn=function(){return n.controllState.isOwn()},e.prototype.isFullOwn=function(){return n.controllState.isFullOwn()},e.prototype.isObserver=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isObserver()},e.prototype.isSeller=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isSeller()},e.prototype.isOberverTeacher=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isOberverTeacher()},e.prototype.isOberverStudent=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isOberverStudent()},e.prototype.isObserverOwn=function(){return n.controllState.isObserverOwn()},e.prototype.isOberverFullOwn=function(){return n.controllState.isOberverFullOwn()},e.prototype.isReplayStudent=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isReplayStudent()},e.prototype.isReplayTeacher=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isReplayTeacher()},e.prototype.isReplayOwn=function(){return n.controllState.isReplayOwn()},e.prototype.isReplayFullOwn=function(){return n.controllState.isReplayFullOwn()},e.prototype.isPc=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isPc()},e.prototype.isIpad=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isIpad()},e.prototype.isApad=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isApad()},e.prototype.isJsb=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isJsb()},e.prototype.isPost=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isPost()},e.prototype.isLocal=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isLocal},e.prototype.isMix=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isMix},e.prototype.isGameTrain=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isGameTrain()},e.prototype.isRepair=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isRepair},e.prototype.isRepairPlay=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isRepairPlay},e.prototype.isRepairRecord=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isRepairRecord},e.prototype.isLocalVideo=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.localVideo},e.prototype.gameRoot=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.gameRoot},e.prototype.gameOrigin=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.gameOrigin},e.prototype.sendMsg=function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=!0),o.default.instance().transceiver.sendMsg(e,t,r,n)},e.prototype.sendLog=function(e,t,r,n){void 0===t&&(t={}),void 0===r&&(r=0),void 0===n&&(n=1),o.default.instance().recordTransceiver.send(e,t,r,n)},e.prototype.sendPageLog=function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r={}),void 0===n&&(n=3),o.default.instance().recordTransceiver.sendPage(e,t,r,n)},e.prototype.log=function(e,t){void 0===t&&(t={}),o.default.instance().logTransceiver.send(e,t)},e.prototype.handlePacket=function(e){o.default.instance().packetHandler.dispatcherCMD(e)},e.prototype.handleMessage=function(e,t){var r;void 0===t&&(t=null),(r=s.default.Acquire(e)).data=t,o.default.instance().packetHandler.dispatcherCMD(r)},e.prototype.registerHandler=function(e,t){o.default.instance().transceiver.packetHandler.registerHandler(e,t)},e.prototype.unRegisterHandler=function(e){o.default.instance().transceiver.packetHandler.unRegisterHandler(e)},e.prototype.initView=function(){o.default.instance().initView()},e.prototype.update=function(e){o.default.instance().update(e)},e.prototype.isStepBtnShow=function(){return(!this.isRepairRecord()||n.repairInfo.recordType==c.TYPE_RECORD.GAME)&&(!this.isRepairPlay()||!this.isOwn())},e.prototype.isBtnShow=function(){return!!(this.isGamePreview()||this.isOwn()||this.isObserverOwn()||this.isReplayOwn())},e.prototype.isBtnTeacherShow=function(){return!!(this.isGamePreview()||this.isOwn()&&this.isTeacher()||this.isObserverOwn()&&this.isOberverTeacher()||this.isReplayOwn()&&this.isReplayTeacher())},e.prototype.isBtnFullShow=function(){return!!(this.isGamePreview()||this.isFullOwn()||this.isOberverFullOwn()||this.isReplayFullOwn())},e.prototype.isBtnTeacherFullShow=function(){return!!(this.isGamePreview()||this.isFullOwn()&&this.isTeacher()||this.isOberverFullOwn()&&this.isOberverTeacher()||this.isReplayFullOwn()&&this.isReplayTeacher())},e.prototype.isLocalPlay=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.isMix},e.prototype.isLocalMusic=function(){return!!this.isLocalPlay()},e.prototype.isPcMix=function(){var e=!1;return!(!this.isPc()||!this.isLocal()||this.isRepair())&&(!!window.ZMClientBridge&&((this.isTeacher()||this.isStudent())&&(e=!0),e))},e.prototype.sdkVersion=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.sdkVersion},e.prototype.gameVersion=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.gameVersion},e.prototype.coursewareId=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.coursewareId},e.prototype.versionCode=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.versionCode},e.prototype.courseWareLevel=function(){return n.parameterVo.isInit||this.parseUrl(d),n.parameterVo.courseWareLevel},e.prototype.controllerLastMainPacket=function(){return n.userInfos.controllerLastMainPacket()},e}()),f={SDKInit:function(){h.SDKInit()},gameReady:function(){h.gameReady()},lessonId:function(){return h.lessonId()},gameId:function(){return h.gameId()},controllerId:function(){return h.controllerId()},userId:function(){return h.userId()},oberverId:function(){return h.oberverId()},isSplitScreen:function(){return h.isSplitScreen()},isGamePreview:function(){return h.isGamePreview()},isGameClass:function(){return h.isGameClass()},isObserverClass:function(){return h.isObserverClass()},isGameReplay:function(){return h.isGameReplay()},isTeacher:function(){return h.isTeacher()},isStudent:function(){return h.isStudent()},isOwn:function(){return h.isOwn()},isFullOwn:function(){return h.isFullOwn()},isObserver:function(){return h.isObserver()},isSeller:function(){return h.isSeller()},isOberverTeacher:function(){return h.isOberverTeacher()},isOberverStudent:function(){return h.isOberverStudent()},isObserverOwn:function(){return h.isObserverOwn()},isOberverFullOwn:function(){return h.isOberverFullOwn()},isReplayStudent:function(){return h.isReplayStudent()},isReplayTeacher:function(){return h.isReplayTeacher()},isReplayOwn:function(){return h.isReplayOwn()},isReplayFullOwn:function(){return h.isReplayFullOwn()},isPc:function(){return h.isPc()},isIpad:function(){return h.isIpad()},isApad:function(){return h.isApad()},isJsb:function(){return h.isJsb()},isLocal:function(){return h.isLocal()},isMix:function(){return h.isMix()},isGameTrain:function(){return h.isGameTrain()},isRepair:function(){return h.isRepair()},isRepairPlay:function(){return h.isRepairPlay()},isRepairRecord:function(){return h.isRepairRecord()},isLocalVideo:function(){return h.isLocalVideo()},gameRoot:function(){return h.gameRoot()},gameOrigin:function(){return h.gameOrigin()},sendMsg:function(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=!0),h.sendMsg(e,t,r,n)},sendLog:function(e,t,r,n){void 0===t&&(t={}),void 0===r&&(r=0),void 0===n&&(n=1),h.sendLog(e,t,r,n)},sendPageLog:function(e,t,r,n){void 0===t&&(t=0),void 0===r&&(r={}),void 0===n&&(n=3),h.sendPageLog(e,t,r,n)},log:function(e,t){void 0===t&&(t={}),h.log(e,t)},handlePacket:function(e){h.handlePacket(e)},handleMessage:function(e,t){void 0===t&&(t=null),h.handleMessage(e,t)},registerHandler:function(e,t){h.registerHandler(e,t)},unRegisterHandler:function(e){h.unRegisterHandler(e)},initView:function(){h.initView()},update:function(e){h.update(e)},isStepBtnShow:function(){return h.isStepBtnShow()},isBtnShow:function(){return h.isBtnShow()},isBtnTeacherShow:function(){return h.isBtnTeacherShow()},isBtnFullShow:function(){return h.isBtnFullShow()},isBtnTeacherFullShow:function(){return h.isBtnTeacherFullShow()},isShowNavigation:function(){return h.isBtnTeacherFullShow()&&!h.isRepair()},isLocalPlay:function(){return h.isLocalPlay()},isLocalMusic:function(){return h.isLocalMusic()},isPcMix:function(){return h.isPcMix()},sdkVersion:function(){return h.sdkVersion()},gameVersion:function(){return h.gameVersion()},coursewareId:function(){return h.coursewareId()},versionCode:function(){return h.versionCode()},courseWareLevel:function(){return h.courseWareLevel()},controllerLastMainPacket:function(){return h.controllerLastMainPacket()}};h.SDKInit(),window.ZMSDK=f,window.ZMSDK.SDKPacket=i.default,window.ZMSDK.SDKPacketPool=s.default,window.ZMSDK.SDKCommandBase=u.default,window.ZMSDK.DebugInfo=l;try{if(window.Raven)window.Raven.setTagsContext({SDKVersion:"1.6.3",SDKDashVersion:"1.1.8",SDKTrackVersion:"1.1.1",PublicVersion:"1.5.0"})}catch(e){console.log("Raven setTags fail.")}e.exports=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(13),o=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"lessonId",{get:function(){return this._lessonId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lessonUid",{get:function(){return this._lessonUid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return this._appId},set:function(e){this._appId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(e){this._sessionId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameId",{get:function(){return this._gameId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(e){this._userId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"user_id",{get:function(){return this._user_id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observerId",{get:function(){return this._observerId},set:function(e){this._observerId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"replayId",{get:function(){return this._replayId},set:function(e){this._replayId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"observerRole",{get:function(){return this._observerRole},set:function(e){this._observerRole=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"role",{get:function(){return this._role},set:function(e){this._role=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usage",{get:function(){return this._usage},set:function(e){this._usage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentUsage",{get:function(){return this._parentUsage},set:function(e){this._parentUsage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"replayMobiles",{get:function(){return this._replayMobiles},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"msgSendModle",{get:function(){return this._msgSendModle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enviroment",{get:function(){return this._enviroment},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocal",{get:function(){return this._isLocal},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMix",{get:function(){return this._isMix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOld",{get:function(){return this._isOld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInit",{get:function(){return this._isInit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"replayType",{get:function(){return this._replayType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameOrigin",{get:function(){return this._gameOrigin},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameRoot",{get:function(){return this._gameRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"localVideo",{get:function(){return this._localVideo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sdkVersion",{get:function(){return this._sdkVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gameVersion",{get:function(){return this._gameVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"assertPath",{get:function(){return this._assertPath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roomSessionId",{get:function(){return this._roomSessionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coursewareUuid",{get:function(){return this._coursewareUuid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coursewareId",{get:function(){return this._coursewareId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"versionCode",{get:function(){return this._versionCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"courseWareLevel",{get:function(){return this._courseWareLevel},enumerable:!0,configurable:!0}),e.prototype.parseUrl=function(e){this._isInit=!0,this._url=e;var t=this.getRequest(e);if(!t)return!1;if(t.usage)switch(t.usage){case"preview":this._usage=n.GAME_TYPE.PREVIEW;break;case"class":this._usage=n.GAME_TYPE.CLASS;break;case"replay":this._usage=n.GAME_TYPE.REPLAY;break;case"splitscreen":this._usage=n.GAME_TYPE.SPLITSCREEN}if(t.parentUsage)switch(t.parentUsage){case"preview":this._parentUsage=n.GAME_TYPE.PREVIEW;break;case"class":this._parentUsage=n.GAME_TYPE.CLASS;break;case"replay":this._parentUsage=n.GAME_TYPE.REPLAY}if(t.role&&(this._role=this.getRoleByValue(t.role)),t.kjType)switch(t.kjType){case"zml":this._courseWare=n.COURSEWARE_TEYPE.ZML;break;case"zmg":this._courseWare=n.COURSEWARE_TEYPE.ZMG}if(t.device)switch(t.device){case"pc":case"PC":this._device=n.TYPE_DEVICE.TYPE_PC;break;case"iPad":this._device=n.TYPE_DEVICE.TYPE_IPAD;break;case"aPad":this._device=n.TYPE_DEVICE.TYPE_APAD;break;case"IPhone":this._device=n.TYPE_DEVICE.TYPE_IPHONE;break;case"APhone":this._device=n.TYPE_DEVICE.TYPE_APHONE}if(t.gameId&&(isNaN(Number(t.gameId))||(this._gameId=Number(t.gameId))),t.lessonId&&(this._lessonId=t.lessonId),t.lessonUid&&(this._lessonUid=t.lessonUid),t.userMobile&&(this._userId=String(t.userMobile)),t.mobile&&(this._userId=String(t.mobile)),t.userId&&(this._user_id=String(t.userId)),t.replayMobiles&&(this._replayMobiles=t.replayMobiles.split(",")),this.isReplay()&&(this._role===n.USER_ROLE.TEACHER||this._replayMobiles.length>1?this._replayId=this._userId:this._role===n.USER_ROLE.STUDENT&&1===this._replayMobiles.length&&(this._replayId=this._replayMobiles[0])),t.msgSendModle)switch(t.msgSendModle){case"jsb":this._msgSendModle=n.TYPE_MSG.YTPE_JSB_MESSAGE;break;case"post":this._msgSendModle=n.TYPE_MSG.TYPE_POST_MESSAGE}if(t.isTrain&&(this._isTrain="true"===t.isTrain),t.replayType)switch(t.replayType){case"train":this._replayType=n.TYPE_REPLAY.TRAIN}if(t.local&&(this._isLocal="true"===t.local),t.isMix?(this._isOld=!1,isNaN(Number(t.isMix))||(this._isMix=1===Number(t.isMix))):this._isOld=!0,t.localVideo&&(this._localVideo="true"===t.localVideo),t.repair)switch(t.repair){case"record":this._repair=n.TYPE_REPAIR.RECORD;break;case"play":this._repair=n.TYPE_REPAIR.PLAY}if(t.appId&&(this._appId=t.appId),t.user_id&&(this._user_id=t.user_id),t.isDebug&&(this._isDebugInfo="true"==t.isDebug),t.sdkVersion&&(this._sdkVersion=t.sdkVersion),t.gameVersion&&(this._gameVersion=t.gameVersion),t.assertPath&&(this._assertPath=t.assertPath),t.coursewareId&&(this._coursewareId=t.coursewareId),t.versionCode&&(this._versionCode=t.versionCode),t.courseWareLevel&&(this._courseWareLevel=t.courseWareLevel),t.roomSessionId&&(this._roomSessionId=t.roomSessionId),t.coursewareUuid&&(this._coursewareUuid=t.coursewareUuid),t.enviroment)switch(t.enviroment){case"localhost":this._enviroment=n.TYPE_ENVIRONMENT.LOCALHOST;break;case"test":this._enviroment=n.TYPE_ENVIRONMENT.TEST;break;case"uat":this._enviroment=n.TYPE_ENVIRONMENT.UAT;break;case"production":this._enviroment=n.TYPE_ENVIRONMENT.PRODUCTION}if(t.env)switch(t.env){case"test":this._enviroment=n.TYPE_ENVIRONMENT.TEST;break;case"uat":this._enviroment=n.TYPE_ENVIRONMENT.UAT;break;case"prod":this._enviroment=n.TYPE_ENVIRONMENT.PRODUCTION}if(this._enviroment===n.TYPE_ENVIRONMENT.NONE)switch(window.location.hostname){case i.ENVIRONMENT_LOCAL:case i.ENVIRONMENT_LOCALIP:this._enviroment=n.TYPE_ENVIRONMENT.LOCALHOST;break;case i.ENVIRONMENT_TEST:this._enviroment=n.TYPE_ENVIRONMENT.TEST;break;case i.ENVIRONMENT_UAT:this._enviroment=n.TYPE_ENVIRONMENT.UAT;break;case i.ENVIRONMENT_PRODUCTION:this._enviroment=n.TYPE_ENVIRONMENT.PRODUCTION}return!0},e.prototype.isZML=function(){return this._courseWare===n.COURSEWARE_TEYPE.ZML},e.prototype.isZMG=function(){return this._courseWare===n.COURSEWARE_TEYPE.ZMG},e.prototype.isSplitScreen=function(){return this._usage===n.GAME_TYPE.SPLITSCREEN},e.prototype.isGamePreview=function(){return this._usage===n.GAME_TYPE.NORMAL||this._usage===n.GAME_TYPE.PREVIEW},e.prototype.isGameClass=function(){return this._usage===n.GAME_TYPE.CLASS},e.prototype.isGameObserver=function(){return this.isGameClass()&&(this._role===n.USER_ROLE.OBSERVER||this._role===n.USER_ROLE.SELLER)},e.prototype.isGameReplay=function(){return this._usage===n.GAME_TYPE.REPLAY},e.prototype.isGameTrain=function(){return this.isGameClass()&&this._isTrain},e.prototype.isTeacher=function(){return this.isGameClass()&&this._role===n.USER_ROLE.TEACHER},e.prototype.isStudent=function(){return this.isGameClass()&&this._role===n.USER_ROLE.STUDENT},e.prototype.isObserver=function(){return this.isGameObserver()&&this._role===n.USER_ROLE.OBSERVER},e.prototype.isSeller=function(){return this.isGameObserver()&&this._role===n.USER_ROLE.SELLER},e.prototype.isOberverTeacher=function(){return this.isGameObserver()&&this._observerRole===n.USER_ROLE.TEACHER},e.prototype.isOberverStudent=function(){return this.isGameObserver()&&this._observerRole===n.USER_ROLE.STUDENT},e.prototype.isReplayTeacher=function(){return this.isGameReplay()&&(this.role===n.USER_ROLE.TEACHER||this._replayMobiles.length>1)},e.prototype.isReplayStudent=function(){return this.isGameReplay()&&this.role===n.USER_ROLE.STUDENT&&1===this._replayMobiles.length},e.prototype.isReplay=function(){return this._usage===n.GAME_TYPE.REPLAY},e.prototype.isProduction=function(){return this._enviroment==n.TYPE_ENVIRONMENT.PRODUCTION},e.prototype.isTest=function(){return this._enviroment==n.TYPE_ENVIRONMENT.TEST},e.prototype.isUat=function(){return this._enviroment==n.TYPE_ENVIRONMENT.UAT},e.prototype.isJsb=function(){return this._msgSendModle===n.TYPE_MSG.YTPE_JSB_MESSAGE},e.prototype.isPost=function(){return this._msgSendModle===n.TYPE_MSG.TYPE_POST_MESSAGE},e.prototype.isPc=function(){return this._device===n.TYPE_DEVICE.TYPE_PC},e.prototype.isIpad=function(){return this._device===n.TYPE_DEVICE.TYPE_IPAD},e.prototype.isApad=function(){return this._device===n.TYPE_DEVICE.TYPE_APAD},e.prototype.isIphone=function(){return this._device===n.TYPE_DEVICE.TYPE_IPHONE},e.prototype.isAphone=function(){return this._device===n.TYPE_DEVICE.TYPE_APHONE},Object.defineProperty(e.prototype,"isRepairRecord",{get:function(){return this._repair==n.TYPE_REPAIR.RECORD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRepairPlay",{get:function(){return this._repair==n.TYPE_REPAIR.PLAY},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRepair",{get:function(){return this._repair!=n.TYPE_REPAIR.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDebugInfo",{get:function(){return this._isDebugInfo},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t;return(t=new e)._usage=this._usage,t._parentUsage=this._parentUsage,t._role=this._role,t._gameId=this._gameId,t._lessonId=this._lessonId,t._lessonUid=this._lessonUid,t._userId=this._userId,t._url=this._url,t._courseWare=this._courseWare,t._observerId=this._observerId,t._observerRole=this._observerRole,t._replayId=this._replayId,t._device=this._device,t._enviroment=this._enviroment,t._isLocal=this._isLocal,t._isMix=this._isMix,t._gameOrigin=this._gameOrigin,t._gameRoot=this._gameRoot,t._localVideo=this._localVideo,t._repair=this._repair,t._appId=this._appId,t._user_id=this._user_id,t._isDebugInfo=this._isDebugInfo,t._sdkVersion=this._sdkVersion,t._gameVersion=this._gameVersion,t._assertPath=this._assertPath,t._coursewareId=this._coursewareId,t._versionCode=this._versionCode,t._courseWareLevel=this._courseWareLevel,t._roomSessionId=this.roomSessionId,t._coursewareUuid=this._coursewareUuid,t},e.prototype.getUrl=function(){var e,t="";switch(t=-1!==(e=this._url.indexOf("?"))?this._url.substr(1,e):this._url,t+="?userMobile="+this._userId,this._usage){case n.GAME_TYPE.PREVIEW:t+="&usage=preview";break;case n.GAME_TYPE.CLASS:t+="&usage=class";break;case n.GAME_TYPE.REPLAY:t+="&usage=replay";break;case n.GAME_TYPE.SPLITSCREEN:t+="&usage=splitscreen"}switch(this._parentUsage){case n.GAME_TYPE.PREVIEW:t+="&parentUsage=preview";break;case n.GAME_TYPE.CLASS:t+="&parentUsage=class";break;case n.GAME_TYPE.REPLAY:t+="&parentUsage=replay"}switch(this._role){case n.USER_ROLE.STUDENT:t+="&role=student";break;case n.USER_ROLE.TEACHER:t+="&role=teacher";break;case n.USER_ROLE.OBSERVER:t+="&role=watcher";break;case n.USER_ROLE.SELLER:t+="&role=seller";break;case n.USER_ROLE.TRAINER:t+="&role=trainer"}switch(this._courseWare){case n.COURSEWARE_TEYPE.ZML:t+="&kjType=zml";break;case n.COURSEWARE_TEYPE.ZMG:t+="&kjType=zmg"}switch(this._device){case n.TYPE_DEVICE.TYPE_PC:t+="&device=PC";break;case n.TYPE_DEVICE.TYPE_IPAD:t+="&device=iPad";break;case n.TYPE_DEVICE.TYPE_APAD:t+="&device=aPad";break;case n.TYPE_DEVICE.TYPE_APHONE:t+="&device=APhone";break;case n.TYPE_DEVICE.TYPE_IPHONE:t+="&device=IPhone"}switch(this._repair){case n.TYPE_REPAIR.RECORD:t+="&repair=record";break;case n.TYPE_REPAIR.PLAY:t+="&repair=play"}switch(this._gameId>0&&(t+="&gameId="+this._gameId),""!==this._lessonId&&(t+="&lessonId="+this._lessonId),"0"!==this._lessonUid&&(t+="&lessonUid="+this._lessonUid),this._localVideo&&(t+="&localVideo=true"),"0"!==this._appId&&(t+="&appId="+this._appId),""!==this._user_id&&(t+="&user_id="+this._user_id),""!==this._sdkVersion&&(t+="&sdkVersion="+this._sdkVersion),""!==this._gameVersion&&(t+="&gameVersion="+this._gameVersion),""!==this._assertPath&&(t+="&assertPath="+this._assertPath),""!==this._coursewareId&&(t+="&coursewareId="+this._coursewareId),""!==this._versionCode&&(t+="&versionCode="+this._versionCode),this._isLocal&&(t+="&local="+this._isLocal),0!==this._courseWareLevel&&(t+="&courseWareLevel="+this._courseWareLevel),""!==this._roomSessionId&&(t+="&roomSessionId="+this._roomSessionId),""!==this._coursewareUuid&&(t+="&coursewareUuid="+this._coursewareUuid),this._enviroment){case n.TYPE_ENVIRONMENT.LOCALHOST:t+="&enviroment=localhost";break;case n.TYPE_ENVIRONMENT.TEST:t+="&enviroment=test";break;case n.TYPE_ENVIRONMENT.UAT:t+="&enviroment=uat";break;case n.TYPE_ENVIRONMENT.PRODUCTION:t+="&enviroment=production"}return t},e.prototype.getRoleByValue=function(e){var t;switch(e){case"student":t=n.USER_ROLE.STUDENT;break;case"teacher":t=n.USER_ROLE.TEACHER;break;case"watcher":t=n.USER_ROLE.OBSERVER;break;case"seller":t=n.USER_ROLE.SELLER;break;case"trainer":t=n.USER_ROLE.TRAINER}return t},e.prototype.reset=function(){this._isInit=!1,this._usage=n.GAME_TYPE.NORMAL,this._role=n.USER_ROLE.NONE,this._parentUsage=n.GAME_TYPE.NORMAL,this._courseWare=n.COURSEWARE_TEYPE.ZMG,this._observerRole=n.USER_ROLE.STUDENT,this._msgSendModle=n.TYPE_MSG.TYPE_POST_MESSAGE,this._enviroment=n.TYPE_ENVIRONMENT.NONE,this._replayType=n.TYPE_REPLAY.CLASS,this._repair=n.TYPE_REPAIR.NONE,this._gameId=0,this._lessonId="",this._lessonUid="0",this._userId="",this._user_id="",this._observerId="",this._url="",this._replayMobiles=[],this._sessionId="0",this._appId="0",this._isTrain=!1,this._isLocal=!1,this._isMix=!1,this._isOld=!1,this._gameOrigin="",this._gameRoot="",this._localVideo=!1,this._isDebugInfo=!0,this._sdkVersion="",this._gameVersion="",this._assertPath="",this._coursewareId="",this._versionCode="",this._courseWareLevel=0,this._roomSessionId="",this._coursewareUuid=""},e.prototype.getRequest=function(e){var t={};if(-1!==e.indexOf("?"))for(var r=e.substr(1).split("&"),n=0;n<r.length;n++)t[r[n].split("=")[0]]=unescape(r[n].split("=")[1]);return this._gameOrigin=window.location.href,-1!==this._gameOrigin.indexOf("?")&&(this._gameOrigin=window.location.href.substr(0,this._gameOrigin.indexOf("?"))),-1!==this._gameOrigin.lastIndexOf("/")&&(this._gameRoot=this._gameOrigin.substr(0,this._gameOrigin.lastIndexOf("/")+1)),t},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(0),o=r(6),s=function(){function e(){this._userIds=[],this._userInfos=[]}return e.prototype.getUserInfoById=function(e){var t;return-1!==(t=this._userIds.indexOf(e))?this._userInfos[t]:null},e.prototype.getUserInfoByIndex=function(e){return e<this._userInfos.length?this._userInfos[e]:null},e.prototype.isHasUserById=function(e){return-1!==this._userIds.indexOf(e)},e.prototype.addUserInfo=function(e){return!this.isHasUserById(e.userId)&&(this._userIds.push(e.userId),this._userInfos.push(e),!0)},e.prototype.removeUserById=function(e){var t;return!!this.isHasUserById(e)&&(t=this._userIds.indexOf(e),this._userInfos[t].clear(),this._userInfos.splice(t,1),this._userIds.splice(t,1),!0)},e.prototype.ClearUsersFlag=function(){var e,t=0;for(e=this._userInfos.length,t=0;t<e;t++)this._userInfos[t].isActive=!1},e.prototype.getCount=function(){return this._userIds.length},e.prototype.getTeacherId=function(){var e,t=0;for(e=this._userInfos.length,t=0;t<e;t++)if(this._userInfos[t].role===n.USER_ROLE.TEACHER)return this._userInfos[t].userId;return""},e.prototype.getStudentIds=function(){var e,t=0,r=[];for(e=this._userInfos.length,t=0;t<e;t++)this._userInfos[t].role===n.USER_ROLE.STUDENT&&r.push(this._userInfos[t].userId);return r},e.prototype.isAllHistoryRes=function(){var e,t=0;for(e=this._userInfos.length,t=0;t<e;t++)if(!this._userInfos[t].isHistoryRes)return!1;return!0},e.prototype.controllerLastMainPacket=function(){var e=this.getUserInfoById(i.controllState.controllerId),t=e&&e.getLastMainPacket(),r=t&&o.default.Acquire(t.action);return r&&t.clone(r),r},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),i=function(){function e(e){void 0===e&&(e=""),this.reset(),this._name=e,this.action=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this.action=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sendId",{get:function(){return this._sendId},set:function(e){this._sendId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMainFrame",{get:function(){return this._isMainFrame},set:function(e){this._isMainFrame=e},enumerable:!0,configurable:!0}),e.prototype.addToUserId=function(e){this.toMobiles||(this.toMobiles=[]),-1===this.toMobiles.indexOf(e)&&this.toMobiles.push(e)},e.prototype.clearMobiles=function(){this.toMobiles=null},e.prototype.clone=function(e){e.id=this.id,e.source=this.source,e.action=this._name,e.name=this._name,e.sendId=this._sendId,e.isMainFrame=this._isMainFrame,e.kjType=this.kjType,n.isEmpty(this.toMobiles)||(e.toMobiles=JSON.parse(JSON.stringify(this.toMobiles))),n.isEmpty(this.data)||(e.data=JSON.parse(JSON.stringify(this.data)))},e.prototype.reset=function(){this.id=0,this.source="",this.action="",this._name="",this._sendId="",this._isMainFrame=!1,this.data=null,this.kjType="zmg",this.toMobiles=null},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(0),o=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"controllerId",{get:function(){return this._controllerId},set:function(e){this._controllerId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"teachingMode",{get:function(){return this._teachingMode},set:function(e){this._teachingMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oldTeachingMode",{get:function(){return this._oldTeachingMode},set:function(e){this._oldTeachingMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSyncTeacher",{get:function(){return this._isSyncTeacher},set:function(e){this._isSyncTeacher=e},enumerable:!0,configurable:!0}),e.prototype.isTeaching=function(){return this._teachingMode==n.TEACHING_MODE.TYPE_TEACHING},e.prototype.isInspection=function(){return this._teachingMode==n.TEACHING_MODE.TYPE_INSPECTION},Object.defineProperty(e.prototype,"onStageState",{get:function(){return this._onStageState},set:function(e){this._onStageState=e},enumerable:!0,configurable:!0}),e.prototype.isOwn=function(){return!!i.parameterVo.isGameClass()&&(!(!i.parameterVo.isStudent()&&!i.parameterVo.isTeacher())&&(this._controllerId===i.parameterVo.userId||"-1"===this._controllerId))},e.prototype.isFullOwn=function(){return!!i.parameterVo.isGameClass()&&(!(!i.parameterVo.isStudent()&&!i.parameterVo.isTeacher())&&this._controllerId===i.parameterVo.userId)},e.prototype.isObserverOwn=function(){return!!i.parameterVo.isGameObserver()&&(this._controllerId===i.parameterVo.observerId||"-1"===this._controllerId)},e.prototype.isOberverFullOwn=function(){return!!i.parameterVo.isGameObserver()&&this._controllerId===i.parameterVo.observerId},e.prototype.isReplayOwn=function(){return!!i.parameterVo.isGameReplay()&&(this._controllerId===i.parameterVo.replayId||"-1"===this._controllerId)},e.prototype.isReplayFullOwn=function(){return!!i.parameterVo.isGameReplay()&&this._controllerId===i.parameterVo.replayId},Object.defineProperty(e.prototype,"splitPage",{get:function(){return this._splitPage},set:function(e){this._splitPage=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSplitFull",{get:function(){return this._isSplitFull},set:function(e){this._isSplitFull=e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._controllerId="",this._isSyncTeacher=!0,this._onStageState=null,this._isSplitFull=!1,this._splitPage=0,this._teachingMode=n.TEACHING_MODE.TYPE_TEACHING,this._oldTeachingMode=n.TEACHING_MODE.TYPE_TEACHING},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),i=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"isParse",{get:function(){return this._isParse},set:function(e){this._isParse=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"historyMsgs",{get:function(){return this._historyMsgs},set:function(e){this._historyMsgs=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userMsgs",{get:function(){return this._userMsgs},set:function(e){this._userMsgs=e},enumerable:!0,configurable:!0}),e.prototype.addPacket=function(e,t){-1===this._userIds.indexOf(e)&&(this._userIds.push(e),this._packets.push(new n.default));var r=this._userIds.indexOf(e);this._packets[r].addPacket(t)},e.prototype.getPacketByIndex=function(e,t){if(-1===this._userIds.indexOf(e))return null;var r=this._userIds.indexOf(e);return this._packets[r].getPacketByIndex(t)},e.prototype.getLastPacket=function(e){if(-1===this._userIds.indexOf(e))return null;var t=this._userIds.indexOf(e),r=this._packets[t];return 0===r.getPacketsCount()?null:r.getPacketByIndex(r.getPacketsCount()-1)},e.prototype.getPacketsCount=function(e){if(-1===this._userIds.indexOf(e))return 0;var t=this._userIds.indexOf(e);return this._packets[t].getPacketsCount()},e.prototype.clear=function(){var e,t=0;for(e=this._packets.length,t=0;t<e;t++)this._packets[t].clear();this._packets=[],this._userIds=[],this._userMsgs={},this._historyMsgs=null},e.prototype.reset=function(){this._historyMsgs=null,this._packets=[],this._userIds=[],this._userMsgs={},this._isParse=!1},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curIndex",{get:function(){return this._curIndex},set:function(e){this._curIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secnes",{set:function(e){this._secnes=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"answers",{set:function(e){this._answers=e},enumerable:!0,configurable:!0}),e.prototype.getCount=function(){return this._secnes.length},e.prototype.isLastScene=function(){return this._curIndex===this._secnes.length-1||0===this._secnes.length},e.prototype.isFirstScene=function(){return 0===this._curIndex},e.prototype.curSceneName=function(){return this._curIndex<this._secnes.length?this._secnes[this._curIndex]:""},e.prototype.getSceneNameByIndex=function(e){return e<this._secnes.length?this._secnes[e]:""},e.prototype.getSceneIndexByName=function(e){return this._secnes.indexOf(e)},e.prototype.getAnswerByIndex=function(e){var t,r=0,n=this.getSceneNameByIndex(e);if(""==n)return null;for(t=this._answers.length,r=0;r<t;r++){var i=this._answers[r];if(i.scene==n)return i.answerList}return[]},e.prototype.getAnswerById=function(e){var t,r,n=0;for(r=(t=this.getAnswerByIndex(this.curIndex)).length,n=0;n<r;n++){var i=t[n];if(i.answerId==e)return i}return null},e.prototype.reset=function(){this._curIndex=0,this._secnes=[],this._answers=[],this._state=n.TYPE_SCENE.TYPE_LOADING},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"lessonId",{get:function(){return this._lessonId},set:function(e){this._lessonId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(e){this._startTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return this._endTime},set:function(e){this._endTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"courseName",{get:function(){return this._courseName},set:function(e){this._courseName=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lessonUID",{get:function(){return"0"===this._lessonUID||""===this._lessonUID?n.parameterVo.lessonUid:this._lessonUID},set:function(e){this._lessonUID=e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._lessonId="0",this._lessonUID="0",this._courseName="0",this._startTime=0,this._endTime=0},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),i=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},set:function(e){this._duration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this._total},set:function(e){this._total=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlay",{get:function(){return this._isPlay},set:function(e){this._isPlay=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(e){this._startTime=e},enumerable:!0,configurable:!0}),e.prototype.curTime=function(){return this._startTime+this._duration},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(e){this._speed=e},enumerable:!0,configurable:!0}),e.prototype.addPacket=function(e,t){this._packets[e+"_"+t.id]||(this._packets[e+"_"+t.id]=new n.default),this._packets[e+"_"+t.id].addPacket(t)},e.prototype.getReplayStartIndex=function(e,t,r){var n,i,o;if(!this._packets[t+"_"+e])return-1;o=0;var s,a=0;for(s=(i=this._packets[t+"_"+e]).getPacketsCount(),a=0;a<s;a++)if((n=i.getPacketByIndex(a)).isMainFrame&&n.relativeTime<=r)o=a;else if(n.relativeTime>r)break;return o},e.prototype.getReplayPacketByIndex=function(e,t,r){return this._packets[t+"_"+e]?this._packets[t+"_"+e].getPacketByIndex(r):null},e.prototype.getPacketsCount=function(e,t){return this._packets[e+"_"+t]?this._packets[e+"_"+t].getPacketsCount():0},e.prototype.clear=function(){this._packets={}},e.prototype.reset=function(){this._total=0,this._duration=0,this._isPlay=!1,this._startTime=0,this._packets={},this._speed=1},e}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.reset()}return e.prototype.reset=function(){this.splitPageNumber=4,this.kickout=!0,this.delayTime=5,this.maxPacket=200,this.maxSecPacket=50,this.maxPacketSize=500},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),i=r(16),o=r(6),s=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"sceneIndex",{get:function(){return this._sceneIndex},set:function(e){this._sceneIndex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordType",{get:function(){return this._recordType},set:function(e){this._recordType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordState",{get:function(){return this._recordState},set:function(e){this._recordState=e},enumerable:!0,configurable:!0}),e.prototype.isRecordPalying=function(){return this._recordState==n.TYPE_RECORD_STATE.PLAY},Object.defineProperty(e.prototype,"recordAnswerTime",{get:function(){return this._recordAnswerTime},set:function(e){this._recordAnswerTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGuideAnswer",{get:function(){return this._isGuideAnswer},set:function(e){this._isGuideAnswer=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},set:function(e){this._duration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlay",{get:function(){return this._isPlay},set:function(e){this._isPlay=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},set:function(e){this._startTime=e},enumerable:!0,configurable:!0}),e.prototype.curTime=function(){return this._startTime+this._duration},Object.defineProperty(e.prototype,"totalTime",{get:function(){return this._totalTime},set:function(e){this._totalTime=e},enumerable:!0,configurable:!0}),e.prototype.addPacket=function(e,t){this._packets[e]||(this._packets[e]=new i.default),this._packets[e].addPacket(t)},e.prototype.getReplayStartIndex=function(e){var t,r,n=this._packets[this.getkey()];r=0;var i,o=0;for(i=n?n.getPacketsCount():0,o=0;o<i;o++)if((t=n.getPacketByIndex(o)).isMainFrame&&t.relativeTime<=e)r=o;else if(t.relativeTime>e)break;return r},e.prototype.getLastMainPacket=function(){var e,t=this._packets[this.getkey()],r=0;for(r=(t?t.getPacketsCount():0)-1;r>=0;r--)if((e=t.getPacketByIndex(r)).isMainFrame)return e;return null},e.prototype.getPacketMaxTime=function(){if(0==this.getPacketsCount())return 0;var e=this.getPacketByIndex(this.getPacketsCount()-1);return e?e.relativeTime:0},e.prototype.getPacketByIndex=function(e){var t=this._packets[this.getkey()];return t?t.getPacketByIndex(e):null},e.prototype.getPacketsCount=function(){var e=this._packets[this.getkey()];return e?e.getPacketsCount():0},e.prototype.getRepairUrlInfo=function(e){var t,r=0;for(t=this._repairUrlInfos.length,r=0;r<t;r++){if(this._repairUrlInfos[r].sceneIndex==e)return this._repairUrlInfos[r]}return null},e.prototype.addRepairUrlInfo=function(e){this._repairUrlInfos.push(e)},e.prototype.getRepairUrlInfoCount=function(){return this._repairUrlInfos.length},e.prototype.clearRepairUrlInfos=function(){this._repairUrlInfos=[]},Object.defineProperty(e.prototype,"answerId",{get:function(){return this._answerId},set:function(e){this._answerId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playType",{get:function(){return this._playType},set:function(e){this._playType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"URLConfig",{get:function(){return this._URLConfig},set:function(e){this._URLConfig=e},enumerable:!0,configurable:!0}),e.prototype.isUnload=function(){return this._dataState==n.TYPE_REPAIR_DATA.UNLOAD},e.prototype.isLoading=function(){return this._dataState==n.TYPE_REPAIR_DATA.LOADING},e.prototype.isLoaded=function(){return this._dataState==n.TYPE_REPAIR_DATA.LOADED},Object.defineProperty(e.prototype,"dataState",{get:function(){return this._dataState},set:function(e){this._dataState=e},enumerable:!0,configurable:!0}),e.prototype.getkey=function(){return this._playType==n.TYPE_REPAIR_PLAY.GAME?this._sceneIndex.toString():this._sceneIndex+"_"+this._answerId},e.prototype.clearPacket=function(){for(var e in this._packets)this._packets.hasOwnProperty(e)&&this._packets[e].clear();this._packets={}},Object.defineProperty(e.prototype,"isControllerChange",{get:function(){return this._isControllerChange},set:function(e){this._isControllerChange=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recordPacket",{get:function(){return this._recordPacket},set:function(e){this._recordPacket=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNeedResume",{get:function(){return this._isNeedResume},set:function(e){this._isNeedResume=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resumeSceneState",{get:function(){return this._resumeSceneState},set:function(e){this._resumeSceneState=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isJumping",{get:function(){return this._isJumping},set:function(e){this._isJumping=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetScene",{get:function(){return this._targetScene},set:function(e){this._targetScene=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetType",{get:function(){return this._targetType},set:function(e){this._targetType=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reRecordingPasket",{get:function(){return this._reRecordingPasket},set:function(e){this._reRecordingPasket=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastSceneIndex",{get:function(){return this._lastSceneIndex},set:function(e){this._lastSceneIndex=e},enumerable:!0,configurable:!0}),e.prototype.addStoragePackets=function(e,t){var r=e.toString();this._storagePackets[r]||(this._storagePackets[r]=new i.default),this._storagePackets[r].addPacket(t)},e.prototype.getStoragePacketsByIndex=function(e){var t=e.toString();return this._storagePackets[t]},e.prototype.releaseStoragePackets=function(e){var t=e.toString(),r=this._storagePackets[t];r&&(r.clear(),this._storagePackets[t]=null,delete this._storagePackets[t])},e.prototype.releaseAllStoragePackets=function(){for(var e in this._storagePackets)this._storagePackets.hasOwnProperty(e)&&this.releaseStoragePackets(parseInt(e))},e.prototype.clearRecordPacket=function(){this._recordPacket&&o.default.Release(this._recordPacket),this._recordPacket=null},e.prototype.clearResumeRecordPacket=function(){this._resumeSceneState&&(this._resumeSceneState.recordPacket&&o.default.Release(this._resumeSceneState.recordPacket),this._resumeSceneState.recordPacket=null)},e.prototype.clearReRecordingPasket=function(){this._reRecordingPasket&&o.default.Release(this._reRecordingPasket),this._reRecordingPasket=null},e.prototype.reset=function(){this._sceneIndex=0,this._recordAnswerTime=0,this._isGuideAnswer=!1,this._duration=0,this._isPlay=!1,this._startTime=0,this._packets={},this._repairUrlInfos=[],this._answerId="-1",this._URLConfig=null,this._isControllerChange=!1,this._storagePackets={},this._lastSceneIndex=0,this._isNeedResume=!1,this._resumeSceneState={},this._isJumping=!1,this._targetScene=0,this._targetType=n.TYPE_RECORD.GAME,this._playType=n.TYPE_REPAIR_PLAY.GAME,this._dataState=n.TYPE_REPAIR_DATA.UNLOAD,this._recordType=n.TYPE_RECORD.GAME,this._recordState=n.TYPE_RECORD_STATE.PAUSE,this.clearRecordPacket(),this.clearResumeRecordPacket(),this.clearReRecordingPasket()},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"appVersion",{get:function(){return this._appVersion},set:function(e){this._appVersion=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(e){this._deviceId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coursewareId",{get:function(){return this._coursewareId},set:function(e){this._coursewareId=e},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._appVersion="0",this._deviceId="0",this._coursewareId="0"},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(5),o=r(0),s=r(4),a=r(1),c=r(25),l=r(106),u=r(107),p=r(108),d=r(24),h=function(){function e(){this.reset()}return Object.defineProperty(e.prototype,"packetHandler",{get:function(){return this._packetHandler},set:function(e){this._packetHandler=e},enumerable:!0,configurable:!0}),e.prototype.gameReady=function(){this.addMessageEvent()},e.prototype.messageToPacket=function(e){var t;return t=n.default.Acquire(e.action),u.default.messageToPacket(t,e),t},e.prototype.jsbReceiveMsg=function(t){var r;(r=this.messageToPacket(t)).sendId!==o.parameterVo.userId&&""!==o.parameterVo.userId&&a.info("<<<接收消息JSB:"+t.action,t),r.name===i.STOP_ZMG&&void 0!==t.flag&&(r.data=t.flag),e.RECEIVE_COUNT++,this._packetHandler&&this._packetHandler.recevieMsg(r)},e.prototype.sendPacket=function(t,r){void 0===r&&(r=window.parent&&window.parent.window),this.checkSendPacket(t)?(this.appendParamsToPacket(t),-1==i.EVENTS_TO_LOCAL_CLIENT.indexOf(t.action)?o.parameterVo.isGamePreview()?this._packetHandler&&this._packetHandler.dispatcherCMD(t):p.default.isCanSend(t)&&(o.parameterVo.isZMG()&&(l.default.appendMobilesToPacket(t),l.default.messageToAll(t)),this._sendPacket(t,r),e.SEND_COUNT++,c.default.addSend(),c.default.checkPacket(t),a.info(">>>发送消息:"+t.name,t),d.default.save(t),this._packetHandler&&this._packetHandler.sendToReceive(t)):this._sendPacket(t,r)):a.error("send packet is error:",t)},e.prototype._sendPacket=function(e,t){void 0===t&&(t=window.parent&&window.parent.window),o.parameterVo.isJsb()?window.WebViewJavascriptBridge&&(-1!=i.EVENT_TO_CLIENT.indexOf(e.action)?window.WebViewJavascriptBridge.callHandler("ZMGClientOnly",JSON.stringify(e)):window.WebViewJavascriptBridge.callHandler("jsbMessage",JSON.stringify(e))):o.parameterVo.isPost()&&(-1!=i.EVENT_TO_CLIENT.indexOf(e.action)?window.ZMClientBridge&&window.ZMClientBridge.ZMGClientOnly&&window.ZMClientBridge.ZMGClientOnly(e):t.postMessage(e,"*"))},e.prototype.sendMsg=function(e,t,r,o){if(void 0===t&&(t=null),void 0===r&&(r=!0),!e||""!==e)if(e!=i.GAME_SYNC_MOUSE){var s=n.default.Acquire(e);s.data=t,s.isMainFrame=r,o?this.sendPacket(s,o):this.sendPacket(s)}else this.syncMouse(e,t)},e.prototype.reset=function(){e.ORDER_ID=1,e.SEND_COUNT=0,e.RECEIVE_COUNT=0},e.prototype.destroy=function(){this._packetHandler=null,this.removeMessageEvent()},e.prototype.addMessageEvent=function(){o.parameterVo.msgSendModle===s.TYPE_MSG.TYPE_POST_MESSAGE&&window.addEventListener("message",this.receiveMsg.bind(this),!1)},e.prototype.removeMessageEvent=function(){window.removeEventListener("message",this.receiveMsg.bind(this),!1)},e.prototype.checkSendPacket=function(e){return void 0!==e&&""!==e.name},e.prototype.appendParamsToPacket=function(e){u.default.appendParamsToPacket(e)},e.prototype.syncMouse=function(e,t,r){void 0===t&&(t=null),void 0===r&&(r=window.parent&&window.parent.window);var i=n.default.AcquireMousePacket(e);i.source="game",i.data=t,i.isMainFrame=!1,i.id=o.parameterVo.gameId,i.sendId=o.parameterVo.userId,o.controllState.isFullOwn()?l.default.messageToAll(i):o.controllState.isOwn()&&i.addToUserId(o.parameterVo.userId),o.parameterVo.isZML()?i.kjType="zml":o.parameterVo.isZMG()&&(i.kjType="zmg"),o.parameterVo.isJsb()?window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge.callHandler("jsbMessage",JSON.stringify(i)):o.parameterVo.isPost()&&r.postMessage(i,"*"),n.default.ReleaseMousePacket(i)},e.prototype.receiveMsg=function(t){var r;(r=this.messageToPacket(t.data)).sendId!=o.parameterVo.userId&&""!=o.parameterVo.userId&&r.name!=i.GAME_SYNC_MOUSE&&a.info("<<<接收消息:"+t.data.action,t.data),r.name===i.STOP_ZMG&&null!=t.data.flag&&(r.data=t.data.flag),e.RECEIVE_COUNT++,this._packetHandler&&this._packetHandler.recevieMsg(r)},e.ORDER_ID=1,e.SEND_COUNT=0,e.RECEIVE_COUNT=0,e}();t.default=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(3),a=r(1),c=r(9),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),c.isEmpty(s.default.instance().thirdInterface.getScene())||(a.info("SDKStopZmgCMD......",t),t?(s.default.instance().packetHandler.notifyCMD("gameReplayPlay",2),s.default.instance().thirdInterface.pause()):(s.default.instance().thirdInterface.resume(),s.default.instance().packetHandler.notifyCMD("gameReplayPlay",1)),this.recylePacket())},t}(o.default);t.default=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(12),c=r(6),l=r(5),u=r(3),p=r(7),d=r(8),h=r(1),f=r(11),_=r(14),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),!s.parameterVo.isGameReplay()){if(this.sendLog(t),s.parameterVo.userId=t.mobile,s.parameterVo.isTeacher()&&""===s.controllState.controllerId){s.controllState.controllerId=s.parameterVo.userId;var r=void 0;(r=p.default.instance().getController(d.WEB_DASHBORAD))&&r.setController(s.controllState.controllerId)}var n,i;if((n=new a.default).userId=String(t.mobile),n.name=t.name,n.avatar=t.avatar,n.watchMobile=t.watchMobile,n.role=s.parameterVo.role,s.setMainInfo(n),(s.parameterVo.isTeacher()||s.parameterVo.isStudent())&&s.userInfos.addUserInfo(n),s.parameterVo.observerId=n.watchMobile,(i=s.userInfos.getUserInfoById(n.watchMobile))&&(s.parameterVo.observerRole=i.role),h.info("SDKUserInfoCMD:______",n.name,n.userId),this.recylePacket(),s.parameterVo.isZML()){var o=c.default.Acquire(l.GAME_PARSE_HISTORY);u.default.instance().packetHandler.dispatcherCMD(o)}else if(s.parameterVo.isStudent())s.parameterVo.isRepairPlay||u.default.instance().transceiver.sendMsg(l.GET_GAME_HISTORY,s.parameterVo.userId,!1);else if(s.parameterVo.isGameObserver()){o=c.default.Acquire(l.WATCH_HISTORY_REQUEST);u.default.instance().packetHandler.dispatcherCMD(o)}}},t.prototype.sendLog=function(e){var t={};t.name=e.name,t.mobile=_.formateMobile(e.mobile),t.userId=e.userId||"0",t.watchMobile=_.formateMobile(e.watchMobile),u.default.instance().newRecordTransceiver.send(f.INIT_SET_USER_INFO,t)},t}(o.default);t.default=y},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r;e.prototype.execute.call(this,t),c.info("SDKDispatcherToSubIframeCMD:发送者id",this._packet.sendId),(r=s.default.instance().getController(a.WEB_DASHBORAD))&&r.dispatcherSubIframe(this._packet),this.recylePacket()},t}(o.default);t.default=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(3),a=r(0),c=r(4),l=r(1),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),l.info("SDKGameStopCMD......"),(a.parameterVo.isGameReplay()||a.parameterVo.isRepairPlay||a.parameterVo.parentUsage==c.GAME_TYPE.REPLAY)&&s.default.instance().packetHandler.notifyCMD("gameReplayPlay",2),s.default.instance().thirdInterface.pause(),this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(3),a=r(0),c=r(4),l=r(1),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),l.info("SDKGameResumeCMD......"),s.default.instance().thirdInterface.resume(),(a.parameterVo.isGameReplay()||a.parameterVo.isRepairPlay||a.parameterVo.parentUsage==c.GAME_TYPE.REPLAY)&&s.default.instance().packetHandler.notifyCMD("gameReplayPlay",1),this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(6),c=r(3),l=r(7),u=r(8),p=r(1),d=r(23),h=r(5),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),p.info("SDKControllerChangeCMD..........",t),this.printScreen(t),this.update(t),this.recylePacket()},t.prototype.printScreen=function(e){!s.parameterVo.isGameClass()||s.parameterVo.isRepair||s.parameterVo.isGameTrain()||s.parameterVo.isStudent()&&"-1"===s.controllState.controllerId&&""!==e&&e===s.userInfos.getTeacherId()&&(new d.default).printScreen((function(e){var t={lessonUid:s.lessonInfo.lessonUID,coursewareId:s.parameterVo.gameId,coursewareVersion:"",pageId:s.sceneState.curIndex,coursewareType:1,imgData:e};c.default.instance().transceiver.sendMsg(h.SCREEN_SHOT_ANSWER_DATA,t,!1)}),.8)},t.prototype.update=function(e){var t,r=this;if(s.controllState.controllerId=e,s.parameterVo.isOberverTeacher()||s.parameterVo.isReplayTeacher()){var n=void 0;(n=l.default.instance().getController(u.WEB_DASHBORAD))&&n.setController(e)}t=a.default.Acquire(this._packet.name),this._packet.clone(t),t.name="gameControllerChange",c.default.instance().transceiver.packetHandler.dispatcherCMD(t),s.controllState.isSyncTeacher&&s.parameterVo.isTeacher()&&"-1"!==s.controllState.controllerId&&""!==s.controllState.controllerId&&s.controllState.controllerId===s.parameterVo.userId&&setTimeout((function(){r.syncToOther(s.parameterVo.userId)}),100),s.controllState.isSyncTeacher=!0},t.prototype.syncToOther=function(e){var t,r;if((t=s.userInfos.getUserInfoById(e))&&(r=t.getLastMainPacket()))if("gameChangeScene"!==r.name)this.checkChangeScene(r),c.default.instance().transceiver.sendPacket(r);else{var n=r.data;c.default.instance().transceiver.sendPacket(r),this.initScene(n)}},t.prototype.checkChangeScene=function(e){var t;t=a.default.Acquire(e.name),e.clone(t),t.name="gameChangeScene",t.sendId=s.parameterVo.userId,t.data=e.secene,c.default.instance().transceiver.sendPacket(t)},t.prototype.initScene=function(e){var t;(t=a.default.Acquire("gameSceneReset")).sendId=s.parameterVo.userId,t.isMainFrame=!1,t.data=e,c.default.instance().transceiver.sendPacket(t)},t}(o.default);t.default=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(12),c=r(3),l=r(5),u=r(6),p=r(7),d=r(8),h=r(4),f=r(1),_=r(11),y=r(14),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),!(s.parameterVo.isGameReplay()||s.parameterVo.isGameTrain()||s.parameterVo.isRepair)){f.info("SDKSetUsersInfoCMD.....",t),this.sendLog(t);var r,n,i,o,h=0,_=0,y=t.students;for(s.userInfos.ClearUsersFlag(),_=y.length,h=0;h<_;h++)"teacher"!==(r=y[h]).role&&"student"!==r.role||r.mobile&&(i=String(r.mobile),s.userInfos.isHasUserById(i)?n=s.userInfos.getUserInfoById(i):((n=new a.default).userId=i,n.name=r.name,n.avatar=r.avatar,n.role=s.parameterVo.getRoleByValue(r.role),s.userInfos.addUserInfo(n)),n.isActive=!0);if(s.parameterVo.isZMG()&&(s.parameterVo.isTeacher()||s.parameterVo.isOberverTeacher())&&this.syncTeacher(),""!==s.parameterVo.observerId&&(o=s.userInfos.getUserInfoById(s.parameterVo.observerId))&&(s.parameterVo.observerRole=o.role),this.recylePacket(),s.parameterVo.isGameClass()&&(s.parameterVo.isTeacher()||s.parameterVo.isOberverTeacher())){var m=void 0;(m=p.default.instance().getController(d.WEB_DASHBORAD))&&m.updateUsers()}if(s.parameterVo.isZML()){var E=u.default.Acquire(l.GAME_PARSE_HISTORY);c.default.instance().packetHandler.dispatcherCMD(E)}else if(s.parameterVo.isTeacher())for(_=s.userInfos.getCount(),h=0;h<_;h++)(n=s.userInfos.getUserInfoByIndex(h)).isActive&&!n.isHistoryReq&&(n.isHistoryReq=!0,c.default.instance().transceiver.sendMsg(l.GET_GAME_HISTORY,n.userId,!1));else if(s.parameterVo.isGameObserver()){E=u.default.Acquire(l.WATCH_HISTORY_REQUEST);c.default.instance().packetHandler.dispatcherCMD(E)}}},t.prototype.syncTeacher=function(){var e,t,r,n,i,o=0,a=0,c=0;if(r=s.userInfos.getUserInfoById(s.userInfos.getTeacherId()))for(e=s.userInfos.getCount(),o=0;o<e;o++)if((t=s.userInfos.getUserInfoByIndex(o)).isActive&&t.role===h.USER_ROLE.STUDENT&&0===t.historyCount)for(c=r.count(),a=0;a<c;a++)n=r.getPacketByIndex(a),i=u.default.Acquire(n.name),n.clone(i),t.addPacket(i),t.historyCount=t.historyCount+1},t.prototype.sendLog=function(e){var t,r,n=0,i={},o=[];i.users=o;var s=e.students;for(t=s.length,n=0;n<t;n++)if("teacher"===(r=s[n]).role||"student"===r.role){var a={};a.mobile=y.formateMobile(r.mobile),a.userId=r.userId||"0",a.name=r.name,a.role=r.role,o.push(a)}c.default.instance().newRecordTransceiver.send(_.INIT_SET_USERS_INFO,i)},t}(o.default);t.default=m},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(3),a=r(5),c=r(11),l=r(1),u=r(0),p=r(14),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r=this;e.prototype.execute.call(this,t),l.info("gameReadyCMD......");var n={url:p.formateUrlOfMobile(window.location.href)};s.default.instance().logTransceiver.send(c.CTR_DOM_READY,n),setTimeout((function(){r.checkEngineState()}),300),s.default.instance().transceiver.sendMsg(a.GAME_LOAD_START,null,!1),s.default.instance().transceiver.sendMsg(a.ON_STAGE_ACCEPT,null,!1),u.parameterVo.isRepairRecord&&s.default.instance().transceiver.sendMsg(a.REPAIR_SECEND_VERSION,null,!1),this.recylePacket()},t.prototype.checkEngineState=function(){var e=this.checkIsSupportWebGL(),t=s.default.instance().thirdInterface.gameInitialized();e?(l.info("WEBGL初始化完成"),s.default.instance().logTransceiver.send(c.CTR_WEBGL_INIT)):(l.error("WEBGL初始化失败"),s.default.instance().logTransceiver.send(c.CTR_WEBGL_INIT_ERROR)),t?(l.info("引擎初始化完成"),s.default.instance().logTransceiver.send(c.CTR_ENGINE_INITED)):(l.error("引擎初始化失败"),s.default.instance().logTransceiver.send(c.CTR_ENGINE_INIT_ERROR))},t.prototype.checkIsSupportWebGL=function(){var e,t=s.default.instance().thirdInterface.gameCanvasName();if(!(e=document.getElementById(t)))return!1;try{e.getContext("webgl")||e.getContext("experimental-webgl")||e.getContext("webkit-3d")||e.getContext("moz-webgl")}catch(e){return!1}return!0},t}(o.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(5),a=r(3),c=r(6),l=r(0),u=r(1),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),l.parameterVo.isZML()){u.info("SDKGameHistoryCMD.....",t),l.historyInfo.historyMsgs=t;var r=c.default.Acquire(s.GAME_PARSE_HISTORY);a.default.instance().packetHandler.dispatcherCMD(r),this.recylePacket()}},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(11),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKLessonInfoCMD......"),s.lessonInfo.lessonId=t.lessonId,s.lessonInfo.courseName=t.courseName,s.lessonInfo.startTime=t.startTime,s.lessonInfo.endTime=t.endTime,s.lessonInfo.lessonUID=t.lessonUid,c.default.instance().newRecordTransceiver.setDefaults();var r=JSON.parse(JSON.stringify(t));c.default.instance().newRecordTransceiver.send(l.INIT_LESSON_INFO,r),this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(5),c=r(6),l=r(3),u=r(7),p=r(8),d=r(1),h=r(9),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeScene="gameChangeScene",t}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t);var r,n,i,o=0,c=0,f=0,_=0,y=s.controllState.controllerId;if(d.info("SDKParseGameHistoryCMD....."),s.historyInfo.isParse)d.info("历史记录信息已解析过。。。。");else if(t=s.historyInfo.historyMsgs,h.isEmpty(t))d.error("没有历史数据......");else if(s.userInfos.getCount()<=1)d.error("setUsersInfo没有初始化......");else if(""!==s.parameterVo.userId){for(s.historyInfo.isParse=!0,c=t.length,o=0;o<c;o++)if((r=t[o]).action!==a.CONTROLLER_CHANGE){if(r._isMainFrame)for(_=s.userInfos.getCount(),f=0;f<_;f++){if(n=s.userInfos.getUserInfoByIndex(f),-1!==a.EVENTS_LIST.indexOf(r.action)||"-1"!==y||r._sendId===n.userId)void 0===s.historyInfo.userMsgs[n.userId]&&(s.historyInfo.userMsgs[n.userId]=[]),(m=s.historyInfo.userMsgs[n.userId]).push(r)}}else y=r.data;for(c=s.userInfos.getCount(),o=0;o<c;o++){var m;n=s.userInfos.getUserInfoByIndex(o),void 0!==(m=s.historyInfo.userMsgs[n.userId])&&0!==m.length&&(m[m.length-1]&&(i=this.parseMsg(m[m.length-1]),n.addPacket(i)))}if(s.controllState.controllerId=y,s.parameterVo.isTeacher()){var E=void 0;(E=u.default.instance().getController(p.WEB_DASHBORAD))&&E.setController(y)}var I=[],g=s.userInfos.getUserInfoById(s.parameterVo.userId);for((i=g&&g.getLastMainPacket())&&(i.name!==this.changeScene&&I.push(this.checkChangeScene(i)),I.push(i)),c=I.length,o=0;o<c;o++)l.default.instance().packetHandler.dispatcherCMD(I[o]);s.historyInfo.clear(),this.recylePacket()}else d.error("setUserInfo没有初始化......")},t.prototype.checkChangeScene=function(e){var t;return(t=c.default.Acquire(e.name)).name=this.changeScene,t.isMainFrame=!0,t.data=e.secene,t},t.prototype.parseMsg=function(e){return l.default.instance().transceiver.messageToPacket(e)},t}(o.default);t.default=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(1),l=r(0),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),c.info("SDKSplitGameReady......",t),l.parameterVo.isTeacher()||l.parameterVo.isOberverTeacher()||l.parameterVo.isReplayTeacher()){var r=void 0;(r=s.default.instance().getController(a.WEB_DASHBORAD))&&r.splitGameReady(t)}this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(1),l=r(0),u=r(3),p=r(5),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),c.info("SDKDisplayControllCMD.....");var r,n=this.checkController(t);n&&(c.error("纠正权限......",l.controllState.controllerId,l.parameterVo.userId),u.default.instance().transceiver.sendMsg(p.CONTROLLER_CHANGE,l.parameterVo.userId,!1)),(r=s.default.instance().getController(a.WEB_DASHBORAD))&&(r.displayControll(t),t&&r.setVideoState(!1),n&&r.setController(l.controllState.controllerId)),this.recylePacket()},t.prototype.checkController=function(e){if(e)return!1;var t=u.default.instance().thirdInterface.getSceneName();return 0!=l.sceneState.getSceneIndexByName(t)&&(l.parameterVo.isGameClass()&&l.parameterVo.isTeacher()?"-1"==l.controllState.controllerId:void 0)},t}(o.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(5),c=r(6),l=r(3),u=r(7),p=r(8),d=r(4),h=r(1),f=r(9),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeScene="gameChangeScene",t}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t);var r,n,i,o,_,y=0,m=0,E=s.controllState.controllerId;if(h.info("SDKRespondGameHistoryCMD......",t),s.historyInfo.isParse=!0,f.isEmpty(t))h.error("没有历史数据......");else if(i=s.userInfos.getUserInfoById(t.mobile)){for(i.isHistoryRes=!0,m=(n=t.packets).length,i.historyCount=m,y=0;y<m;y++)(r=n[y]).action!==a.CONTROLLER_CHANGE?r.action!==a.SERVER_USERS?r._isMainFrame&&(o=this.parseMsg(r),i.addPacket(o)):(_=r,i.historyCount-=1):E=r.data;if(s.parameterVo.isRepairPlay){var I=void 0;(I=u.default.instance().getController(p.REPAIR_PLAY))&&I.history()}else{if(s.controllState.controllerId=E,s.parameterVo.isTeacher()&&s.userInfos.isAllHistoryRes()&&s.controllState.onStageState&&(l.default.instance().packetHandler.notifyCMD(a.ON_STAGE_CHANGE,s.controllState.onStageState),s.controllState.onStageState=null),s.parameterVo.isGameTrain()&&l.default.instance().transceiver.packetHandler.notifyCMD(a.TRAIN_CONTROLLER_CHANGE,t.mobile),s.parameterVo.isTeacher()||s.parameterVo.isStudent()){if(!(i.userId===s.parameterVo.userId||s.parameterVo.isStudent()&&i.role===d.USER_ROLE.TEACHER))return;if(s.parameterVo.isStudent()&&i.role===d.USER_ROLE.TEACHER){if((i=s.userInfos.getUserInfoById(s.parameterVo.userId))&&i.historyCount>0)return;this.syncTeacher()}}else if(s.parameterVo.isGameObserver()&&i.userId!==s.parameterVo.observerId)return;if(!s.parameterVo.isGameTrain()&&(s.parameterVo.isTeacher()||s.parameterVo.isOberverTeacher())){I=void 0;(I=u.default.instance().getController(p.WEB_DASHBORAD))&&I.setController(E)}var g=[];if(o=i.getLastMainPacket()){o.name!==this.changeScene&&g.push(this.checkChangeScene(o));var S=c.default.Acquire(o.name);o.clone(S),g.push(S)}for(_&&(o=this.parseMsg(r),g.push(o)),m=g.length,y=0;y<m;y++)l.default.instance().packetHandler.dispatcherCMD(g[y]);this.recylePacket()}}else h.error("历史记录玩家不存在......",t.mobile,s.userInfos)},t.prototype.checkChangeScene=function(e){var t;return(t=c.default.Acquire(e.name)).name=this.changeScene,t.isMainFrame=!0,t.data=e.secene,t},t.prototype.parseMsg=function(e){return l.default.instance().transceiver.messageToPacket(e)},t.prototype.syncTeacher=function(){var e,t,r,n,i,o=0;if((r=s.userInfos.getUserInfoById(s.userInfos.getTeacherId()))&&!((t=s.userInfos.getUserInfoById(s.parameterVo.userId)).historyCount>0))for(e=r.count(),o=0;o<e;o++)n=r.getPacketByIndex(o),i=c.default.Acquire(n.name),n.clone(i),t.addPacket(i),t.historyCount=t.historyCount+1},t}(o.default);t.default=_},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),this.recylePacket()},t}(r(2).default);t.default=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(4),l=r(0),u=r(1),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r;if(e.prototype.execute.call(this,t),u.info("SDKTeachModleChangeCMD......",t),0===t?r=c.TEACHING_MODE.TYPE_TEACHING:1===t&&(r=c.TEACHING_MODE.TYPE_INSPECTION),l.parameterVo.isOberverTeacher()||l.parameterVo.isReplayTeacher()){l.controllState.teachingMode=r;var n=void 0;(n=s.default.instance().getController(a.WEB_DASHBORAD))&&n.teachModleChange(r)}this.recylePacket()},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(5),c=r(1),l=r(3),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t);var r,n,i=0;if(c.info("SDKWatchHistoryRequestCMD......"),s.parameterVo.isGameObserver()&&""!==s.parameterVo.observerId){var o=s.userInfos.getTeacherId();for(r=s.userInfos.getCount(),i=0;i<r;i++)(n=s.userInfos.getUserInfoByIndex(i)).isActive&&(s.parameterVo.observerId!==o&&s.parameterVo.observerId!==n.userId||l.default.instance().transceiver.sendMsg(a.GET_GAME_HISTORY,n.userId,!1))}},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(5),a=r(0),c=r(1),l=r(3),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),c.info("SDKTeachModleRequestCMD......"),a.parameterVo.isTeacher()&&l.default.instance().transceiver.sendMsg(s.TEACH_MODLE_CHANGE,a.controllState.teachingMode,!1),this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(5),c=r(1),l=r(3),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),c.info("SDKWatchControllerRequestCMD......"),s.parameterVo.isTeacher()&&l.default.instance().transceiver.sendMsg(a.NOTIFY_WATCH_CONTROLLER,s.controllState.controllerId,!1)},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(0),l=r(1),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),l.info("SDKNotifyWatchControllerCMD......",t),c.parameterVo.isGameObserver()&&c.parameterVo.isOberverTeacher()){c.controllState.controllerId=t;var r=void 0;(r=s.default.instance().getController(a.WEB_DASHBORAD))&&r.setController(t)}this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(5),a=r(0),c=r(4),l=r(6),u=r(1),p=r(3),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),a.parameterVo.isGameClass()||a.parameterVo.isGameObserver())if(u.info("SDKSyncTeacherRequestCMD......"),a.parameterVo.isStudent()){var r=void 0;(r=a.userInfos.getUserInfoById(a.parameterVo.userId))&&0===r.historyCount&&p.default.instance().transceiver.sendMsg(s.GET_GAME_HISTORY,a.userInfos.getTeacherId(),!1)}else if(a.parameterVo.isOberverTeacher()||a.parameterVo.isTeacher()){var n,i=0,o=0,d=0,h=(r=void 0,void 0),f=void 0,_=void 0;if(!(h=a.userInfos.getUserInfoById(a.userInfos.getTeacherId())))return;for(n=a.userInfos.getCount(),i=0;i<n;i++)if((r=a.userInfos.getUserInfoByIndex(i)).isActive&&r.role===c.USER_ROLE.STUDENT&&0===r.historyCount)for(d=h.count(),o=0;o<d;o++)f=h.getPacketByIndex(o),_=l.default.Acquire(f.name),f.clone(_),r.addPacket(_),r.historyCount=r.historyCount+1}},t}(o.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(3),c=r(6),l=r(1),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),l.info("SDKSyncTeacherRepondCMD......",t),s.parameterVo.isStudent()){var r;if(s.controllState.controllerId=t.controllerId,!(r=a.default.instance().transceiver.messageToPacket(t.mainFrame)))return;if("gameChangeScene"!==r.name)this.checkChangeScene(r),""!==t.controllerId&&"-1"!==t.controllerId&&a.default.instance().packetHandler.dispatcherCMD(r);else{var n=r.data;a.default.instance().packetHandler.dispatcherCMD(r),this.initScene(n)}}this.recylePacket()},t.prototype.checkChangeScene=function(e){var t;t=c.default.Acquire(e.name),e.clone(t),t.name="gameChangeScene",t.sendId=s.parameterVo.userId,t.data=e.secene,a.default.instance().packetHandler.dispatcherCMD(t)},t.prototype.initScene=function(e){var t;(t=c.default.Acquire("gameSceneReset")).sendId=s.parameterVo.userId,t.isMainFrame=!1,t.data=e,a.default.instance().packetHandler.dispatcherCMD(t)},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),s.sceneState.secnes=t[0],s.parameterVo.isRepair&&(s.sceneState.answers=t[1]),this.recylePacket()},t}(o.default);t.default=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(4),c=r(7),l=r(8),u=r(6),p=r(5),d=r(3),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t);var r;if(r=0==t[0]&&s.sceneState.curIndex>0,s.sceneState.curIndex=t[0],0===t[1]?s.sceneState.state=a.TYPE_SCENE.TYPE_LOADING:1===t[1]?s.sceneState.state=a.TYPE_SCENE.TYPE_LOADED:2===t[1]&&(s.sceneState.state=a.TYPE_SCENE.TYPE_PAUSE),s.sceneState.state!=a.TYPE_SCENE.TYPE_LOADED)return s.parameterVo.isRepairRecord&&(s.repairInfo.releaseAllStoragePackets(),s.repairInfo.recordState=a.TYPE_RECORD_STATE.PAUSE),void this.recylePacket();var n=this.getController();if(n&&n.updatePageState(),n&&n.dispatcherSubIframe(this.getSubSenceStatePacket()),s.parameterVo.isRepair){var i={sceneIndex:s.sceneState.curIndex,totalScene:s.sceneState.getCount(),answerList:s.sceneState.getAnswerByIndex(s.sceneState.curIndex)};if(d.default.instance().transceiver.sendMsg(p.REPAIR_SCENE_INFO,i,!1),s.parameterVo.isRepairRecord){var o=s.repairInfo,c=s.sceneState;if(o.lastSceneIndex=Math.max(o.lastSceneIndex,c.curIndex),this.getController().showUI(),o.isJumping||(s.repairInfo.isControllerChange=!1,this.setController(s.parameterVo.userId),o.clearRecordPacket(),d.default.instance().packetHandler.notifyCMD("gameReplayPlay",o.isRecordPalying()?1:2)),o.reRecordingPasket)return d.default.instance().packetHandler.dispatcherCMD(o.reRecordingPasket),o.clearReRecordingPasket(),void this.recylePacket();o.isJumping&&o.isNeedResume&&o.resumeSceneState&&o.resumeSceneState.sceneIndex==c.curIndex?(this.getController().setOpacity(1),this.resumeScene(),o.isNeedResume=!1,o.isJumping=!1):o.isJumping&&c.curIndex!=o.lastSceneIndex?(this.getController().setOpacity(1),s.repairInfo.isControllerChange=!1,s.repairInfo.sceneIndex=s.repairInfo.targetScene,this.setController(s.parameterVo.userId),d.default.instance().packetHandler.notifyCMD("gameReplayPlay",o.isRecordPalying()?1:2),d.default.instance().packetHandler.notifyCMD(p.REPAIR_GET_DATA_REQUEST,s.repairInfo.targetScene)):o.isJumping&&c.curIndex==o.lastSceneIndex&&(this.getController().setOpacity(1),s.repairInfo.isControllerChange=!1,o.clearRecordPacket(),this.setController(s.parameterVo.userId),d.default.instance().packetHandler.notifyCMD("gameReplayPlay",o.isRecordPalying()?1:2))}s.parameterVo.isRepairPlay&&(0!=s.sceneState.curIndex||r)&&(this.setController(""),d.default.instance().packetHandler.notifyCMD(p.REPAIR_GET_DATA_REQUEST,s.repairInfo.sceneIndex))}this.recylePacket()},t.prototype.getSubSenceStatePacket=function(){var e;return(e=u.default.Acquire(p.SET_SUB_IFRAME_SCENE_STATE)).data=s.sceneState.curSceneName(),e},t.prototype.setController=function(e){var t=this.getController();s.controllState.controllerId=e,t&&t.setController(s.controllState.controllerId),d.default.instance().packetHandler.notifyCMD("gameControllerChange",s.controllState.controllerId),t&&t.updateViewStyle()},t.prototype.getController=function(){return c.default.instance().getController(l.WEB_DASHBORAD)},t.prototype.resumeScene=function(){var e,t,r=0,n=0,i=s.repairInfo,o=[],c=i.resumeSceneState;if(c){if(i.recordType=c.recordType,i.recordState=c.recordState,i.isGuideAnswer=c.isGuideAnswer,i.recordAnswerTime=c.recordAnswerTime,i.isControllerChange=c.isControllerChange,i.recordType!=a.TYPE_RECORD.ANSWER){for((t=c.recordPacket)&&"gameChangeScene"!=t.action?(e=u.default.Acquire(t.name),t.clone(e),o.push(e)):((e=u.default.Acquire("gameSceneReset")).sendId=s.parameterVo.userId,e.data=s.sceneState.curSceneName(),o.push(e)),n=o.length,r=0;r<n;r++)d.default.instance().transceiver.sendPacket(o[r]);i.clearResumeRecordPacket()}this.setController(s.parameterVo.userId),d.default.instance().packetHandler.notifyCMD("gameReplayPlay",i.isRecordPalying()?1:2)}},t}(o.default);t.default=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(13),c=r(5),l=r(3),u=r(12),p=r(4),d=r(7),h=r(8),f=r(1),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isComplete=0,t._total=0,t}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),f.info("SDKGetReplayDataRequestCMD......");var r=s.parameterVo.replayMobiles;s.parameterVo.replayType===p.TYPE_REPLAY.TRAIN?this.loadClassMobiles(r):this.loadDatas(),this.recylePacket()},t.prototype.loadDatas=function(){var e,t=0,r=s.parameterVo.replayMobiles;if(s.parameterVo.isReplayTeacher()){s.controllState.controllerId=s.parameterVo.replayId;var n=void 0;(n=d.default.instance().getController(h.WEB_DASHBORAD))&&n.setController(s.controllState.controllerId)}for(this.parseUsers(r),e=r.length,this._total=e,t=0;t<e;t++)this.loadData(r[t])},t.prototype.loadClassMobiles=function(e){var t,r=this;t=a.REPLAY_DATA_URL+s.parameterVo.lessonUid+"/trainTeacher/replayMobile.json",l.default.instance().thirdInterface.load(t,(function(n,i){if(n)console.log(n);else{f.info("加载成功......",t);var o,s=i,a=0;for(o=s.length;a<o;a++)-1===e.indexOf(s[a])&&e.push(s[a]);r.loadDatas()}}))},t.prototype.loadData=function(e){var t,r=this;t=a.REPLAY_DATA_URL+s.parameterVo.lessonUid+"/"+e+"/gameEvents.json",l.default.instance().thirdInterface.load(t,(function(n,i){n?(console.log(n),void 0===r._noReplay&&(r._noReplay=[]),r._noReplay.push(e)):(f.info("加载成功......",t),l.default.instance().packetHandler.notifyCMD(c.PARSE_REPLAY_DATA,[e,i])),r._isComplete++,r._isComplete===r._total&&(r.filterUsers(),l.default.instance().transceiver.sendMsg(c.REPLAY_READY,null,!1))}))},t.prototype.filterUsers=function(){var e,t,r;if(r=s.parameterVo.replayMobiles,this._noReplay)for(e=r.length-1;e>=0;e--)t=r[e],-1!==this._noReplay.indexOf(t)&&(r.splice(e,1),s.userInfos.removeUserById(t))},t.prototype.parseUsers=function(e){var t,r,n,i=0;if(!(e.length<=1))for(s.userInfos.ClearUsersFlag(),t=e.length,i=0;i<t;i++)r=e[i],s.userInfos.isHasUserById(r)?n=s.userInfos.getUserInfoById(r):((n=new u.default).userId=r,r===s.parameterVo.userId&&s.parameterVo.isReplayTeacher()?n.role=p.USER_ROLE.TEACHER:n.role=p.USER_ROLE.STUDENT,s.userInfos.addUserInfo(n)),n.isActive=!0},t}(o.default);t.default=_},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(3),c=r(1),l=r(5),u=r(9),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),c.info("SDKParseReplayDataCMD......");var r,n,i=0,o=t[0],a=t[1],u=!0,p=!1,d=s.ReplayInfo;if(a){d.total=a.duration;var h=a.whiteboard;if(h){var f=0;for(r=h.length,i=0;i<r;i++)(n=this.parseMsg(h[i][1])).relativeTime=f+h[i][0],f=n.relativeTime,n.action===l.SAVE_USERS_INFO&&this.updateUserInfo(n.data),n.action!==l.REPLAY_ONLINE_STATUS?(p&&(n.isOnline=u),d.addPacket(o,n)):(u=n.data,p=!0);this.recylePacket()}}else c.error("回放数据异常......")},t.prototype.parseMsg=function(e){return a.default.instance().transceiver.messageToPacket(e)},t.prototype.updateUserInfo=function(e){var t,r,n,i,o=0;if(!u.isEmpty(e))for(t=e.length,o=0;o<t;o++)(r=e[o]).mobile&&(n=String(r.mobile),(i=s.userInfos.getUserInfoById(n))&&(i.name=r.name))},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),s.info("SDKReplayReadyCMD......"),this.recylePacket()},t}(o.default);t.default=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(7),c=r(8),l=r(1),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r;e.prototype.execute.call(this,t),l.info("SDKReplayInfoCMD......"),s.ReplayInfo.isPlay=t.playOrPause,s.ReplayInfo.startTime=t.relativeTime,s.ReplayInfo.duration=0,t.speed&&(s.ReplayInfo.speed=t.speed),(r=a.default.instance().getController(c.REPLAY))&&(s.ReplayInfo.isPlay?r.play():r.stop()),this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(12),c=r(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),!s.parameterVo.isGameReplay()){c.info("SDKServerUsersCMD.....",t);var r,n,i,o,l=0,u=t;for(s.serverUsers.ClearUsersFlag(),r=u.length,l=0;l<r;l++)(n=u[l]).mobile&&(o=n.mobile,s.serverUsers.isHasUserById(o)?i=s.serverUsers.getUserInfoById(o):((i=new a.default).userId=o,s.serverUsers.addUserInfo(i)),i.isActive=n.online);this.recylePacket()}},t}(o.default);t.default=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(7),c=r(8),l=r(5),u=r(4),p=r(1),d=r(3),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r;(e.prototype.execute.call(this,t),p.info("SDKTrainControllerChangeCMD......",t,s.parameterVo.userId),this.changeController(),s.parameterVo.userId===t||s.parameterVo.observerId===t)&&(s.parameterVo.isTeacher()&&(s.controllState.isSyncTeacher=!1,d.default.instance().transceiver.sendMsg(l.TEACH_MODLE_CHANGE,s.controllState.teachingMode,!1),d.default.instance().transceiver.sendMsg(l.CONTROLLER_CHANGE,s.controllState.controllerId,!1),d.default.instance().transceiver.sendMsg(l.TRAIN_USERS_CHANGE,s.userInfos.getStudentIds(),!1),d.default.instance().transceiver.sendMsg(l.TEACH_SPLIT_PAGE_CHANGE,{pageIndex:s.controllState.splitPage,isFull:s.controllState.isSplitFull},!1)),(r=a.default.instance().getController(c.WEB_DASHBORAD))&&(r.displayWebDashBoardView(),(s.parameterVo.isTeacher()||s.parameterVo.isOberverTeacher())&&r.setController(s.controllState.controllerId),r.updateViewStyle()),s.controllState.teachingMode===u.TEACHING_MODE.TYPE_INSPECTION&&d.default.instance().thirdInterface.showSystemMouse(),this.recylePacket())},t.prototype.changeController=function(){s.parameterVo.isTeacher()&&(""!==s.controllState.controllerId&&"-1"===s.controllState.controllerId||(s.controllState.controllerId=s.parameterVo.userId)),s.parameterVo.isObserver()&&(""!==s.controllState.controllerId&&"-1"===s.controllState.controllerId||(s.controllState.controllerId=s.parameterVo.observerId)),s.parameterVo.isStudent()&&(""!==s.controllState.controllerId&&"-1"===s.controllState.controllerId||(s.controllState.controllerId=s.userInfos.getTeacherId()))},t}(o.default);t.default=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(6),a=r(5),c=r(3),l=r(2),u=r(4),p=r(1),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),o.parameterVo.isGameTrain()){var r,n=t.mobile;if(""!==n&&o.parameterVo.userId===n)if((r=o.mainInfo).watchMobile=t.watchMobile,r.role=o.parameterVo.getRoleByValue(t.role),o.parameterVo.observerId=r.watchMobile,o.parameterVo.role=r.role,o.parameterVo.isObserver()&&(o.parameterVo.observerRole=u.USER_ROLE.TEACHER),p.info("SDKUserChangeInfoCMD:......",r.name,r.userId,r.role),this.recylePacket(),o.parameterVo.isZML()){var i=s.default.Acquire(a.GAME_PARSE_HISTORY);c.default.instance().packetHandler.dispatcherCMD(i)}else o.parameterVo.isStudent()&&c.default.instance().transceiver.sendMsg(a.GET_GAME_HISTORY,o.parameterVo.userId,!1);else console.error("it is not mine......")}},t}(l.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(12),c=r(3),l=r(5),u=r(6),p=r(7),d=r(8),h=r(4),f=r(1),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),s.parameterVo.isGameTrain()){f.info("SDKSetUsersChangeInfoCMD.....",t);var r,n,i,o=0,_=0,y=t.students,m=[],E=[];for(s.userInfos.ClearUsersFlag(),_=y.length,o=0;o<_;o++)"teacher"!==(r=y[o]).role&&"student"!==r.role||r.mobile&&(i=r.mobile,E.push(i),s.userInfos.isHasUserById(i)?n=s.userInfos.getUserInfoById(i):((n=new a.default).userId=i,s.userInfos.addUserInfo(n)),n.userId=i,n.name=r.name,n.avatar=r.avatar,n.role=s.parameterVo.getRoleByValue(r.role),n.isActive=!0);for(o=(_=s.userInfos.getCount())-1;o>=0;o--)n=s.userInfos.getUserInfoByIndex(o),-1===E.indexOf(n.userId)&&(m.push(n.userId),s.userInfos.removeUserById(n.userId)),n.role===h.USER_ROLE.TEACHER&&-1===m.indexOf(n.userId)&&m.push(n.userId);if(s.parameterVo.isObserver()){var I=s.userInfos.getTeacherId();""!==I&&(s.parameterVo.observerId=I),s.parameterVo.observerRole=h.USER_ROLE.TEACHER}if(this.recylePacket(),s.parameterVo.isTeacher()||s.parameterVo.isOberverTeacher()){var g=void 0;(g=p.default.instance().getController(d.WEB_DASHBORAD))&&(g.deleteUsers(m),g.updateUsers())}if(s.parameterVo.isZML()){var S=u.default.Acquire(l.GAME_PARSE_HISTORY);c.default.instance().packetHandler.dispatcherCMD(S)}else if(s.parameterVo.isTeacher())for(_=s.userInfos.getCount(),o=0;o<_;o++)(n=s.userInfos.getUserInfoByIndex(o)).isActive&&c.default.instance().transceiver.sendMsg(l.GET_GAME_HISTORY,n.userId,!1);else if(s.parameterVo.isGameObserver()){S=u.default.Acquire(l.WATCH_HISTORY_REQUEST);c.default.instance().packetHandler.dispatcherCMD(S)}}},t}(o.default);t.default=_},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(7),c=r(8),l=r(4),u=r(1),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),u.info("SDKTrainUsersChangeCMD..........",t),!s.parameterVo.isSplitScreen()&&s.parameterVo.isReplay()&&s.parameterVo.replayType===l.TYPE_REPLAY.TRAIN){var r,n=0,i=[],o=t;for(n=s.userInfos.getCount()-1;n>=0;n--)(r=s.userInfos.getUserInfoByIndex(n)).userId!==s.parameterVo.replayId&&(-1===o.indexOf(r.userId)?(r.isSplitReady=!1,r.role=l.USER_ROLE.OBSERVER,i.push(r.userId)):r.role=l.USER_ROLE.STUDENT);if(s.parameterVo.isReplayTeacher()){var p=void 0;(p=a.default.instance().getController(c.REPLAY))&&p.changeUserRole(i)}this.recylePacket()}},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(3),a=r(5),c=r(23),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),(new c.default).printScreen((function(e){s.default.instance().transceiver.sendMsg(a.SCREENSHOT_DATA,e,!1)})),this.recylePacket()},t}(o.default);t.default=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(0),l=r(1),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),l.info("SDKTeachSplitPageChangeCMD......",t),c.parameterVo.isOberverTeacher()||c.parameterVo.isReplayTeacher()){c.controllState.splitPage=t;var r=void 0;(r=s.default.instance().getController(a.WEB_DASHBORAD))&&r.teachSplitPageChange(t.pageIndex,t.isFull)}this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(5),a=r(0),c=r(1),l=r(4),u=r(3),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),c.info("SDKTeachSplitPageRequestCMD......"),a.parameterVo.isTeacher()&&a.controllState.teachingMode==l.TEACHING_MODE.TYPE_INSPECTION&&u.default.instance().transceiver.sendMsg(s.TEACH_SPLIT_PAGE_CHANGE,{pageIndex:a.controllState.splitPage,isFull:a.controllState.isSplitFull},!1),this.recylePacket()},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKSetSubIframeInfoCMD.....",t),s.parameterVo.userId=t.userId},t}(o.default);t.default=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(13),l=r(3),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKGetGameConfigCMD......"),this.loadConfig()},t.prototype.loadConfig=function(){var e,t=this;e=c.GAEM_CONFIG_URL+"?"+(new Date).getTime(),l.default.instance().thirdInterface.load(e,(function(r,n){r?console.log(r):(a.info("加载成功......",e),t.parseConfigData(n))}))},t.prototype.parseConfigData=function(e){var t;for(var r in t=s.gameConfig,e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&(t[r]=e[r])},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(3),a=r(6),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r;e.prototype.execute.call(this,t),r=a.default.Acquire(this._packet.name),this._packet.clone(r),r.name="gameVideoReset",s.default.instance().transceiver.packetHandler.dispatcherCMD(r),this.recylePacket()},t}(o.default);t.default=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(4),l=r(3),u=r(5),p=r(8),d=r(7),h=r(6),f=r(24),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairRecordStateCMD......",t);var r=s.repairInfo;if(t){switch(t.cmd){case"play":r.recordState=c.TYPE_RECORD_STATE.PLAY;break;case"pause":r.recordState=c.TYPE_RECORD_STATE.PAUSE;break;case"replay":r.recordState=c.TYPE_RECORD_STATE.PLAY;break;default:r.recordState=c.TYPE_RECORD_STATE.PAUSE}switch(t.type){case"game":r.recordType=c.TYPE_RECORD.GAME;break;case"correct":r.recordType=c.TYPE_RECORD.CORRECT,this.recoveryView();break;case"error":r.recordType=c.TYPE_RECORD.ERROR,this.recoveryView();break;case"answer":r.recordType=c.TYPE_RECORD.ANSWER,this.recoveryView();break;default:r.recordType=c.TYPE_RECORD.GAME}r.sceneIndex=t.sceneIndex,"replay"==t.cmd&&("-1"==s.controllState.controllerId&&(s.controllState.controllerId=s.parameterVo.userId,s.controllState.isSyncTeacher=!1,l.default.instance().transceiver.sendMsg(u.CONTROLLER_CHANGE,s.controllState.controllerId,!1),l.default.instance().transceiver.sendMsg(u.REPAIR_CONTROLLER_CHANGE,s.controllState.controllerId,!1)),r.recordType==c.TYPE_RECORD.GAME&&(r.releaseAllStoragePackets(),l.default.instance().thirdInterface.loadScene(s.sceneState.curSceneName()))),r.recordType!=c.TYPE_RECORD.GAME&&(s.controllState.controllerId=s.parameterVo.userId);var n=this.getController();if(n&&(n.setController(s.controllState.controllerId),l.default.instance().packetHandler.notifyCMD("gameControllerChange",s.controllState.controllerId),n.updateViewStyle()),l.default.instance().thirdInterface.isZMG2()&&l.default.instance().packetHandler.notifyCMD(u.STOP_ZMG,!r.isRecordPalying()),l.default.instance().packetHandler.notifyCMD("gameReplayPlay",r.isRecordPalying()?1:2),r.recordState==c.TYPE_RECORD_STATE.PLAY){var i=s.sceneState.curSceneName();f.default.dispatcher(i)}}this.recylePacket()},t.prototype.getController=function(){return d.default.instance().getController(p.WEB_DASHBORAD)},t.prototype.recoveryView=function(){var e,t,r,n=0,i=[];if(s.repairInfo.recordState!=c.TYPE_RECORD_STATE.PAUSE){for((t=s.repairInfo.resumeSceneState&&s.repairInfo.resumeSceneState.recordPacket?s.repairInfo.resumeSceneState.recordPacket:s.repairInfo.recordPacket)&&"gameChangeScene"!=t.action?(r=h.default.Acquire(t.name),t.clone(r),i.push(r)):((r=h.default.Acquire("gameSceneReset")).sendId=s.parameterVo.userId,r.isMainFrame=!1,r.data=s.sceneState.curSceneName(),i.push(r)),e=i.length,n=0;n<e;n++)l.default.instance().transceiver.sendPacket(i[n]);s.repairInfo.clearResumeRecordPacket()}else l.default.instance().packetHandler.notifyCMD("gameTouchCancel")},t}(o.default);t.default=_},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(7),l=r(8),u=r(5),p=r(3),d=r(4),h=r(6),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairAnswerTimeCMD......",t),this.setRecordPacket();var r=s.repairInfo;r.recordAnswerTime=0,t.timestamp&&(r.recordAnswerTime=t.timestamp),r.isGuideAnswer=!1,t.isGuideAnswer&&(r.isGuideAnswer=t.isGuideAnswer),p.default.instance().transceiver.sendMsg(u.REPAIR_ANSWER_RESPOND,t,!1),r.recordState=d.TYPE_RECORD_STATE.PAUSE,p.default.instance().packetHandler.notifyCMD("gameReplayPlay",r.isRecordPalying()?1:2);var n=this.getController();s.controllState.controllerId=s.parameterVo.userId,n&&n.setController(s.controllState.controllerId),n&&n.updateViewStyle(),this.recylePacket()},t.prototype.getController=function(){return c.default.instance().getController(l.WEB_DASHBORAD)},t.prototype.setRecordPacket=function(){var e,t;if(s.repairInfo.clearRecordPacket(),e=(t=s.userInfos.getUserInfoById(s.parameterVo.userId))&&t.getLastMainPacket()){var r=h.default.Acquire(e.name);e.clone(r),s.repairInfo.recordPacket=r}},t}(o.default);t.default=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),a.info("SDKRepairAnswerRespondCMD......",t),s.parameterVo.isRepairPlay){a.info("SDKRepairAnswerRespondCMD......",t);var r=s.repairInfo;r.recordAnswerTime=0,t.timestamp&&(r.recordAnswerTime=t.timestamp),r.isGuideAnswer=!1,t.isGuideAnswer&&(r.isGuideAnswer=t.isGuideAnswer),this.recylePacket()}},t}(o.default);t.default=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(4),u=r(7),p=r(8),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairNextSceneCMD......",t);var r=s.repairInfo;r.recordState=l.TYPE_RECORD_STATE.PAUSE,r.recordType=l.TYPE_RECORD.GAME,s.controllState.controllerId=s.parameterVo.userId;var n=this.getController();n&&n.setController(s.controllState.controllerId),c.default.instance().transceiver.sendMsg("gameNextScene",null,!0),this.recylePacket()},t.prototype.getController=function(){return u.default.instance().getController(p.WEB_DASHBORAD)},t}(o.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(84),l=r(3),u=r(5),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairSetBaseInfoCMD......",t);var r,n=s.repairInfo;n.URLConfig=t,n.clearRepairUrlInfos();var i,o=t.chapterList,p=0;for(i=o.length,p=0;p<i;p++){r=new c.default;var d=o[p];r.sceneIndex=d.chapterId,r.gameEvents=d.gameEvents,r.duration=d.duration,r.parseAnswers(d.answerList),n.addRepairUrlInfo(r),n.lastSceneIndex<parseInt(r.sceneIndex)+1&&(n.lastSceneIndex=parseInt(r.sceneIndex)+1)}s.parameterVo.isRepairRecord||l.default.instance().isEnter&&l.default.instance().transceiver.sendMsg(u.REPAIR_GET_SCENE_INFO,null,!1),this.recylePacket()},t}(o.default);t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.sceneIndex="0",this.gameEvents="",this.duration=0,this.answers=[]}return e.prototype.parseAnswers=function(e){var t,r=0;for(t=e?e.length:0,r=0;r<t;r++){var n=e[r],i={type:n.answerId,gameEvents:n.gameEvents,duration:n.duration,right:n.right};this.addAnswer(i)}},e.prototype.getAnswerByType=function(e){var t,r=0;for(t=this.answers.length,r=0;r<t;r++){if(this.answers[r].type==e)return this.answers[r]}return null},e.prototype.addAnswer=function(e){this.answers.push(e)},e.prototype.getRightAnswerType=function(){var e,t=0;for(e=this.answers.length,t=0;t<e;t++){var r=this.answers[t];if(r.right)return r.type}return"-1"},e.prototype.getErrorAnswerType=function(){var e,t=0;for(e=this.answers.length,t=0;t<e;t++){var r=this.answers[t];if(!r.right)return r.type}return"-1"},e.prototype.getLoadUrls=function(){var e=[];this.gameEvents&&""!=this.gameEvents&&e.push({key:this.sceneIndex,value:this.gameEvents});var t,r=0;for(t=this.answers.length,r=0;r<t;r++){var n=this.answers[r];n.gameEvents&&""!=n.gameEvents&&e.push({key:this.sceneIndex+"_"+n.type,value:n.gameEvents})}return e},e}();t.default=n},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(4),u=r(8),p=r(7),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairChangeSceneCMD......",t);var r=s.repairInfo,n=this.getRecordSceneIndex(t.chapterId);if(n>=s.sceneState.getCount())a.error("跳转的目标场景不存在......");else{r.sceneIndex!=n&&(r.sceneIndex=n,r.dataState=l.TYPE_REPAIR_DATA.UNLOAD,r.playType=l.TYPE_REPAIR_PLAY.GAME,r.answerId="-1",r.startTime=0,r.isPlay=!1,this.updateState());var i=s.sceneState.getSceneNameByIndex(r.sceneIndex);c.default.instance().packetHandler.notifyCMD("gameChangeScene",i),this.recylePacket()}},t.prototype.getRecordSceneIndex=function(e){var t=e,r=s.repairInfo;do{var n=r.getRepairUrlInfo(t.toString());if(n){t=parseInt(n.sceneIndex);break}t++}while(t<s.sceneState.getCount());return t},t.prototype.updateState=function(){var e,t=s.repairInfo;(e=p.default.instance().getController(u.REPAIR_PLAY))&&(t.isPlay?e.play():e.stop())},t}(o.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),s.info("SDKRepairCommitAnswerCMD......",t),this.recylePacket()},t}(o.default);t.default=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(4),l=r(3),u=r(7),p=r(8),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairSkipCMD......",t),s.repairInfo.answerId=t.answerId,s.controllState.controllerId="",s.repairInfo.isPlay=!1,l.default.instance().packetHandler.notifyCMD("gameControllerChange",s.controllState.controllerId),"-1"!=s.repairInfo.answerId&&(s.repairInfo.playType=c.TYPE_REPAIR_PLAY.ANSWER,s.repairInfo.startTime=0,s.repairInfo.duration=0),this.updateState(),this.recylePacket()},t.prototype.updateState=function(){var e,t=s.repairInfo;(e=u.default.instance().getController(p.REPAIR_PLAY))&&(t.isPlay?e.play():e.stop())},t}(o.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(7),l=r(8),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairPlayStateCMD......",t);var r=s.repairInfo;r.isPlay=t.isPlay,r.startTime=t.duration,r.duration=0,this.updateState(),this.recylePacket()},t.prototype.updateState=function(){var e,t=s.repairInfo;(e=c.default.instance().getController(l.REPAIR_PLAY))&&(t.isPlay?e.play():e.stop())},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(1),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),s.info("SDKRepairGetSceneInfoCMD......"),this.recylePacket()},t}(o.default);t.default=a},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(4),l=r(5),u=r(3),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairRespondSceneInfoCMD......",t);var r=s.repairInfo;if(r.sceneIndex=parseInt(t.chapterId),r.startTime=t.duration,r.answerId=t.answerId,"a"==t.playType?(r.playType=c.TYPE_REPAIR_PLAY.ANSWER,s.controllState.controllerId=""):r.playType=c.TYPE_REPAIR_PLAY.GAME,0!=r.sceneIndex){var n=s.sceneState.getSceneNameByIndex(r.sceneIndex);u.default.instance().packetHandler.notifyCMD("gameChangeScene",n)}else u.default.instance().packetHandler.notifyCMD(l.REPAIR_GET_DATA_REQUEST,r.sceneIndex);r.playType==c.TYPE_REPAIR_PLAY.GAME&&u.default.instance().transceiver.sendMsg(l.GET_GAME_HISTORY,s.parameterVo.userId,!1),this.recylePacket()},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(5),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),s.parameterVo.isRepairPlay&&(a.info("SDKCommitAnswerCMD......",t),s.controllState.isOwn()&&(c.default.instance().transceiver.sendMsg(l.REPAIR_COMMIT_ANSWER,s.sceneState.getAnswerById(t),!1),s.controllState.controllerId="",c.default.instance().packetHandler.notifyCMD("gameControllerChange",s.controllState.controllerId))),this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(1),a=r(0),c=r(4),l=r(5),u=r(3),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.NO_EXCUTE=["showPageIndex","gameChangeScene","gamePrevScene","gameNextScene","commitAnswer"],t}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),s.info("SDKRepairGetDataRequestCMD......",t);var r=a.repairInfo;if(r.sceneIndex==t){switch(r.dataState){case c.TYPE_REPAIR_DATA.UNLOAD:this.loadDatas(t);break;case c.TYPE_REPAIR_DATA.LOADING:break;case c.TYPE_REPAIR_DATA.LOADED:this.loadComplete()}this.recylePacket()}else s.info("请求的sceneIndex不对",r.sceneIndex,t)},t.prototype.loadDatas=function(e){var t,r,n,i,o=0,l=(i=a.repairInfo).getRepairUrlInfo(e);if(l)if(i.clearPacket(),r=l.getLoadUrls(),this._total=r.length,0!=this._total)for(a.repairInfo.dataState=c.TYPE_REPAIR_DATA.LOADING,this._current=0,n=this._total,o=0;o<n;o++)t=r[o].value,this.loadData(r[o].key,t+"?"+(new Date).getTime());else this.loadComplete();else s.error("url配置信息不对...",e)},t.prototype.loadData=function(e,t){var r=this;u.default.instance().thirdInterface.load(t,(function(n,i){n?s.error("加载失败",e,n):(s.info("加载成功......",t),r.parseGameData([e,i])),r._current++,r._current==r._total&&r.loadComplete()}))},t.prototype.parseGameData=function(e){var t,r,n=0,i=e[0],o=e[1],c=a.repairInfo;if(o){c.totalTime=o.duration;var l=o.events;if(l){var u=0;for(t=l.length,n=0;n<t;n++)(r=this.parseMsg(l[n][1])).relativeTime=u+l[n][0],u=r.relativeTime,-1==this.NO_EXCUTE.indexOf(r.name)&&c.addPacket(i,r)}}else s.error("回放数据异常......")},t.prototype.loadComplete=function(){a.repairInfo.dataState=c.TYPE_REPAIR_DATA.LOADED,u.default.instance().transceiver.sendMsg(l.REPAIR_PLAY_READY,{chapterId:a.repairInfo.sceneIndex},!1)},t.prototype.parseMsg=function(e){return u.default.instance().transceiver.messageToPacket(e)},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(1),a=r(0),c=r(4),l=r(6),u=r(3),p=r(8),d=r(7),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),s.info("SDKRepairPlayReadyCMD......"),a.parameterVo.isRepairRecord){var r=a.repairInfo;if(!r.isJumping)return void this.recylePacket();r.isJumping=!1;var n=this.getController();n&&n.setOpacity(0),n&&n.updateViewStyle(),this.resumeScene()}this.recylePacket()},t.prototype.getController=function(){return d.default.instance().getController(p.WEB_DASHBORAD)},t.prototype.resumeScene=function(){var e,t,r,n=0,i=[],o=a.repairInfo;if(o.targetType!=c.TYPE_RECORD.GAME&&(o.recordType=c.TYPE_RECORD.GAME,r=o.getLastMainPacket(),o.recordType=o.targetType,r&&(t=l.default.Acquire(r.name),r.clone(t),o.recordPacket=t)),!r){var s=a.sceneState.curSceneName();u.default.instance().packetHandler.notifyCMD("gameSceneReset",s)}for(r&&"gameChangeScene"!=r.action&&(t=l.default.Acquire(r.name),r.clone(t),i.push(t)),e=i.length,n=0;n<e;n++)u.default.instance().packetHandler.dispatcherCMD(i[n]);o.targetScene=0,o.targetType=c.TYPE_RECORD.GAME},t}(o.default);t.default=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(1),a=r(0),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){(e.prototype.execute.call(this,t),s.info("SDKRepairControllerChangeCMD......",t),a.parameterVo.isRepairRecord)&&(a.repairInfo.isControllerChange=!0);this.recylePacket()},t}(o.default);t.default=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(5),u=r(6),p=r(4),d=r(7),h=r(8),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),a.info("SDKOnStageChangeCMD...",t),t)if(!s.parameterVo.isTeacher()||s.historyInfo.isParse&&s.userInfos.isAllHistoryRes()){var r=this.getController(),n="up"==t.type,i=t.mobile;s.parameterVo.isTeacher()?n?s.controllState.controllerId!=i&&(s.controllState.isSyncTeacher=!1,c.default.instance().transceiver.sendMsg(l.CONTROLLER_CHANGE,i,!1),r&&r.setController(s.controllState.controllerId),s.controllState.isInspection()&&(s.controllState.oldTeachingMode=s.controllState.teachingMode,s.controllState.teachingMode=p.TEACHING_MODE.TYPE_TEACHING,r&&r.teachModleChange(s.controllState.teachingMode),c.default.instance().transceiver.sendMsg(l.TEACH_MODLE_CHANGE,s.controllState.teachingMode,!1))):s.controllState.controllerId==i&&(i=s.parameterVo.userId,s.controllState.controllerId=s.parameterVo.userId,c.default.instance().transceiver.sendMsg(l.CONTROLLER_CHANGE,i,!1),r&&r.setController(s.controllState.controllerId),s.controllState.teachingMode=s.controllState.oldTeachingMode,s.controllState.oldTeachingMode=p.TEACHING_MODE.TYPE_TEACHING,r&&r.teachModleChange(s.controllState.teachingMode),c.default.instance().transceiver.sendMsg(l.TEACH_MODLE_CHANGE,s.controllState.teachingMode,!1)):s.parameterVo.isStudent()&&n&&(s.controllState.controllerId=i,c.default.instance().packetHandler.notifyCMD("gameControllerChange",i),i==s.parameterVo.userId&&this.syncToOther(i)),this.recylePacket()}else s.controllState.onStageState=t},t.prototype.syncToOther=function(e){var t,r;if((t=s.userInfos.getUserInfoById(e))&&(r=t.getLastMainPacket()))if("gameChangeScene"!==r.name)this.checkChangeScene(r),c.default.instance().transceiver.sendPacket(r);else{var n=r.data;c.default.instance().transceiver.sendPacket(r),this.initScene(n)}},t.prototype.checkChangeScene=function(e){var t;t=u.default.Acquire(e.name),e.clone(t),t.name="gameChangeScene",t.sendId=s.parameterVo.userId,t.data=e.secene,c.default.instance().transceiver.sendPacket(t)},t.prototype.initScene=function(e){var t;(t=u.default.Acquire("gameSceneReset")).sendId=s.parameterVo.userId,t.isMainFrame=!1,t.data=e,c.default.instance().transceiver.sendPacket(t)},t.prototype.getController=function(){return d.default.instance().getController(h.WEB_DASHBORAD)},t}(o.default);t.default=f},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(4),u=r(6),p=r(7),d=r(8),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairRerecordingSceneCMD......",t);var r=parseInt(t.targetScene),n=t.playType;if(s.parameterVo.isRepairRecord){if(!s.repairInfo.getRepairUrlInfo(r.toString())){var i=s.repairInfo;if(i.isNeedResume&&i.resumeSceneState.sceneIndex!=r)return a.error("没有该场景的url配置信息",r),void this.recylePacket()}if(s.sceneState.state!=l.TYPE_SCENE.TYPE_LOADED){var o=u.default.Acquire(this._packet.action);return this._packet.clone(o),s.repairInfo.reRecordingPasket=o,void this.recylePacket()}s.repairInfo.dataState=l.TYPE_REPAIR_DATA.UNLOAD;var c=s.repairInfo;c.targetScene=r,"p"==n?c.targetType=l.TYPE_RECORD.GAME:"u"==n?c.targetType=l.TYPE_RECORD.GUILD:"a"==n&&(c.targetType=l.TYPE_RECORD.ANSWER),this.updateState(),this.changeScene(),this.recylePacket()}else this.recylePacket()},t.prototype.changeScene=function(){var e=s.repairInfo,t=c.default.instance().thirdInterface.getSceneName();e.isJumping=!0,e.releaseAllStoragePackets();var r=s.sceneState.getSceneNameByIndex(e.targetScene);""!=r&&""!=t&&r!=t?c.default.instance().packetHandler.notifyCMD("gameChangeScene",r):""!=r&&r==t?c.default.instance().packetHandler.notifyCMD("changeSceneState",[e.targetScene,s.sceneState.state]):(e.isJumping=!1,a.info("当前场景为空...."))},t.prototype.updateState=function(){var e=s.repairInfo;e.recordState=l.TYPE_RECORD_STATE.PAUSE;var t=this.getController();t&&t.updateViewStyle(),c.default.instance().packetHandler.notifyCMD("gameReplayPlay",e.isRecordPalying()?1:2)},t.prototype.getController=function(){return p.default.instance().getController(d.WEB_DASHBORAD)},t}(o.default);t.default=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(6),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),a.info("SDKRepairSaveRecordSceneCMD......",t),s.parameterVo.isRepairRecord){var r=s.repairInfo;r.isNeedResume=!0;var n=r.resumeSceneState;n.sceneIndex=s.sceneState.curIndex,n.recordType=r.recordType,n.recordState=r.recordState,n.isGuideAnswer=r.isGuideAnswer,n.recordAnswerTime=r.recordAnswerTime,n.isControllerChange=r.isControllerChange,n.recordPacket=this.getLastMainPacket(),this.recylePacket()}else this.recylePacket()},t.prototype.getLastMainPacket=function(){var e,t;if(s.repairInfo.clearResumeRecordPacket(),e=(t=s.userInfos.getUserInfoById(s.parameterVo.userId))&&t.getLastMainPacket()){var r=c.default.Acquire(e.name);return e.clone(r),r}return null},t}(o.default);t.default=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(4),u=r(7),p=r(8),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairGoToSceneCMD......",t);var r=s.sceneState.getSceneNameByIndex(t.targetScene);if(""!=r){var n=s.repairInfo;n.recordState=l.TYPE_RECORD_STATE.PAUSE,n.recordType=l.TYPE_RECORD.GAME,s.controllState.controllerId=s.parameterVo.userId;var i=this.getController();i&&i.setController(s.controllState.controllerId),c.default.instance().packetHandler.notifyCMD("gameReplayPlay",n.isRecordPalying()?1:2),c.default.instance().packetHandler.notifyCMD("gameChangeScene",r)}this.recylePacket()},t.prototype.getController=function(){return u.default.instance().getController(p.WEB_DASHBORAD)},t}(o.default);t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(5),u=r(4),p=r(7),d=r(8),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKRepairSaveCMD......",t);parseInt(t.sceneIndex);s.parameterVo.isRepairRecord?(this.appendControllCMD(t),this.recylePacket()):this.recylePacket()},t.prototype.appendControllCMD=function(e){"p"==e.playType&&e.isControllChange&&c.default.instance().transceiver.sendMsg(l.CONTROLLER_CHANGE,"-1",!1);var t=s.repairInfo;t.recordState=u.TYPE_RECORD_STATE.PAUSE;var r=this.getController();r&&r.updateViewStyle(),c.default.instance().packetHandler.notifyCMD("gameReplayPlay",t.isRecordPalying()?1:2)},t.prototype.getController=function(){return p.default.instance().getController(d.WEB_DASHBORAD)},t}(o.default);t.default=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(12),c=r(3),l=r(1),u=r(11),p=r(5),d=r(14),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){if(e.prototype.execute.call(this,t),l.info("SDKSetAllUsersInfoCMD....."),!(s.parameterVo.isGameReplay()||s.parameterVo.isGameTrain()||s.parameterVo.isRepair)){var r,n,i,o,u=0,d=t,h=[];for(r=d.length,u=0;u<r;u++)"teacher"!==(n=d[u]).role&&"student"!==n.role||n.mobile&&(i=String(n.mobile),s.allUsers.isHasUserById(i)||((o=new a.default).userId=i,o.name=n.name,o.avatar=n.avatar,o.role=s.parameterVo.getRoleByValue(n.role),s.allUsers.addUserInfo(o),h.push({mobile:i,name:n.name,role:n.role,avatar:n.avatar,userId:n.userId})));s.parameterVo.isTeacher()&&c.default.instance().transceiver.sendMsg(p.SAVE_USERS_INFO,h,!1),this.sendLog(h),this.recylePacket()}},t.prototype.sendLog=function(e){var t,r,n=0,i={},o=[];for(i.users=o,t=e.length,n=0;n<t;n++)r=e[n],o.push({mobile:d.formateMobile(r.mobile),name:r.name,role:r.role,userId:r.userId||"0"});c.default.instance().newRecordTransceiver.send(u.INIT_SET_ALL_USERS_INFO,i)},t}(o.default);t.default=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(0),a=r(1),c=r(3),l=r(11),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),a.info("SDKTrackDataCMD......");var r=s.trackInfo;if(t){r.appVersion=t.appVersion,r.deviceId=t.deviceId,r.coursewareId=t.coursewareId,c.default.instance().newRecordTransceiver.setDefaults();var n=JSON.parse(JSON.stringify(t));c.default.instance().newRecordTransceiver.send(l.INIT_SET_TRACK_DATA,n)}this.recylePacket()},t}(o.default);t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),this.recylePacket()},t}(r(2).default);t.default=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){e.prototype.execute.call(this,t),this.recylePacket()},t}(r(2).default);t.default=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r;e.prototype.execute.call(this,t),c.info("SDKDisplayBtnUICMD"),t||(t=[]),(r=s.default.instance().getController(a.WEB_DASHBORAD))&&r.displayUI(t),this.recylePacket()},t}(o.default);t.default=l},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),s=r(7),a=r(8),c=r(1),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.execute=function(t){var r;e.prototype.execute.call(this,t),c.info("SDKDisplayVedioBtnCMD....."),(r=s.default.instance().getController(a.WEB_DASHBORAD))&&r.setVideoState(t),this.recylePacket()},t}(o.default);t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(0),o=r(9),s=function(){function e(){}return e.appendMobilesToPacket=function(e){if(e.clearMobiles(),e.clearNotSaveMobiles(),-1!==n.EVENT_CHECK.indexOf(e.name))return e.name===n.VDIEO_PROCESS_REQUEST?(e.addToUserId(e.data),e.addNotSaveMobiles(e.data),void e.addNotSaveMobiles(i.parameterVo.userId)):e.name===n.VIDEO_PROCESS?(e.addToUserId(i.userInfos.getTeacherId()),void e.addToUserId(i.parameterVo.userId)):void(""!==i.controllState.controllerId&&(e.addToUserId(i.userInfos.getTeacherId()),e.addNotSaveMobiles(i.userInfos.getTeacherId())));-1===n.EVENTS_LIST.indexOf(e.name)?(i.parameterVo.isStudent()&&i.controllState.isOwn()&&!i.controllState.isFullOwn()&&(e.addToUserId(i.parameterVo.userId),e.addToUserId(i.userInfos.getTeacherId()),e.addNotSaveMobiles(i.userInfos.getTeacherId())),i.parameterVo.isTeacher()&&i.controllState.isOwn()&&!i.controllState.isFullOwn()&&e.addToUserId(i.parameterVo.userId)):e.name===n.GAEM_READY||e.name===n.REPLAY_READY||e.name===n.TEACH_MODLE_CHANGE||e.name===n.TEACH_SPLIT_PAGE_CHANGE||e.name===n.ON_STAGE_ACCEPT||e.name===n.SAVE_USERS_INFO||e.name===n.GAME_NAVIGATION_STATE?e.addToUserId(i.parameterVo.userId):e.name===n.GET_GAME_HISTORY?e.addToUserId(e.data):e.name!==n.GAME_LOAD_START&&e.name!==n.GAME_LOAD_COMPLETE&&e.name!==n.REPAIR_SECEND_VERSION||(e.addToUserId(i.userInfos.getTeacherId()),e.addNotSaveMobiles(i.userInfos.getTeacherId()))},e.messageToAll=function(t){(o.isEmpty(t.toMobiles)||0===t.toMobiles.length)&&(e.addSendUser(t,i.userInfos),e.addSendUser(t,i.serverUsers),e.addSendUser(t,i.allUsers))},e.addSendUser=function(e,t){var r,n,i=0;for(r=t.getCount(),i=0;i<r;i++)n=t.getUserInfoByIndex(i),o.isEmpty(n)||e.addToUserId(n.userId)},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(3),o=function(){function e(){}return e.appendParamsToPacket=function(e){e.id=n.parameterVo.gameId,e.source="game",e.sendId=n.parameterVo.userId,e.secene=i.default.instance().thirdInterface.getSceneName(),n.parameterVo.isZML()?e.kjType="zml":n.parameterVo.isZMG()&&(e.kjType="zmg")},e.messageToPacket=function(e,t){e.id=t.id,e.source=t.source,e.data=t.data,e.toMobiles=t.toMobiles,e.notSaveMobile=t.notSaveMobile,e.kjType=t.kjType,null!=t.isOnline&&(e.isOnline="true"==t.isOnline),e.sendId=t._sendId,e.secene=t._secene,e.isMainFrame=t._isMainFrame},e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(5),o=r(1),s=function(){function e(){}return e.isCanSend=function(e){return void 0===e||""===e.name?(o.error("send packet is error:",e),!1):n.parameterVo.isGameClass()||n.parameterVo.isSplitScreen()||n.parameterVo.isGameReplay()?!(!n.controllState.isOwn()&&-1===i.EVENTS_LIST.indexOf(e.name)&&-1===i.EVENT_CHECK.indexOf(e.name))||(n.controllState.isOwn()?o.error("发送消息错误：不是SDKRegistCommand.EVENTS_LIST里的系统消息:",e.name):o.error("发送消息错误：自己没有操作权限.当前权限ID:",n.controllState.controllerId),!1):(o.error("发送消息错误：不是上课模式,也不是分屏模式,请检测发送消息的逻辑代码"),!1)},e}();t.default=s},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(19),s=r(110),a=r(114),c=r(0),l=r(115),u=r(26),p=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.constructorViews=function(){if(e.prototype.constructorViews.call(this),c.parameterVo.isRepairRecord)return this._SDKRepairView=new l.default(this),void this._views.push(this._SDKRepairView);c.parameterVo.isTeacher()||c.parameterVo.isOberverTeacher()||c.parameterVo.isReplayTeacher()?(this._SDKWebDashBoardView=new s.default(this),this._views.push(this._SDKWebDashBoardView)):c.parameterVo.isGamePreview()&&(this._SDKPcDashBoardView=new a.default(this),this._views.push(this._SDKPcDashBoardView))},t.prototype.setController=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.setController(e),this._SDKRepairView&&this._SDKRepairView.setController(e)},t.prototype.dispatcherSubIframe=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.dispatcherSubIframe(e)},t.prototype.notifySubIframe=function(e,t){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.notifySubIframe(e,t)},t.prototype.splitGameReady=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.splitGameReady(e)},t.prototype.updateUsers=function(){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.updateUsers()},t.prototype.deleteUsers=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.deleteUsers(e)},t.prototype.displayControll=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.displayControll(e),this._SDKRepairView&&this._SDKRepairView.displayControll(e)},t.prototype.teachModleChange=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.teachModleChange(e)},t.prototype.teachSplitPageChange=function(e,t){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.teachSplitPageChange(e,t)},t.prototype.updatePageState=function(){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.updatePageState(),this._SDKPcDashBoardView&&this._SDKPcDashBoardView.updateChangePageState(),this._SDKRepairView&&this._SDKRepairView.updatePageState()},t.prototype.displayWebDashBoardView=function(){var e=c.parameterVo.isTeacher()||c.parameterVo.isOberverTeacher()||c.parameterVo.isReplayTeacher();e&&!this._SDKWebDashBoardView&&(this._SDKWebDashBoardView=new s.default(this),this._views.push(this._SDKWebDashBoardView)),this._SDKWebDashBoardView&&this._SDKWebDashBoardView.displayWebDashBoardView(e)},t.prototype.updateViewStyle=function(){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.updateViewStyle(),this._SDKRepairView&&this._SDKRepairView.updateViewStyle()},t.prototype.showUI=function(e){void 0===e&&(e=u.CONTROLL),this._SDKWebDashBoardView&&this._SDKWebDashBoardView.showUI(e),this._SDKRepairView&&this._SDKRepairView.showUI(e)},t.prototype.hideUI=function(e){void 0===e&&(e=u.CONTROLL),this._SDKWebDashBoardView&&this._SDKWebDashBoardView.hideUI(e),this._SDKRepairView&&this._SDKRepairView.hideUI(e)},t.prototype.displayUI=function(e){void 0===e&&(e=[]),this._SDKWebDashBoardView&&this._SDKWebDashBoardView.displayUI(e),this._SDKRepairView&&this._SDKRepairView.displayUI(e),this._SDKPcDashBoardView&&this._SDKPcDashBoardView.displayUI(e)},t.prototype.setOpacity=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.setOpacity(e),this._SDKRepairView&&this._SDKRepairView.setOpacity(e)},t.prototype.setVideoState=function(e){this._SDKWebDashBoardView&&this._SDKWebDashBoardView.setVideoState(e),this._SDKPcDashBoardView&&this._SDKPcDashBoardView.setVideoState(e)},t.prototype.reset=function(){e.prototype.reset.call(this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._SDKPcDashBoardView=null,this._SDKWebDashBoardView=null,this._SDKRepairView=null},t}(o.default);t.default=p},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),s=r(0),a=r(5),c=r(15),l=r(10),u=r(3),p=r(17),d=r(4),h=r(112),f=function(e){function t(t){var r=e.call(this,t)||this;return r.setController(r._controllerId),r.teachModleChange(s.controllState.teachingMode),r}return i(t,e),t.prototype.updateSplitFrames=function(){this._studentsView&&this._studentsView.updateStudents()},t.prototype.setController=function(e){this._controllerId=e,"-1"===this._controllerId?this._components.controll.setStatus("student"):this._components.controll.setStatus("teacher"),this.updateUIState(e),this.updateChangeSceneState(),this.updateMouseState()},t.prototype.splitGameReady=function(e){this._studentsView&&this._studentsView.splitGameReady(e)},t.prototype.dispatcherSubIframe=function(e){this._studentsView&&this._studentsView.dispatcherToStudents(e,this._controllerId)},t.prototype.notifySubIframe=function(e,t){this._studentsView&&this._studentsView.dispatcherToStudent(e,t)},t.prototype.updateUsers=function(){this._teachingMode===o.TEACHING_MODE.TYPE_INSPECTION&&this.updateSplitFrames()},t.prototype.deleteUsers=function(e){this._studentsView&&this._studentsView.deleteStudentView(e)},t.prototype.displayControll=function(e){this._isShowControllUI=e,e?this._components.controll.show():this._components.controll.hide()},t.prototype.teachModleChange=function(e){e===o.TEACHING_MODE.TYPE_TEACHING?(this._components.split.setStatus("full"),this.teahcerModle()):e===o.TEACHING_MODE.TYPE_INSPECTION&&(this._components.split.setStatus("split"),this.spliteModle()),this.updateMouseState()},t.prototype.teachSplitPageChange=function(e,t){this._teachingMode===o.TEACHING_MODE.TYPE_INSPECTION&&this._studentsView&&this._studentsView.setPageIndex(e,t)},t.prototype.updatePageState=function(){(s.controllState.isFullOwn()||s.controllState.isOberverFullOwn()||s.controllState.isReplayFullOwn())&&this.updateChangePageState()},t.prototype.displayWebDashBoardView=function(e){e?(this._menuContainer.style.display="block",this._teachingMode===o.TEACHING_MODE.TYPE_TEACHING?this._studentsView.hideStudentsView():this._studentsView.showStudentsView()):(this._menuContainer.style.display="none",this._studentsView.hideStudentsView(),this._studentsView.deleteAll(),this.teachModleChange(o.TEACHING_MODE.TYPE_TEACHING))},t.prototype.updateViewStyle=function(){var e,t=0,r=window.publicStyle.childNodes;for(e=r.length;t<e;t++){if(r[t]&&r[t].parentNode)if(-1!==r[t].data.indexOf("controllCenter")){r[t].parentNode.removeChild(r[t]);break}}s.parameterVo.isTeacher()?c.setDefaultStyle():(s.parameterVo.isOberverTeacher()||s.parameterVo.isGameReplay())&&c.setObserverStyle()},t.prototype.reset=function(){e.prototype.reset.call(this),this._mouseName="auto",this._isShowControllUI=!0,this._controllerId=s.controllState.controllerId,this._teachingMode=o.TEACHING_MODE.TYPE_TEACHING},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t.prototype.onTeacherModle=function(){this.teahcerModle(),this._controller.dispatcherCMD(a.TEACH_MODLE_CHANGE,this._teachingMode,!1),u.default.instance().recordTransceiver.send(l.CLICK_MAIN)},t.prototype.teahcerModle=function(){this._teachingMode!==o.TEACHING_MODE.TYPE_TEACHING&&(this._teachingMode=o.TEACHING_MODE.TYPE_TEACHING,s.controllState.teachingMode=this._teachingMode,this._studentsView&&this._studentsView.hideStudentsView(),this.initMenuContent(d.MENU_TYPE.GAME),this.updateChangeSceneState(),this.displayControll(this._isShowControllUI))},t.prototype.onSplitModle=function(){this.spliteModle(),this._controller.dispatcherCMD(a.TEACH_MODLE_CHANGE,this._teachingMode,!1),u.default.instance().recordTransceiver.send(l.CLICK_SPLIT)},t.prototype.spliteModle=function(){this._teachingMode!==o.TEACHING_MODE.TYPE_INSPECTION&&(this._teachingMode=o.TEACHING_MODE.TYPE_INSPECTION,s.controllState.teachingMode=this._teachingMode,this.initMenuContent(d.MENU_TYPE.SPLIT),this.updateSplitFrames())},t.prototype.initStyle=function(){s.parameterVo.isTeacher()?c.setDefaultStyle():(s.parameterVo.isOberverTeacher()||s.parameterVo.isGameReplay())&&c.setObserverStyle()},t.prototype.initMenuContaner=function(){e.prototype.initMenuContaner.call(this),this._studentsView=new h.default,document.body.appendChild(this._studentsView.container)},t.prototype.initMenuData=function(){this._menuShowItems[d.MENU_TYPE.GAME]=["prev","next","prevCheck","nextCheck","split","controll","play"],this._menuHideItems[d.MENU_TYPE.GAME]=["prevCheck","nextCheck","play"],this._menuShowItems[d.MENU_TYPE.SPLIT]=["split","prevCheck","nextCheck"],this._menuHideItems[d.MENU_TYPE.SPLIT]=["prevCheck","nextCheck"]},t.prototype.initClickEvent=function(){e.prototype.initClickEvent.call(this);this._studentsView&&this._studentsView.initMenuContent(this._components),this._components.controll&&(this._components.controll.onClick=this.onControllClick.bind(this)),this._components.split&&(this._components.split.onClick=this.onSplitClick.bind(this))},t.prototype.onPrePageClick=function(){if(s.sceneState.state!==o.TYPE_SCENE.TYPE_LOADING||0!==s.sceneState.curIndex){this._controller.dispatcherHandle("gamePrevScene",null,!0);var e={preSceneIndex:s.sceneState.curIndex-1};u.default.instance().recordTransceiver.send(l.LASTPAGE,e)}},t.prototype.onNextPageClick=function(){if(s.sceneState.state!==o.TYPE_SCENE.TYPE_LOADING||0!==s.sceneState.curIndex){this._controller.dispatcherHandle("gameNextScene",null,!0);var e={nextSceneIndex:s.sceneState.curIndex+1};u.default.instance().recordTransceiver.send(l.NEXTPAGE,e)}},t.prototype.onControllClick=function(){s.sceneState.state!==o.TYPE_SCENE.TYPE_LOADING&&("teacher"===this._components.controll.status?this.onTeacherControll():this.onFreeControll())},t.prototype.onSplitClick=function(){"full"===this._components.split.status?this.onTeacherModle():this.onSplitModle()},t.prototype.onMouseOver=function(){this._mouseName=document.body.style.cursor,this._controller.dispatcherHandle("gameMouseLeave",null,!1)},t.prototype.onMouseOut=function(){this._teachingMode===o.TEACHING_MODE.TYPE_TEACHING&&this._controller.dispatcherHandle("gameMouseEnter",this._mouseName,!1)},t.prototype.onTeacherControll=function(){this._controllerId!==s.parameterVo.userId&&(this._controllerId=s.parameterVo.userId,this._controller.dispatcherCMD(a.CONTROLLER_CHANGE,this._controllerId,!1),this.updateChangeSceneState(),u.default.instance().recordTransceiver.send(l.CLICK_TEACHER_CONTROL))},t.prototype.onFreeControll=function(){"-1"!==this._controllerId&&(this._controllerId="-1",this._controller.dispatcherCMD(a.CONTROLLER_CHANGE,this._controllerId,!1),this.updateChangeSceneState(),u.default.instance().recordTransceiver.send(l.CLICK_FREE_CONTROL))},t.prototype.updateChangeSceneState=function(){o.TEACHING_MODE.TYPE_TEACHING===this._teachingMode&&(s.controllState.isFullOwn()||s.controllState.isOberverFullOwn()||s.controllState.isReplayFullOwn())?(this._components.prev.show(),this._components.next.show(),this.updateChangePageState()):(this._components.prev.hide(),this._components.next.hide())},t}(p.default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._controller=e,this.reset()}return e.prototype.reset=function(){},e.prototype.destroy=function(){this._controller=null},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(113),s=r(1),a=r(3),c=r(5),l=r(10),u=function(){function e(){this.PAGE_COUNT=4,this.reset(),this.initContainer()}return Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._curPage=0,this._totalPage=1,this._userIds=[],this._studentViews=[],this._pageCodes=[],this._isFirstInit=!0,this._isFull=!1},e.prototype.destroy=function(){this.reset(),this.removeStudentsView()},e.prototype.updateStudents=function(){var e,t,r=0;for(e=n.userInfos.getCount(),r=0;r<e;r++)(t=n.userInfos.getUserInfoByIndex(r)).role===i.USER_ROLE.STUDENT&&-1===this._userIds.indexOf(t.userId)&&this._userIds.push(t.userId);this._userIds.sort(),this.updatePageState(),this.updateStudentsView()},e.prototype.updateStudentsView=function(){var e,t,r,i,s=0,a="";for(t=this._curPage*this.PAGE_COUNT,e=Math.max(Math.min(this._userIds.length,this.PAGE_COUNT),this._studentViews.length),s=0;s<e;s++)s>=this._studentViews.length?((i=new o.default).scaleFun=this.scaleView.bind(this),this._studentViews.push(i),this._container.insertBefore(i.container,this._pageContainer)):i=this._studentViews[s],s+t<this._userIds.length?(a=this._userIds[s+t],r=n.userInfos.getUserInfoById(a),i.updateUserInfo(r),i.isActive=!0):i.isActive=!1;this.showStudentsView(),this._isFirstInit||this.synchronizeIframes()},e.prototype.showStudentsView=function(){var e,t=0;for(e=this._studentViews.length,t=0;t<e;t++)this._studentViews[t].show();document.body.className="",document.body.classList.add("inspliting"),this._container.style.display="block";var r=this._isFull?this.PAGE_COUNT:this._studentViews.length;document.body.classList.add("split"+r)},e.prototype.hideStudentsView=function(){var e,t=0;for(e=this._studentViews.length,t=0;t<e;t++)this._studentViews[t].hide();this._container.style.display="none",document.body.classList.remove("inspliting"),document.body.classList.remove("split"+this._studentViews.length),this._curPage=0,this._isFull=!1},e.prototype.deleteStudentView=function(e){var t,r,n=0,i=-1;for(t=e.length,n=0;n<t;n++)-1!==(i=this._userIds.indexOf(e[n]))&&(this._userIds.splice(i,1),(r=this.getStudentViewById(e[n]))&&(r.isActive=!1,r.hide()))},e.prototype.deleteAll=function(){this.deleteStudentView(this._userIds)},e.prototype.dispatcherToStudents=function(e,t){var r,n,i=0;for(r=this._studentViews.length,i=0;i<r;i++)n=this._studentViews[i],"-1"===t?e.sendId===n.userId&&n.sendPacket(e):""!==t&&n.sendPacket(e)},e.prototype.dispatcherToStudent=function(e,t){var r;(r=this.getStudentViewById(t))&&r.sendPacket(e)},e.prototype.synchronizePacket=function(e){var t;(t=this.getStudentViewById(e.userId))?t.synchronizePacket():s.warn("SDKStudentView userInfo change exit........",e.userId,this._studentViews)},e.prototype.splitGameReady=function(e){var t;if(t=n.userInfos.getUserInfoById(e)){t.isSplitReady=!0;var r=this.getStudentViewById(e);r&&(r.isInit=!0),(n.parameterVo.isTeacher()||n.parameterVo.isOberverTeacher())&&(this.synchronizePacket(t),this._isFirstInit=!1)}else s.error("userInfo为空........")},e.prototype.setPageIndex=function(e,t){this._curPage===e&&this._isFull===t||(this._isFull=t,this._curPage=e,this.updatePageState(),this.updateStudentsView(),this.updateStudentsState(t))},e.prototype.synchronizeIframes=function(){var e,t=0;for(e=this._studentViews.length,t=0;t<e;t++)this._studentViews[t].synchronizePacket()},e.prototype.getStudentViewById=function(e){var t,r,n=0;for(t=this._studentViews.length,n=0;n<t;n++)if((r=this._studentViews[n]).userId==e)return r;return null},e.prototype.getStudentViewIndex=function(e){var t,r=0;for(t=this._studentViews.length,r=0;r<t;r++)if(this._studentViews[r].userId==e)return r;return-1},e.prototype.removeStudentsView=function(){var e,t,r=0;for(e=this._studentViews.length,r=0;r<e;r++)t=this._studentViews[r],this._container.removeChild(t.container),t.destory();this._studentViews=[]},e.prototype.initContainer=function(){this._container=document.createElement("div"),this._container.setAttribute("id","childIframes"),this._container.style.display="none",this._container.style.backgroundColor="#20222A",this._pageContainer=document.createElement("div"),this._pageContainer.setAttribute("id","pageContainer"),this._container.appendChild(this._pageContainer),this.initPageCode()},e.prototype.initMenuContent=function(e){this._components=e,e.prevCheck&&(e.prevCheck.onClick=this.onPrevPage.bind(this)),e.nextCheck&&(e.nextCheck.onClick=this.onNextPage.bind(this))},e.prototype.updatePageState=function(){this.PAGE_COUNT=this._isFull?1:n.gameConfig.splitPageNumber,0==this._userIds.length?this._totalPage=1:this._totalPage=Math.ceil(this._userIds.length/this.PAGE_COUNT),this._curPage>=this._totalPage&&(this._curPage=this._totalPage-1),this._curPage<0&&(this._curPage=0),this._curPage>0?this._components.prevCheck.show():this._components.prevCheck.hide(),this._curPage<this._totalPage-1?this._components.nextCheck.show():this._components.nextCheck.hide(),n.controllState.splitPage=this._curPage,n.controllState.isSplitFull=this._isFull,this.dispatcherCMD(c.TEACH_SPLIT_PAGE_CHANGE),this.initPageCode()},e.prototype.onNextPage=function(){var e;this._curPage++,this.updatePageState(),this.updateStudentsView(),e=this._isFull?l.SPLIT_SCRREN_FULL_NEXT_PAGE:l.SPLIT_SCRREN_NEXT_PAGE,a.default.instance().newRecordTransceiver.send(e,{pageIndex:this._curPage})},e.prototype.onPrevPage=function(){var e;this._curPage--,this.updatePageState(),this.updateStudentsView(),e=this._isFull?l.SPLIT_SCRREN_FULL_PRE_PAGE:l.SPLIT_SCRREN_PRE_PAGE,a.default.instance().newRecordTransceiver.send(e,{pageIndex:this._curPage})},e.prototype.dispatcherCMD=function(e){n.parameterVo.isTeacher()&&a.default.instance().transceiver.sendMsg(e,{pageIndex:this._curPage,isFull:this._isFull},!1)},e.prototype.initPageCode=function(){var e,t,r=0;if(this._pageContainer.style.display=this._totalPage<=1?"none":"block",1!=this._totalPage){for(e=Math.max(this._totalPage,this._pageCodes.length),r=0;r<e;r++)r>=this._totalPage&&r<this._pageCodes.length?(t=this._pageCodes[r]).style.display="none":(r<this._pageCodes.length?t=this._pageCodes[r]:((t=document.createElement("div")).setAttribute("id","pageNode"+(r+1)),this._pageCodes.push(t),this._pageContainer.appendChild(t)),t.style.display="block",r==this._curPage?t.className="pageCodeRed":t.className="pageCodeGray");this._pageContainer.style["margin-left"]=-(8*(this._totalPage-1)+4*this._totalPage+10)/2+"px"}},e.prototype.scaleView=function(e,t){if(!(this._studentViews.length<=1)){var r,i=this.getStudentViewIndex(e);if(-1!=i)r=t?this._curPage*this.PAGE_COUNT+i:Math.floor(this._curPage/n.gameConfig.splitPageNumber),this.setPageIndex(r,t)}},e.prototype.updateStudentsState=function(e){var t,r=0;for(t=this._studentViews.length,r=0;r<t;r++)e?0==r&&this._studentViews[r].setScaleState(e):this._studentViews[r].setScaleState(e)},e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(4),o=r(5),s=r(6),a=r(7),c=r(8),l=r(10),u=r(15),p=r(3),d=function(){function e(){this.reset(),this.initContainer()}return Object.defineProperty(e.prototype,"scaleFun",{set:function(e){this._scaleFun=e},enumerable:!0,configurable:!0}),e.prototype.sendPacket=function(e){this._iframe&&this._iframe.contentWindow.postMessage(e,"*")},e.prototype.updateUserInfo=function(e){!this._iframe||this._isInit?(this._userId=e.userId,this._userInfo=e,this._iframe&&this._isInit&&(n.parameterVo.isReplay()&&this._userInfo.isSplitReady&&this.replayResumeUserView(),this._userInfo.isSplitReady=!0),this._iframe?(this.changeUserInfo(),this.updateUI()):this.createIframe()):this._tempUserInfo=e},e.prototype.setScaleState=function(e){var t=e?"full":"normal";this._scale.setStatus(t)},e.prototype.synchronizePacket=function(){var e,t,r=0;if(this._isShow&&-1!==(r=this._userInfo.getLastMainIndex()))for(e=this._userInfo.count();r<e;r++){var n=(t=this._userInfo.getPacketByIndex(r)).data,i=t.name;-1===o.EVENTS_LIST.indexOf(t.name)&&("gameChangeScene"!==t.name&&t.isMainFrame&&this.checkChangeScene(t),this.sendPacket(t),"gameChangeScene"===i&&this.initScene(n))}},e.prototype.show=function(){this._userInfo.isActive&&this._isActive?(this._iframe.style.display="block",this._isShow=!0):(this._iframe.style.display="none",this._isShow=!1),this.updateUI()},e.prototype.hide=function(){this._iframe.style.display="none",this._isShow=!1,this.updateUI()},e.prototype.reset=function(){this._userId="",this._userInfo=null,this._isInit=!1,this._isShow=!1,this._clickTime=0,this._container=null,this._iframe=null,this._tfName=null},e.prototype.destory=function(){this.reset()},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInit",{get:function(){return this._isInit},set:function(e){this._isInit=e,this._isInit&&this._tempUserInfo&&(this.updateUserInfo(this._tempUserInfo),this.synchronizePacket(),this._tempUserInfo=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{set:function(e){this._isActive=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),e.prototype.updateUI=function(){this._userInfo&&(this._tfName.innerText="学生"+this._userInfo.name),this._isActive||(this._tfName.innerText=""),this.updateBtnState(this._refresh),this.updateBtnState(this._scale),this._bg.style.display=this._isShow?"block":"none",this._isShow?this._evtDiv.style.background="":this._evtDiv.style.background="#2A2C37"},e.prototype.updateBtnState=function(e){e&&(this._isShow?e.show():e.hide())},e.prototype.checkChangeScene=function(e){var t;t=s.default.Acquire(e.name),e.clone(t),t.name="gameChangeScene",t.sendId=n.parameterVo.userId,t.data=e.secene,this.sendPacket(t)},e.prototype.initScene=function(e){var t;(t=s.default.Acquire("gameSceneReset")).sendId=n.parameterVo.userId,t.isMainFrame=!1,t.data=e,this.sendPacket(t)},e.prototype.initContainer=function(){var e=document.createElement("div");e.classList.add("sdk-child"),e.style.overflowX="hidden",e.style.overflowY="hidden",this._container=e},e.prototype.changeUserInfo=function(){var e;(e=s.default.Acquire(o.SET_SUB_IFRAME_INFO)).data={userId:this._userId,name:this._userInfo.name},this.sendPacket(e)},e.prototype.replayResumeUserView=function(){var e;(e=a.default.instance().getController(c.REPLAY))&&e.replayResumeUserView(this._userInfo.userId)},e.prototype.onDoubleClick=function(){if(this._isShow)if(this._isInit){var e="normal"===this._scale.status;this.setScaleState(e);var t=l.SPLIT_SCRREN_DOUBLE_TOMAX;e||(t=l.SPLIT_SCRREN_DOUBLE_TOMIN),p.default.instance().newRecordTransceiver.send(t,{userId:this._userId}),this.onScale(null)}else this._scale.setStatus("normal")},e.prototype.onRefresh=function(){if(this._iframe){var e=(new Date).getTime();e-this._clickTime>5e3&&(this._clickTime=e,this._isInit&&(this._tempUserInfo=this._userInfo),this._isInit=!1,this._userInfo.isSplitReady=!1,this._iframe.src=this.createStudentUrl(this._userId),p.default.instance().newRecordTransceiver.send(l.SPLIT_SCREEN_REFRESH,{userId:this._userId}))}},e.prototype.onScale=function(e){if(this._isInit){var t="full"===this._scale.status;if(this._scaleFun(this._userId,t),e){var r=l.SPLIT_SCRREN_CLICK_TOMAX;t||(r=l.SPLIT_SCRREN_CLICK_TOMIN),p.default.instance().newRecordTransceiver.send(r,{userId:this._userId})}}else this._scale.status="normal"},e.prototype.createIframe=function(){var e=document.createElement("iframe");e.src=this.createStudentUrl(this._userId),e.setAttribute("border","none"),e.classList.add("sdk-child-iframe"),e.style.overflowX="hidden",e.style.overflowY="hidden",this._container.appendChild(e);var t=document.createElement("div");t.classList.add("sdk-child-name"),t.innerText="学生"+this._userInfo.name,this._container.appendChild(t);var r=document.createElement("div");r.classList.add("sdk-child-event"),r.ondblclick=this.onDoubleClick.bind(this),this._container.appendChild(r),this._evtDiv=r;var i=document.createElement("div");if(i.classList.add("sdk-child-bg"),this._bg=i,this._container.appendChild(i),n.parameterVo.isTeacher()){var o=new u.DOMButton(u.SDKControllerUIComponents.refresh,this);o.onClick=this.onRefresh.bind(this),this._container.appendChild(o.domElem),this._refresh=o}this._scale=new u.DOMCheckbox(u.SDKControllerUIComponents.scale,this),this._container.appendChild(this._scale.domElem),this._scale.onClick=this.onScale.bind(this),this._iframe=e,this._tfName=t},e.prototype.createStudentUrl=function(e){var t=n.parameterVo.clone();return t.userId=e,t.role=i.USER_ROLE.STUDENT,t.usage=i.GAME_TYPE.SPLITSCREEN,t.parentUsage=n.parameterVo.usage,t.getUrl()},e}();t.default=d},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.initMenuContent=function(t){e.prototype.initMenuContent.call(this,t),this.updateChangePageState()},t}(r(17).default);t.default=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(4),s=r(0),a=r(5),c=r(15),l=r(10),u=r(3),p=r(1),d=function(e){function t(t){var r=e.call(this,t)||this;return r.setController(r._controllerId),r}return i(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._mouseName="auto",this._isShowControllUI=!0,this._controllerId=s.controllState.controllerId},t.prototype.setController=function(e){this._controllerId=e,this._controllerId==s.parameterVo.userId?this._components.controll.setStatus("teacher"):this._components.controll.setStatus("student"),this.updateChangeSceneState()},t.prototype.updateChangePageState=function(){s.sceneState.isLastScene()?this._components.next.hide():this._components.next.show()},t.prototype.displayControll=function(e){this._isShowControllUI=e,e?this._components.controll.show():this._components.controll.hide()},t.prototype.updatePageState=function(){s.controllState.isFullOwn()&&this.updateChangePageState()},t.prototype.updateViewStyle=function(){var e,t=0,r=window.publicStyle.childNodes;for(e=r.length;t<e;t++){if(r[t]&&r[t].parentNode)if(-1!=r[t].data.indexOf("controllCenter")){r[t].parentNode.removeChild(r[t]);break}}s.repairInfo.isRecordPalying()?c.setDefaultStyle():(c.setObserverStyle(),u.default.instance().thirdInterface.isHandMouse()&&(u.default.instance().thirdInterface.showSystemMouse(),this._mouseName=document.body.style.cursor,p.info("mouseState:",document.body.style.cursor))),this._components.controll.domElem.style.right="0.15rem"},t.prototype.initMenuData=function(){this._menuShowItems[o.MENU_TYPE.GAME]=["prev","next","controll"],this._menuHideItems[o.MENU_TYPE.GAME]=["prev"]},t.prototype.initClickEvent=function(){e.prototype.initClickEvent.call(this);this._components.controll&&(this._components.controll.onClick=this.onControllClick.bind(this))},t.prototype.onNextPageClick=function(){s.sceneState.state==o.TYPE_SCENE.TYPE_LOADING&&0==s.sceneState.curIndex||this._controller.dispatcherHandle("gameNextScene",null,!0)},t.prototype.onControllClick=function(){s.sceneState.state!==o.TYPE_SCENE.TYPE_LOADING&&("teacher"===this._components.controll.status?this.onTeacherControll():this.onFreeControll())},t.prototype.onMouseOver=function(){this._mouseName=document.body.style.cursor,this._controller.dispatcherHandle("gameMouseLeave",null,!1)},t.prototype.onMouseOut=function(){this._controller.dispatcherHandle("gameMouseEnter",this._mouseName,!1)},t.prototype.onTeacherControll=function(){this._controllerId!=s.parameterVo.userId&&(this._controllerId=s.parameterVo.userId,this._controller.dispatcherCMD(a.CONTROLLER_CHANGE,this._controllerId,!1),this._controller.dispatcherCMD(a.REPAIR_CONTROLLER_CHANGE,this._controllerId,!1),this.updateChangeSceneState(),u.default.instance().recordTransceiver.send(l.CLICK_TEACHER_CONTROL))},t.prototype.onFreeControll=function(){"-1"!=this._controllerId&&(this._controllerId="-1",this._controller.dispatcherCMD(a.CONTROLLER_CHANGE,this._controllerId,!1),this._controller.dispatcherCMD(a.REPAIR_CONTROLLER_CHANGE,this._controllerId,!1),this.updateChangeSceneState(),u.default.instance().recordTransceiver.send(l.CLICK_FREE_CONTROL))},t.prototype.updateChangeSceneState=function(){s.controllState.isFullOwn()?(this._components.next.show(),this.updateChangePageState()):this._components.next.hide(),s.repairInfo.recordType!=o.TYPE_RECORD.GAME?(this._components.next.hide(),this._components.controll.setEnable(!1)):(this._components.next.show(),this.updateChangePageState(),s.repairInfo.isControllerChange?this._components.controll.setEnable(!1):this._components.controll.setEnable(!0))},t}(r(17).default);t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(0),o=r(4),s=r(5),a=r(1),c=function(){function e(){this._packets=[],this._messageHanlers={}}return e.prototype.saveUserMessage=function(e){var t,r,o,a=0;for(o=i.userInfos.getCount(),a=0;a<o;a++)(t=i.userInfos.getUserInfoByIndex(a))&&(-1===s.EVENTS_LIST.indexOf(e.name)&&"-1"===i.controllState.controllerId&&e.sendId!==t.userId||this.isNeedSave(e)&&(r=n.default.Acquire(e.name),e.clone(r),t.addPacket(r)))},e.prototype.recevieMsg=function(e){for(this._packets.push(e);this._packets.length>0;)this.messageHandle()},e.prototype.sendToReceive=function(e){if(this.saveUserMessage(e),i.parameterVo.isTeacher()&&i.controllState.isFullOwn()&&i.controllState.teachingMode===o.TEACHING_MODE.TYPE_INSPECTION){var t=n.default.Acquire(e.name);e.clone(t),this.dispatcherSubIframe(t)}this.dispatcherMessage(e)},e.prototype.dispatcherCMD=function(e){this.dispatcherMessage(e)},e.prototype.notifyCMD=function(e,t){var r;void 0===t&&(t=null),(r=n.default.Acquire(e)).data=t,this.dispatcherMessage(r)},e.prototype.registerHandler=function(e,t){this._messageHanlers[e]=t},e.prototype.unRegisterHandler=function(e){this._messageHanlers[e]=null,delete this._messageHanlers[e]},e.prototype.getHandler=function(e){return this._messageHanlers[e]?new this._messageHanlers[e]:(-1===s.EVENT_NO_EXCUTE.indexOf(e)&&a.error("消息对应的命令不存在.....[",e+"]"),null)},e.prototype.reset=function(){var e,t=0;for(e=this._packets.length,t=0;t<e;t++)n.default.Release(this._packets[t]);this._packets=[]},e.prototype.destroy=function(){this.reset(),this._packets=null,this._messageHanlers=null},e.prototype.messageHandle=function(){var e;if(0!==this._packets.length)if(e=this._packets.shift(),i.parameterVo.isSplitScreen())this.dispatcherMessage(e);else if(e.sendId!==i.parameterVo.userId||""===i.parameterVo.userId){if(-1!==s.EVENT_CHECK.indexOf(e.name)&&e.name===s.VIDEO_PROCESS)return i.parameterVo.isTeacher()&&i.controllState.teachingMode===o.TEACHING_MODE.TYPE_INSPECTION&&this.dispatcherSubIframe(e),void this.observeMsgHandle(e);if(-1!==s.EVENTS_LIST.indexOf(e.name)||-1!==s.EVENT_CHECK.indexOf(e.name))return this.isNeedSave(e)&&this.saveUserMessage(e),void this.dispatcherMessage(e);this.saveUserMessage(e),this.classMsgHandle(e),this.observeMsgHandle(e)}},e.prototype.classMsgHandle=function(e){i.parameterVo.isStudent()&&(i.controllState.isOwn()||this.dispatcherMessage(e)),i.parameterVo.isTeacher()&&(i.controllState.isOwn()?i.controllState.teachingMode===o.TEACHING_MODE.TYPE_INSPECTION&&this.dispatcherSubIframe(e):i.controllState.teachingMode===o.TEACHING_MODE.TYPE_TEACHING?""!==i.controllState.controllerId&&e.sendId===i.controllState.controllerId&&this.dispatcherMessage(e):this.dispatcherSubIframe(e))},e.prototype.observeMsgHandle=function(e){i.parameterVo.isGameObserver()&&(this.packetIsObserved(e)?i.parameterVo.isOberverTeacher()?i.controllState.teachingMode===o.TEACHING_MODE.TYPE_TEACHING?e.sendId!==i.controllState.controllerId&&e.sendId!==i.parameterVo.observerId||this.dispatcherMessage(e):this.dispatcherSubIframe(e):this.dispatcherMessage(e):a.error("监课数据包异常",e.name))},e.prototype.packetIsObserved=function(e){var t,r=!0;if(""===e.sendId)return a.error("消息发送者为空",e.name),void(r=!1);if(""===i.parameterVo.observerId)return r=!1,void a.error("被监视的对象为空",e.name);if(!(t=i.userInfos.getUserInfoById(i.parameterVo.observerId)))return r=!1,a.error("被监视的对象为不存在......",e.name,i.parameterVo.observerId),void a.error("伙伴列表......",i.userInfos);if(t.role===o.USER_ROLE.STUDENT){if("-1"===i.controllState.controllerId){if(e.sendId!==t.userId)return r=!1,void a.error("被监视的对象与包的发送者不同1",e.name,e.sendId,t.userId)}else if(""!==i.controllState.controllerId&&e.sendId!==i.controllState.controllerId)return r=!1,void a.error("被监视的对象与包的发送者不同2",e.name,e.sendId,t.userId)}else if(t.role===o.USER_ROLE.TEACHER&&!(t=i.userInfos.getUserInfoById(e.sendId)))return r=!1,void a.error("被监视的对象与包的发送者不同（老师）......",e.name);return r},e.prototype.isNeedSave=function(e){return-1===s.EVENTS_NO_SAVE.indexOf(e.name)&&-1===s.EVENT_CHECK.indexOf(e.name)},e.prototype.dispatcherMessage=function(e){var t;(t=this.getHandler(e.name))?(t.packet=e,t.run(e.data)):-1===s.EVENT_NO_EXCUTE.indexOf(e.name)&&(a.error("没有注册命令:........[",e.name+"]"),a.error("已注册的命令:........",this._messageHanlers))},e.prototype.dispatcherSubIframe=function(e){var t;(t=this.getHandler(s.DISPATCHER_TO_SUBIFRAME))&&(t.packet=e,t.run(e.data))},e}();t.default=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),s=r(18),a=r(6),c=r(19),l=r(0),u=r(5),p=r(7),d=r(8),h=r(4),f=r(16),_=r(118),y=r(1),m=r(9),E=function(e){function t(){var t=e.call(this)||this;return t.changeScene="gameChangeScene",t}return i(t,e),t.prototype.update=function(e){var t,r;this._isPlay&&(this._duration+=this._replayInfo.speed*e*1e3,this._replayInfo.duration=this._duration,0!==l.parameterVo.replayMobiles.length?(t=l.parameterVo.gameId,l.parameterVo.isReplayTeacher()&&l.controllState.teachingMode===h.TEACHING_MODE.TYPE_INSPECTION?this.splitRender():(r=l.parameterVo.replayId,this.notifyCMD(t,r,this._startIndex))):y.error("回放replayMobiels参数有误......"))},t.prototype.stop=function(){this._isPlay=!1,o.default.instance().packetHandler.notifyCMD(u.GAME_STOP)},t.prototype.play=function(){var e,t;o.default.instance().packetHandler.notifyCMD(u.GAME_RESUME),0!==l.parameterVo.replayMobiles.length?(e=l.parameterVo.gameId,t=l.parameterVo.replayId,this._isPlay=!0,this._duration=0,this._startIndex=this.getStartIndex(e,t,this._replayInfo.curTime()),this.updateOnlineState(t,!0),this.parseGlobleInfo(),this.syncScene(),this.update(0)):y.error("回放replayMobiels参数有误......")},t.prototype.changeUserRole=function(e){var t,r,n=0;for(t=e.length,n=0;n<t;n++)void 0!==this._splitStartIndex[e[n]]&&delete this._splitStartIndex[e[n]];r=this.getDashBoradController(),e.length>0&&r&&r.deleteUsers(e),r&&r.updateUsers()},t.prototype.replayResumeUserView=function(e){l.controllState.teachingMode===h.TEACHING_MODE.TYPE_INSPECTION&&this.updateSubIframe(e)},t.prototype.reset=function(){e.prototype.reset.call(this),this._isPlay=!1,this._duration=0,this._isSplit=!1,this._controlllerId="",this._splitStartIndex={},this._replayInfo=l.ReplayInfo,this._offlinePackets={}},t.prototype.constructorViews=function(){e.prototype.constructorViews.call(this),l.parameterVo.isGameReplay()&&(this._replayView=new _.default(this),this._views.push(this._replayView))},t.prototype.splitRender=function(){var e,t,r,n,i=0;for(t=l.parameterVo.gameId,e=l.parameterVo.replayMobiles.length,i=0;i<e;i++)if((r=l.parameterVo.replayMobiles[i])!==l.parameterVo.replayId){if((n=l.userInfos.getUserInfoById(r)).role!==h.USER_ROLE.STUDENT)continue;n.isSplitReady&&void 0!==this._splitStartIndex[r]?this.notifyCMD(t,r,this._splitStartIndex[r]):void 0===this._splitStartIndex[r]&&this.checkSubIframeReady(r)}else r===l.parameterVo.replayId&&this.checkChangeModle()},t.prototype.updateSubIframe=function(e){var t;if(t=l.parameterVo.gameId,l.userInfos.getUserInfoById(e).isSplitReady){var r=this._replayInfo.getReplayStartIndex(t,e,this._replayInfo.curTime());(!this._splitStartIndex[e]||this._splitStartIndex[e]<r)&&(this._splitStartIndex[e]=r),l.parameterVo.replayType===h.TYPE_REPLAY.TRAIN?this.syncTrainPacket(e):this.syncDispatch(t,e,r,e)}},t.prototype.checkSubIframeReady=function(e){var t;t=l.parameterVo.gameId,l.userInfos.getUserInfoById(e).isSplitReady&&(this._splitStartIndex[e]=this._replayInfo.getReplayStartIndex(t,e,this._replayInfo.curTime()),l.parameterVo.replayType===h.TYPE_REPLAY.TRAIN?this.syncTrainPacket(e):this.syncDispatch(t,e,this._splitStartIndex[e],e),y.info("分屏结束......",e,this._splitStartIndex[e]))},t.prototype.syncTrainPacket=function(e){var t,r,n;t=l.parameterVo.gameId,r=l.parameterVo.replayId,n=this.getStartIndex(t,r,this._replayInfo.curTime()),this.syncDispatch(t,r,n,e)},t.prototype.getStartIndex=function(e,t,r){return this._replayInfo.getReplayStartIndex(e,t,r)},t.prototype.checkChangeModle=function(){var e,t,r,n;(r=l.parameterVo.gameId,t=l.parameterVo.userId,!(e=this._replayInfo.getReplayPacketByIndex(r,t,this._startIndex))||e.relativeTime>this._replayInfo.curTime())||(n=a.default.Acquire(e.name),e.clone(n),o.default.instance().packetHandler.dispatcherCMD(n),this._startIndex++)},t.prototype.notifyCMD=function(e,t,r){var n,i;this._isSplit=l.controllState.teachingMode===h.TEACHING_MODE.TYPE_INSPECTION,i=r;do{if(n=this._replayInfo.getReplayPacketByIndex(e,t,i),m.isEmpty(n))return;if(n.relativeTime<=this._replayInfo.curTime()){var s;if(s=a.default.Acquire(n.name),n.clone(s),y.info("回放数据包...",s.name,i,t,e,s.isOnline),this._isSplit){var c=this.getDashBoradController();c&&c.notifySubIframe(s,t),this._splitStartIndex[t]++,i=this._splitStartIndex[t]}else o.default.instance().packetHandler.dispatcherCMD(s),this._startIndex++,i=this._startIndex;this.updateOnlineState(t,n.isOnline)}else if(n.relativeTime>this._replayInfo.curTime())break}while(n)},t.prototype.updateOnlineState=function(e,t){l.parameterVo.replayId===e&&this._replayView.updateOnlineState(t),this.updateSplitOnlineState(e,t)},t.prototype.updateSplitOnlineState=function(e,t){var r,n=!1;if(l.parameterVo.isReplayTeacher()){if(e!==l.parameterVo.replayId){if(r=l.userInfos.getUserInfoById(e),m.isEmpty(r))return;r.isActive!==t&&(n=!0),r.isActive=t}if(n&&l.controllState.teachingMode===h.TEACHING_MODE.TYPE_INSPECTION){var i=this.getDashBoradController();i&&i.updateUsers()}}},t.prototype.parseGlobleInfo=function(){var e,t,r,n,i,o,s=0,a=[];for(t=l.parameterVo.gameId,r=l.parameterVo.replayId,i=l.controllState.splitPage,o=l.controllState.isSplitFull,l.parameterVo.isReplayStudent()?this._controlllerId="":l.parameterVo.isReplayTeacher()&&(this._controlllerId=l.parameterVo.replayId),this._isSplit=!1,e=this._replayInfo.getPacketsCount(r,t),s=0;s<e&&!((n=this._replayInfo.getReplayPacketByIndex(t,r,s)).relativeTime>this._replayInfo.curTime());s++)n.name===u.CONTROLLER_CHANGE&&(this._controlllerId=n.data),l.parameterVo.isReplayTeacher()&&(n.name===u.TEACH_MODLE_CHANGE&&(this._isSplit=1===n.data),n.name===u.TRAIN_USERS_CHANGE&&(a=n.data),n.name===u.TEACH_SPLIT_PAGE_CHANGE&&(i=n.data.pageIndex,o=n.data.isFull));l.controllState.controllerId=this._controlllerId,l.controllState.splitPage=i,l.controllState.isSplitFull=o,this.changeState(),l.parameterVo.replayType===h.TYPE_REPLAY.TRAIN&&this.changeIframes(a)},t.prototype.changeState=function(){if(o.default.instance().packetHandler.notifyCMD(u.CONTROLLER_CHANGE,this._controlllerId),l.parameterVo.isReplayTeacher()){var e=void 0;(e=this.getDashBoradController())&&(e.setController(this._controlllerId),e.teachModleChange(this._isSplit?1:0),e.teachSplitPageChange(l.controllState.splitPage,l.controllState.isSplitFull))}},t.prototype.changeIframes=function(e){m.isEmpty(e)&&(e=[]),o.default.instance().packetHandler.notifyCMD(u.TRAIN_USERS_CHANGE,e)},t.prototype.syncScene=function(){var e,t,r;if(t=l.parameterVo.gameId,l.parameterVo.isReplayTeacher()&&this._isSplit){var n,i=0;for(n=l.parameterVo.replayMobiles.length,i=0;i<n;i++)if((e=l.parameterVo.replayMobiles[i])!==l.parameterVo.userId){if((r=l.userInfos.getUserInfoById(e)).role!==h.USER_ROLE.STUDENT)continue;if(!r.isSplitReady)continue;this._splitStartIndex[e]=this._replayInfo.getReplayStartIndex(t,e,this._replayInfo.curTime()),this.syncDispatch(t,e,this._splitStartIndex[e],e)}else this.syncDispatch(t,e,this._startIndex)}else e=l.parameterVo.replayId,this.syncDispatch(t,e,this._startIndex)},t.prototype.syncDispatch=function(e,t,r,n){var i;void 0===n&&(n=""),i=this._replayInfo.getReplayPacketByIndex(e,t,r),0===r&&((m.isEmpty(i)||""==i.secene||i.relativeTime>this._replayInfo.curTime())&&((i=new s.default).secene=l.sceneState.getSceneNameByIndex(0)),i.isMainFrame||(i=this.checkChangeScene(i))),this.syncPacket(i,n)},t.prototype.syncPacket=function(e,t){void 0===t&&(t="");var r,n,i,s=0;if(!(m.isEmpty(e)||e.relativeTime>this._replayInfo.curTime()))for(i=[],e.name!==this.changeScene&&e.isMainFrame&&(n=this.checkChangeScene(e))&&i.push(n),n=a.default.Acquire(e.name),e.clone(n),i.push(n),e.name===this.changeScene&&(n=this.initScene(e.data),i.push(n)),r=i.length,s=0;s<r;s++)if(n=i[s],""===t)o.default.instance().packetHandler.dispatcherCMD(n);else{var c=this.getDashBoradController();c&&c.notifySubIframe(n,t)}},t.prototype.checkChangeScene=function(e){var t;return m.isEmpty(e)||""===e.secene?null:((t=a.default.Acquire(e.name)).name=this.changeScene,t.isMainFrame=!0,t.data=e.secene,t)},t.prototype.initScene=function(e){var t;return(t=a.default.Acquire("gameSceneReset")).sendId=l.parameterVo.userId,t.isMainFrame=!1,t.data=e,t},t.prototype.getDashBoradController=function(){return p.default.instance().getController(d.WEB_DASHBORAD)},t.prototype.excuteOnlinePackets=function(e){var t,r,n,i,o=0;if(l.parameterVo.gameId,(r=this._offlinePackets[e])&&0!==r.getPacketsCount()){for(i=-1,n=r.getPacketsCount(),o=0;o<n;o++)(t=r.getPacketByIndex(o)).isMainFrame&&(i=o),t.name===u.CONTROLLER_CHANGE&&(this._controlllerId=t.data),l.parameterVo.isReplayTeacher()&&(t.name===u.TEACH_MODLE_CHANGE?this._isSplit=1===t.data:t.name===u.TEACH_SPLIT_PAGE_CHANGE&&(l.controllState.splitPage=t.data.pageIndex,l.controllState.isSplitFull=t.data.isFull));e===l.parameterVo.replayId&&(l.controllState.controllerId=this._controlllerId,this.changeState()),-1!==i?(t=r.getPacketByIndex(i),e===l.parameterVo.replayId?this.syncPacket(t):this.syncPacket(t,e),this.clearOfflinePackets(e)):this.clearOfflinePackets(e)}},t.prototype.addOfflinePacket=function(e,t){var r;this._offlinePackets[e]||(r=new f.default,this._offlinePackets[e]=r),(r=this._offlinePackets[e]).addPacket(t)},t.prototype.clearOfflinePackets=function(e){var t,r,n;for(void 0===e&&(e=""),r=l.parameterVo.replayMobiles.length,t=0;t<r;t++)n=l.parameterVo.replayMobiles[t],(""!==e&&n===e||""===e)&&this._offlinePackets[n]&&(this._offlinePackets[n].reset(),this._offlinePackets[n]=null)},t.prototype.notitySubIframeState=function(e){var t,r,n,i=0,o="";for(t=l.parameterVo.replayMobiles.length,i=0;i<t;i++)if(o=l.parameterVo.replayMobiles[i],(n=l.userInfos.getUserInfoById(o))&&n.role===h.USER_ROLE.STUDENT){var s=e?u.GAME_RESUME:u.GAME_STOP;r=a.default.Acquire(s);var c=this.getDashBoradController();c&&c.notifySubIframe(r,o)}},t}(c.default);t.default=E},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(15),s=r(17),a=r(4),c=function(e){function t(t){return e.call(this,t)||this}return i(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._isOnline=!0},t.prototype.updateOnlineState=function(e){this._isOnline=e,e?this._components.offline.hide():this._components.offline.show()},t.prototype.initStyle=function(){o.setObserverStyle()},t.prototype.initMenuContaner=function(){this._menuContainer=document.createElement("div"),this._menuContainer.setAttribute("id","extraContainer"),document.body.appendChild(this._menuContainer)},t.prototype.initMenuData=function(){this._menuShowItems[a.MENU_TYPE.GAME]=["offline"],this._menuHideItems[a.MENU_TYPE.GAME]=["offline"]},t}(s.default);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(120),i=r(13),o=r(10),s=r(6),a=r(0),c=r(4),l=r(1),u=r(3),p=function(){function e(){this.reset();var e="";e=a.parameterVo.enviroment===c.TYPE_ENVIRONMENT.PRODUCTION?i.RECORD_OUT_URL:i.RECORD_OUT_URL_TEST,this._httpClient=new n.default(e),l.info("日志URL",e)}return e.prototype.send=function(t,r,n,i){if(void 0===r&&(r={}),void 0===n&&(n=0),void 0===i&&(i=1),t&&""===t)l.error("埋点事件名称为空");else if(!a.parameterVo.isSplitScreen()){var o=s.default.AcquireRecord(t);o.event_para=r,o.event_type=n,o.event_value=i,o.event_id=this.getEventPreName()+o.event_id,this.appendParamsToPacket(o),e.SEND_COUNT++,this._httpClient.send(o),u.default.instance().newRecordTransceiver.send(t,r,n,i)}},e.prototype.sendPage=function(t,r,n,i){if(void 0===r&&(r=0),void 0===n&&(n={}),void 0===i&&(i=3),t&&""===t)l.error("埋点事件名称为空");else if(!a.parameterVo.isSplitScreen()){var o=s.default.AcquirePageRecord(t);o.expand=n,o.tracker_tpye=i,o.duration=r,o.page_name=this.getEventPreName()+o.name(),this.appendPageParamsToPacket(o),e.SEND_COUNT++,this._httpClient.send(o),u.default.instance().newRecordTransceiver.send(t,n,1,r)}},e.prototype.reset=function(){e.SEND_COUNT=0},e.prototype.destroy=function(){this._httpClient.destory(),this._httpClient=null},e.prototype.appendParamsToPacket=function(e){var t;e.user_id=a.parameterVo.userId,e.app_id=a.parameterVo.appId,e.session_id=a.parameterVo.sessionId,e.event_time_start=(new Date).getTime(),e.event_type===o.EVENT_TYPE.TYPE_COUNT&&(e.event_value=1),(t=e.event_para).gameId=a.parameterVo.gameId,t.scene=a.sceneState.curSceneName(),t.sceneIndex=a.sceneState.curIndex,a.parameterVo.isGameClass()?(t.lessonId=a.lessonInfo.lessonId,t.lessonUid=a.lessonInfo.lessonUID,t.lessonName=a.lessonInfo.courseName):a.parameterVo.isGameReplay()&&(t.lessonUid=a.parameterVo.lessonUid)},e.prototype.appendPageParamsToPacket=function(e){var t;e.user_id=a.parameterVo.userId,e.app_id=a.parameterVo.appId,e.session_id=a.parameterVo.sessionId,e.time_start=(new Date).getTime(),e.page_id=a.parameterVo.gameOrigin,(t=e.expand).gameId=a.parameterVo.gameId,t.scene=a.sceneState.curSceneName(),t.sceneIndex=a.sceneState.curIndex,a.parameterVo.isGameClass()?(t.lessonId=a.lessonInfo.lessonId,t.lessonUid=a.lessonInfo.lessonUID,t.lessonName=a.lessonInfo.courseName):a.parameterVo.isGameReplay()&&(t.lessonUid=a.parameterVo.lessonUid)},e.prototype.getEventPreName=function(){var e;return e="",a.parameterVo.isGamePreview()?e+=o.PREVIEW:a.parameterVo.isGameClass()?e+=o.STUDY:a.parameterVo.isGameObserver()?e+=o.WATCH:a.parameterVo.isReplay()&&(e+=o.REPLAY),a.parameterVo.isZMG()?u.default.instance().thirdInterface.isZMG2()?e+=o.ZMG2:e+=o.ZMG:a.parameterVo.isZML()&&(e+=o.ZML),e},e.SEND_COUNT=0,e}();t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),i=r(6),o=r(1),s=r(22),a=r(9),c=r(3),l=function(){function e(e,t,r){void 0===t&&(t="POST"),this._method="POST",this._method=t,this._data=e,this._callBack=r}return e.prototype.reset=function(){this._data&&(this._data instanceof n.default?i.default.ReleaseRecord(this._data):this._data instanceof s.default&&i.default.ReleasePageRecord(this._data))},e}(),u=function(){function e(e,t){void 0===e&&(e=""),void 0===t&&(t=1e4),this.reset(),this._url=e,this._timeOut=t,this.onUpdate()}return e.prototype.send=function(e,t,r){var n,i;void 0===t&&(t="POST"),void 0===r&&(r=null);var o,s=this;e&&(o=new l(e,t,r),this._commandVos.push(o),n=JSON.stringify(e),(i=this.getXmlHttpRequest()).open(t,this._url,!0),i.timeout=this._timeOut,i.onreadystatechange=function(){if(4===i.readyState&&i.status>=200&&i.status<300){var e=s._commandVos.indexOf(o);if(-1!==e)s._commandVos[e].reset(),s._commandVos.splice(e,1);a.isEmpty(r)||r(i.responseText)}else 4===i.readyState&&s.onError(null)},i.send(n))},e.prototype.reset=function(){this._url="",this._timeOut=1e4,this._commandVos=[],this._timeId=0,this._isError=!1},e.prototype.destory=function(){},e.prototype.reSend=function(){var e,t,r,n=0;if(this._isError)if(r=this._commandVos.slice(0),this._commandVos=[],o.info("重新发送日志"),r.length>10)o.error("网络有问题");else{for(e=r.length,n=0;n<e;n++)t=r[n],this.send(t._data,t._method,t._callBack);this._isError=!1}},e.prototype.getXmlHttpRequest=function(){var e,t=this;return(e=c.default.instance().thirdInterface.getXMLHttpRequest()).addEventListener("error",(function(e){t.onError(e)})),e.addEventListener("abort",(function(e){t.onError(e)})),e.addEventListener("timeout",(function(e){t.onError(e)})),e},e.prototype.onError=function(e){e&&console.log(e),this._isError=!0},e.prototype.onUpdate=function(){var e=this;clearTimeout(this._timeId),this._timeId=setTimeout((function(){e.reSend(),e.onUpdate()}),1e4)},e}();t.default=u},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),s=r(6),a=r(19),c=r(0),l=r(5),u=r(1),p=r(4),d=r(9),h=r(10),f=function(e){function t(){var t=e.call(this)||this;return t.changeScene="gameChangeScene",t}return i(t,e),t.prototype.update=function(e){this._isPlay&&(this._duration+=1e3*e,this._repairInfo.duration=this._duration,this.notifyCMD(this._startIndex))},t.prototype.stop=function(){u.info("暂停回放......",this._repairInfo.getkey(),this._startIndex+"/"+this._repairInfo.getPacketsCount()),this._isPlay=!1,this._repairInfo.isPlay=this._isPlay,o.default.instance().packetHandler.notifyCMD(l.GAME_STOP)},t.prototype.play=function(){o.default.instance().packetHandler.notifyCMD(l.GAME_RESUME),c.controllState.isOwn()||(this._duration=0,this._isPlay=!0,this._repairInfo.isPlay=this._isPlay,this._startIndex=this._repairInfo.getReplayStartIndex(this._repairInfo.curTime()),u.info("开始回放......",this._repairInfo.getkey(),this._startIndex+"/"+this._repairInfo.getPacketsCount()),this.parseGlobleInfo(),this.syncScene(),this.update(0),this.history())},t.prototype.notifyCMD=function(e){var t,r;r=e;do{if(t=this._repairInfo.getPacketByIndex(r),d.isEmpty(t))return;if(t.relativeTime<=this._repairInfo.curTime()){var n;n=s.default.Acquire(t.name),t.clone(n),this._isChange&&t.name==l.CONTROLLER_CHANGE?u.info("不执行数据包...",t.name,this._repairInfo.curTime()):(u.info("回放数据包...",n.name,r+"/"+this._repairInfo.getPacketsCount(),this._repairInfo.getkey()),o.default.instance().packetHandler.dispatcherCMD(n),t.name==l.CONTROLLER_CHANGE&&this.dispatcherController(t.data)),this._startIndex++,r=this._startIndex}else if(t.relativeTime>this._repairInfo.curTime())break}while(t)},t.prototype.dispatcherController=function(e){o.default.instance().transceiver.sendMsg(l.REPAIR_CONTROLLER_CHANGE,e,!1)},t.prototype.parseGlobleInfo=function(){var e,t,r=0;for(this._controlllerId="",this._isChange=!1,e=this._repairInfo.getPacketsCount(),r=0;r<e&&!((t=this._repairInfo.getPacketByIndex(r)).relativeTime>this._repairInfo.curTime());r++)t.name==l.CONTROLLER_CHANGE&&(this._controlllerId=t.data);"-1"==this._controlllerId&&(this._isChange=!0),c.repairInfo.playType!=p.TYPE_REPAIR_PLAY.ANSWER&&this.anserIsEmpty()||(this._controlllerId=""),c.controllState.controllerId=this._controlllerId,o.default.instance().packetHandler.notifyCMD(l.CONTROLLER_CHANGE,this._controlllerId)},t.prototype.syncScene=function(){var e;e=this._repairInfo.getPacketByIndex(this._startIndex),0==this._startIndex?this.syncPacket(this.checkChangeScene(e)):this.syncPacket(e),this.checkVideoPlay()},t.prototype.syncPacket=function(e){var t,r,n,i=0;if(!(d.isEmpty(e)||e.relativeTime>this._repairInfo.curTime()))for(n=[],e.name!=this.changeScene&&e.isMainFrame&&(r=this.checkChangeScene(e))&&n.push(r),r=s.default.Acquire(e.name),e.clone(r),n.push(r),e.name==this.changeScene&&(r=this.initScene(e.data),n.push(r)),t=n.length,i=0;i<t;i++)r=n[i],o.default.instance().packetHandler.dispatcherCMD(r)},t.prototype.checkVideoPlay=function(){var e,t,r=0;if(document.getElementsByClassName("cocosVideo")[0]){for(e=this._repairInfo.getPacketsCount(),r=0;r<e;r++)if((t=this._repairInfo.getPacketByIndex(r))&&"gameVideoPlay"===t.name)return;u.error("录播视频记录数据异常,没有视频播放关键帧"),o.default.instance().recordTransceiver.send(h.VIDEO_REPAIR_ERROR),(t=s.default.Acquire("gameVideoPlay")).secene=c.sceneState.curSceneName(),t.data=1,o.default.instance().packetHandler.dispatcherCMD(t)}},t.prototype.checkChangeScene=function(e){var t;if(d.isEmpty(e)||""==e.secene)return null;var r=c.sceneState.getSceneIndexByName(e.name);return-1==r||r!=c.repairInfo.sceneIndex||r==c.sceneState.curIndex?null:((t=s.default.Acquire(e.name)).name=this.changeScene,t.isMainFrame=!0,t.data=e.secene,t)},t.prototype.initScene=function(e){var t;return(t=s.default.Acquire("gameSceneReset")).sendId=c.parameterVo.userId,t.isMainFrame=!1,t.data=e,t},t.prototype.anserIsEmpty=function(){return"-1"==c.repairInfo.answerId||"0"==c.repairInfo.answerId},t.prototype.history=function(){if(this._isPlay&&c.repairInfo.playType==p.TYPE_REPAIR_PLAY.GAME){var e=c.parameterVo.userId,t=c.userInfos.getUserInfoById(String(e));if(t&&t.historyCount>0){u.info("处理历史数据中......"),t.historyCount=0;var r=[],n=t.getLastMainPacket();if(n){var i=void 0;n.name!=this.changeScene&&(i=s.default.Acquire(n.name),n.clone(i),r.push(i))}var a,l=0;for(a=r.length,l=0;l<a;l++)o.default.instance().packetHandler.dispatcherCMD(r[l])}}},t.prototype.reset=function(){e.prototype.reset.call(this),this._isPlay=!1,this._duration=0,this._controlllerId="",this._repairInfo=c.repairInfo},t}(a.default);t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(1),o=r(3),s=r(5),a=function(){function e(){this._target=window.parent&&window.parent.window}return e.prototype.send=function(e,t){if(void 0===t&&(t={}),e&&""===e)i.error("日志名称为空");else if(!n.parameterVo.isSplitScreen()){var r={};this.appendParamsToLog(r,e,t),n.parameterVo.isJsb()?window.WebViewJavascriptBridge&&window.WebViewJavascriptBridge.callHandler("log",JSON.stringify(r)):n.parameterVo.isPost()&&(r=this.appendParamsToPC(r),window.ZMClientBridge&&window.ZMClientBridge.ZMGClientOnly&&window.ZMClientBridge.ZMGClientOnly(r)),o.default.instance().newRecordTransceiver.send(e,t)}},e.prototype.appendParamsToLog=function(e,t,r){void 0===r&&(r={}),e.action=t,e.data=r,e.url=window.location.href,e.time=(new Date).getTime(),e.id=n.parameterVo.gameId,e.source="game",n.parameterVo.isZML()?e.kjType="zml":n.parameterVo.isZMG()&&(e.kjType="zmg"),e.scene=n.sceneState.curSceneName(),e.sceneIndex=n.sceneState.curIndex,n.parameterVo.isGameClass()?e.lessonUid=n.lessonInfo.lessonUID:n.parameterVo.isGameReplay()&&(e.lessonUid=n.parameterVo.lessonUid)},e.prototype.appendParamsToPC=function(e){var t={},r=n.parameterVo.userId;return t.action=s.GAME_LOG,t.source=e.source,t.id=e.id,t.data=e,t.kjType=e.kjType,t._sendId=r,t._isMainFrame=!1,t.toMobiles=[r],t.notSaveMobile=[r],t},e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(0),o=r(4),s=r(1),a=function(){function e(){this._ZM_JSSDK=window.ZM_JSSDK,this._subUuid="",this.reset(),this.setConfig()}return e.prototype.setConfig=function(){var e="fat";this._ZM_JSSDK&&(i.parameterVo.enviroment===o.TYPE_ENVIRONMENT.PRODUCTION&&(e="prod"),this._ZM_JSSDK.setConfig({environment:e,logLevel:"error",useBeacon:!1}),this.setDefaults(),this.getSubCoursewareUuid())},e.prototype.setDefaults=function(){var t,r="0",n=e.APP_ID,o=e.APP_VERSION;this._ZM_JSSDK&&(t=this.getLessonUid(),""!==(r=i.parameterVo.user_id)&&"0"!==r||(r=i.parameterVo.userId),window.SDKConfig&&(n=window.SDKConfig.appId||n,o=window.SDKConfig.appVersion||o),this._ZM_JSSDK.setDefaults({appId:n,appVersion:o,userId:r,lessonUid:t,role:this.getRole(),roomSessionId:i.parameterVo.roomSessionId}))},e.prototype.send=function(e,t,r,n){if(void 0===t&&(t={}),void 0===r&&(r=0),void 0===n&&(n=1),e&&""===e)s.error("埋点事件名称为空!");else if(this._ZM_JSSDK&&this._ZM_JSSDK.sendEvent&&!i.parameterVo.isSplitScreen()){var o={};this.appendParamsToPacket(o,e,t,r,n),this._ZM_JSSDK.sendEvent(o)}},e.prototype.sendPage=function(e,t,r,n){if(void 0===t&&(t=0),void 0===r&&(r={}),void 0===n&&(n=3),e&&""===e)s.error("埋点事件名称为空");else if(this._ZM_JSSDK&&this._ZM_JSSDK.sendCustomPage&&!i.parameterVo.isSplitScreen()){var o={};this.appendPageParamsToPacket(o,e,t,r,n),this._ZM_JSSDK.sendCustomPage(o)}},e.prototype.reset=function(){this._subUuid=""},e.prototype.destroy=function(){this.reset(),this._ZM_JSSDK=null},e.prototype.appendParamsToPacket=function(e,t,r,o,s){var a;void 0===r&&(r={}),void 0===o&&(o=0),void 0===s&&(s=1);var c=new Date;e.eventId=this.getEventPreName()+t,e.eventType=o,e.eventValue=s,e.event_type===n.EVENT_TYPE.TYPE_COUNT&&(e.event_value=1),e.eventParam=r,(a=e.eventParam).gameId=i.parameterVo.gameId,a.scene=i.sceneState.curSceneName(),a.sceneIndex=i.sceneState.curIndex,a.parentAppId=i.parameterVo.appId,a.appVersion=i.trackInfo.appVersion,a.timeStamp=c.getTime(),a.localTime=c.toLocaleString()+"."+a.timeStamp%1e3,a.nameSpace=this.getNameSpace(),a.coursewareUuid=i.parameterVo.coursewareUuid,a.subCoursewareUuid=this._subUuid,a.coursewareId=i.parameterVo.coursewareId,a.versionCode=i.parameterVo.versionCode},e.prototype.appendPageParamsToPacket=function(e,t,r,n,o){var s;void 0===r&&(r=0),void 0===n&&(n={}),void 0===o&&(o=3);var a=new Date;e.pageName=this.getEventPreName()+t,e.pageId=i.parameterVo.gameOrigin,e.pageParam=n,(s=e.pageParam).gameId=i.parameterVo.gameId,s.scene=i.sceneState.curSceneName(),s.sceneIndex=i.sceneState.curIndex,s.parentAppId=i.parameterVo.appId,s.appVersion=i.trackInfo.appVersion,s.timeStamp=a.getTime(),s.localTime=a.toLocaleString()+"."+s.timeStamp%1e3,s.nameSpace=this.getNameSpace(),s.coursewareUuid=i.parameterVo.coursewareUuid,s.subCoursewareUuid=this._subUuid,s.coursewareId=i.parameterVo.coursewareId,s.versionCode=i.parameterVo.versionCode},e.prototype.getSubCoursewareUuid=function(){return window.hdLog?this._subUuid=window.hdLog.subCoursewareUuid:this._subUuid=(new Date).getTime().toString(),this._subUuid},e.prototype.getEventPreName=function(){var e;return e="",i.parameterVo.isGamePreview()?e=n.PREVIEW:i.parameterVo.isGameClass()?e=n.STUDY:i.parameterVo.isGameObserver()?e=n.WATCH:i.parameterVo.isReplay()&&(e=n.REPLAY),e+=n.ZMG},e.prototype.getLessonUid=function(){return i.parameterVo.isGameClass()?i.lessonInfo.lessonUID:(i.parameterVo.isGameReplay(),i.parameterVo.lessonUid)},e.prototype.getNameSpace=function(){var e="preview";return i.parameterVo.isGamePreview()?e="preview":i.parameterVo.isGameReplay()?e="replay":i.parameterVo.isGameClass()&&(e="class",i.parameterVo.isGameObserver()?e="watch":i.parameterVo.isRepairRecord?e="repairRecord":i.parameterVo.isRepairPlay?e="repairPlay":i.parameterVo.isGameTrain()&&(e="train")),e},e.prototype.getRole=function(){var e="none";switch(i.parameterVo.role){case o.USER_ROLE.STUDENT:e="student";break;case o.USER_ROLE.TEACHER:e="teacher";break;case o.USER_ROLE.OBSERVER:e="watcher";break;case o.USER_ROLE.TRAINER:e="trainer"}return e},e.APP_ID="11264",e.APP_VERSION="1.0.0",e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3),o=r(0),s=r(125),a=r(9),c=r(14);!function(e){e[e.NONE=0]="NONE",e[e.DIV=1]="DIV",e[e.WEBGL=2]="WEBGL",e[e.ERROR=3]="ERROR",e[e.BLANK=4]="BLANK"}(n||(n={}));var l=function(){function e(){this.reset()}return e.prototype.reset=function(){this._isRuning=!1,this._totalError=0,this._level=n.NONE,this._step=1,this._total=2e3,this._curStep=0,this._duration=0,this._renderCount=0,this._zeroError=0},e.prototype.start=function(){o.parameterVo.isGamePreview()||o.parameterVo.isReplay()||o.parameterVo.isSplitScreen()||o.parameterVo.isRepairRecord||(this._isRuning=!0,this._timeId=setInterval(this.update.bind(this),30,30))},e.prototype.stop=function(){this._isRuning=!1,clearInterval(this._timeId)},e.prototype.update=function(e){this._isRuning&&(this._duration+=e,this._curStep>=this._step&&(this._curStep=0,this.render(),this._renderCount++),this._curStep++)},e.prototype.render=function(){switch(this._level){case n.NONE:this.checkNone();break;case n.DIV:this.checkDiv();break;case n.WEBGL:this.checkWEBGL();break;case n.ERROR:this.checkError()}},e.prototype.setState=function(e,t,r){this._step=e,this._total=t,this._duration=0,this._renderCount=0,this._level=r,this.sendLog(this._level-1,"ok")},e.prototype.checkNone=function(){this._duration>=this._total&&this.setState(2,5e3,n.DIV)},e.prototype.checkDiv=function(){this._duration>=this._total?this.reload():this.isGameCanvas()&&this.setState(2,5e3,n.WEBGL)},e.prototype.checkWEBGL=function(){this._duration>=this._total?this.reload():this.isSupportWebGl()&&(this._zeroError=0,this.setState(5,5e3,n.ERROR))},e.prototype.checkError=function(){var e;if(this._duration>=this._total){if(!(this._zeroError/this._renderCount>=.4))return void this.reload();this.sendLog(n.ERROR,"ok"),this.stop()}else(e=this.getJsErrorCount())-this._totalError==0&&this._zeroError++,this._totalError=e},e.prototype.reload=function(){this.stop(),this.sendLog(this._level);var e=s.getItem("refreshCount");a.isEmpty(e)?e=1:e++,s.addItem("refreshCount",e,900)},e.prototype.sendLog=function(e,t){if(void 0===t&&(t="error"),e!=n.NONE){var r={};r.name=n[e],r.state=t,r.url=c.formateUrlOfMobile(window.location.href),i.default.instance().newRecordTransceiver.send("checkMsg",r)}},e.prototype.isGameCanvas=function(){var e=!1,t=i.default.instance().thirdInterface.gameCanvasName();return document.getElementById(t)&&(e=!0),e},e.prototype.isSupportWebGl=function(){var e,t=i.default.instance().thirdInterface.gameCanvasName();if(!(e=document.getElementById(t)))return!1;try{e.getContext("webgl")||e.getContext("experimental-webgl")||e.getContext("webkit-3d")||e.getContext("moz-webgl")}catch(e){return!1}return!0},e.prototype.getJsErrorCount=function(){return window.hdLog&&window.hdLog.jsError?window.hdLog.jsError:0},e.prototype.getDocErrorCount=function(){return window.hdLog&&window.hdLog.docError?window.hdLog.docError:0},e}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(9),o=r(3);function s(e){var t=a(e);o.default.instance().thirdInterface.localStorageDeleteItem(t)}function a(e){var t="";return t+="hd_",t+=n.parameterVo.gameId+"_",t+=e}t.addItem=function(e,t,r){void 0===r&&(r=3600);var n={};n.data=t,n.endTime=(new Date).getTime()+1e3*r;var i=a(e);return o.default.instance().thirdInterface.localStorageSetItem(i,JSON.stringify(n)),!0},t.getItem=function(e){var t=a(e),r=o.default.instance().thirdInterface.localStorageGetItem(t);return i.isEmpty(r)?null:(r=JSON.parse(r),(new Date).getTime()<=parseInt(r.endTime)?r.data:(s(e),null))},t.deleteItem=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),i=r(0),o=r(1),s=!1,a=!1;function c(e){o.info("jsb init end"),e.registerHandler("jsbReceiveMsg",(function(e,t){e=JSON.parse(e),n.default.instance().transceiver.jsbReceiveMsg(e)})),window.WebViewJavascriptBridge&&(o.info("jsb gameReady..."),n.default.instance().transceiver.sendMsg("gameReady",null,!1),n.default.instance().jsbReady=!0)}function l(){var e;a&&s&&(i.parameterVo.isIpad()||i.parameterVo.isIphone()?function(e){if(window.WebViewJavascriptBridge)return e(window.WebViewJavascriptBridge);if(window.WVJBCallbacks)return window.WVJBCallbacks.push(e);window.WVJBCallbacks=[e];var t=document.createElement("iframe");t.style.display="none",t.src="wvjbscheme://__BRIDGE_LOADED__",document.documentElement.appendChild(t),setTimeout((function(){document.documentElement.removeChild(t)}),0),o.info("jsb init start")}((function(e){return c(e)})):(i.parameterVo.isApad()||i.parameterVo.isAphone())&&(e=function(e){return c(e)},window.WebViewJavascriptBridge?e(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",(function(){e(window.WebViewJavascriptBridge)}),!1),o.info("android jsb init start")))}window.onload=function(){a=!0,l()},t.init=function(){i.parameterVo.isJsb()&&(s=!0,l())}}]);